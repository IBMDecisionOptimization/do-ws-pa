{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f22d1b59baf2c1f31788","webpack:///./css/gantt-jquery.css","webpack:///./src/gantt-jquery.js","webpack:///./src/gantt.js","webpack:///./src/core/core.js","webpack:///./src/core/plugins.js","webpack:///./src/core/model.js","webpack:///./src/core/selection.js","webpack:///./src/core/layoutsynch.js","webpack:///./src/core/ganttpanel.js","webpack:///./src/core/utils.js","webpack:///./src/core/error.js","webpack:///./src/core/filter.js","webpack:///./src/core/updates.js","webpack:///./src/core/toolbar.js","webpack:///./src/core/tooltip.js","webpack:///./src/core/renderer.js","webpack:///./src/core/activitylayout.js","webpack:///./src/core/constraintgraph.js","webpack:///./src/core/constraintlayout.js","webpack:///./src/core/timetable.js","webpack:///./src/core/dragdrop.js","webpack:///./src/core/loadchart.js","webpack:///external \"jQuery\"","webpack:///external \"vis\"","webpack:///./~/es6-promise/dist/es6-promise.min.js","webpack:///./~/process/browser.js","webpack:///vertx (ignored)","webpack:///./src/jquery/jquery-core.js","webpack:///./src/jquery/utils.js","webpack:///./src/jquery/split.js","webpack:///./src/jquery/timeline.js","webpack:///./src/jquery/datatables.js","webpack:///./src/jquery/treetablecontroller.js","webpack:///external \"datatables.net\""],"names":["module","exports","default","Promise","console","log","polyfill","Gantt","context","config","utils","isString","document","getElementById","panelClass","components","GanttPanel","impl","gantt","defaultConfiguration","rowHeight","zoomFactor","loadingPanelThresold","events","TITLE_CHANGED","TABLE_INIT","TIME_TABLE_INIT","TIME_LINE_INIT","TIME_WINDOW_CHANGED","TIME_LINE_RANGE_CHANGE","TIME_LINE_RANGE_CHANGED","TIME_LINE_SIZE_CHANGED","TIME_LINE_PAN_MOVE","TIME_LINE_PAN_MOVED","TIME_LINE_SCROLLED","RESIZED","SPLIT_RESIZED","ROWS_FILTERED","DATA_LOADED","ROWS_ADDED","ROWS_REMOVED","ROWS_MODIFIED","ROWS_SORTED","START_SELECTING","SELECTION_CLEARED","STOP_SELECTING","ACTIVITY_SELECTED","ACTIVITY_UNSELECTED","ACTIVITY_SELECTION_CHANGED","ACTIVITY_SELECTION_CLEARED","RESOURCE_SELECTED","RESOURCE_UNSELECTED","RESOURCE_SELECTION_CHANGED","RESOURCE_SELECTION_CLEARED","ROW_SELECTED","ROW_UNSELECTED","ROW_SELECTION_CHANGED","ROW_SELECTION_CLEARED","CONSTRAINT_SELECTED","CONSTRAINT_UNSELECTED","CONSTRAINT_SELECTION_CHANGED","CONSTRAINT_SELECTION_CLEARED","type","ACTIVITY_CHART","SCHEDULE_CHART","constraintTypes","START_TO_START","START_TO_END","END_TO_END","END_TO_START","isFromStart","isToStart","Tooltip","elt","ctx","cb","DataFetcher","obj","Split","Component","event","handler","__events","ar","eventList","isArray","split","i","length","push","wrapperHandler","params","apply","index","indexOf","splice","on","iEvent","arguments","paramsArg","Array","iParam","evCount","count","ErrorHandler","err","node","createElement","className","TimeLine","start","end","time","window","id","classes","item","TimeTable","setConfiguration","parent","GanttUpdates","row","highlight","deselectAll","callback","constraints","y","x","w","h","TreeTable","rows","param","filter","collapse","height","tr","offsetTop","getTableBody","name","defaultClass","GanttModel","evt","rowFilter","activities","filterTasks","key","preventNotify","text","hide","Filter","options","Renderer","proto","paletteHandler","mergeObjects","ActivityLayout","ObjectTypes","Activity","Resource","Row","Constraint","Reservation","SelectionHandler","selections","selectionType","clear","notActive","e","LayoutSynchronizer","disconnect","Palette","defaultPaletteName","defaultPalettes","update","_reload","Toolbar","createTitle","title","innerHTML","Button","callbacks","btn","icon","img","src","alt","appendChild","fontIcon","createTextNode","onclick","clicked","map","selected","toggleClass","CheckBox","ctnr","style","whiteSpace","input","inputNode","setAttribute","label","checked","Toggle","_node","_isSel","isSelected","btnUnselected","unselected","btnSelected","updateButtons","forEach","c","isSel","parentNode","replaceChild","DropDownList","addClass","labelNode","select","selectNode","opt","optNode","value","onchange","Input","display","flexDirection","alignItems","deleteBtn","deleteIcon","createEvent","initEvent","dispatchEvent","fireEvent","userCallback","onkeyup","ButtonGroup","buttons","self","installBtnClicked","button","setSelected","cfgBtns","undefined","setValue","noNotify","LoadResourceChart","ConstraintsGraph","cts","ConstraintLayout","nodeFrom","nodeTo","cons","rowIndex","parentElt","renderer","envReady","resolve","hot","accept","plugins","register","unregister","getAll","call","method","args","paramsStart","reverse","prototype","slice","inc","result","plugin","Plugin","updateTimeWindow","wnd","activity","ConstraintPrototype","isDisplayed","nodes","clearLink","setNodes","destroy","ftchClass","fetchConfig","checkFetcher","fetcher","get","Error","Object","keys","join","dateParser","dateFormat","createDateParser","makeTimeFct","fct","final","allFetcher","all","_reader","reader","isFunction","data","_resourcesGetter","resources","propertyEvaluator","_activitiesGetter","_reservationsGetter","reservations","_constraintsGetter","resourceFetcher","_parentIdGetter","_idGetter","_nameGetter","_activityGetter","activityFetcher","_startGetter","_endGetter","resource","_resourceIdGetter","reservationFetcher","_resourceGetter","constraintFetcher","_fromGetter","from","_toGetter","to","_typeGetter","timeWindow","timeWindowFetcher","allData","then","loadFromData","actPromise","resaPromise","resourcePromise","consPromise","byIds","flat","wndPromise","Number","MAX_VALUE","resourceGantt","isResourceGantt","timeWindowProcessed","computeTimeWindow","createTreeNodes","resas","wndResult","createReservationsFromActivityResources","createReservations","createConstraints","triggerEvent","resByIds","actByIds","resIdGetter","actIdGetter","resId","res","actId","act","len","resa","createReservationNode","error","JSON","stringify","rowByIds","resGetter","actNode","getData","consNodes","createConstraintNode","create","getObjectType","consOuts","consIns","hasAncestor","p","getAncestorsCount","setRowHeight","isGanttRow","rowFetcher","isActivity","children","origData","parentId","arr","resultIndex","iAct","roots","allActivities","startGetter","endGetter","actsGetter","addNode","childNodes","childCount","iChild","idGetter","nameGetter","parentIdGetter","createTreeNode","createActivityNode","START_SELECTION_METHOD","STOP_SELECTION_METHOD","CLEAR_SELECTION_METHOD","SELECTION_CHANGED_EVENT","UNSELECT_EVENT","SELECT_EVENT","CLEAR_SELECTION_EVENT","Type","getSelectionChangedEvent","getSelectionChangedMethod","getSelectionEvent","getSelectionMethod","getUnselectionEvent","getUnselectionMethod","getClearSelectionEvent","getClearSelectionMethod","o","m","clearSelectionMethod","getTypeMethod","selectionMethod","unselectionMethod","selectionChangedMethod","lock","types","genericType","observers","addConfiguration","addObserver","startSelecting","objType","selTypeChanged","oldType","notify","setObjectSelected","concat","unshift","stopSelecting","selecting","uns","foundUns","oldSelection","ctrlKey","unselect","shiftKey","typeEvent","getTypeEvent","sameBounds","rect1","rect2","width","bounds","toString","timeTableBounds","resizeHandler","checkBounds","timeWindowChangeListener","timeWindowChanged","timeLineSizeListener","timeLineSizeChanged","timeLineInitializedListener","timeLineInitialized","timeLineScrollListener","timeLineScrolled","offsetParent","parentBounds","getScreenPoint","timeLine","getWidth","getTimeAxisHeight","timeTable","getScroller","scrollLeft","getTimeAt","newBounds","getScreenTimeTableScrollerBounds","timeTableBoundsChanged","timeTableScroller","pt","getVisibleWidth","getVisibleHeight","off","onResize","splitPane","initializing","addEventListener","tooltip","tooltipClazz","stringMatcher","stringMatches","filterClazz","string","pattern","getObjectFilterMethodName","acceptString","columnData","col","activityFilter","tasks","actName","table","hideEmptyRows","setHideEmptyRows","palette","setPaletteConfiguration","palettes","defaultPalette","selectionClazz","selectionHandler","selection","actType","registerType","resType","rowType","rc","sels","typeForRow","defaultNotify","errorClass","errorHandler","updates","oldApplyUpdates","applyUpdates","containsRowChanges","updateScrollerHeight","hasTableScrollYChanged","getScrollableTable","scrollTop","setScrollTop","model","_init","reject","createModel","createDefaultModelConfig","load","addError","modelClass","setTimeWindow","contentElt","position","getLoadConfig","loadResourceChart","loadChartHidden","toolbars","toolbar","createToolbars","toolbarElt","header","headerElt","createHeader","bodyElt","body","flexGrow","flexShrink","bodyCtnr","splitClass","hConfig","parseInt","loadChartSplit","divider","pos","horizontal","fixedFirst","hideSecond","onDividerDragEnd","getLeftComponent","onresized","tablePanel","leftComp","overflow","createTreeTable","leftComponentCreated","rightPanel","getRightComponent","createTimePanel","createTimeLine","timeLineScroller","connect","loadCharts","loadResPanel","createLoadResourceChart","rightComponentCreated","timeLineInit","loadingPanel","loadTimeout","setTimeout","createLoadingPanel","stopLoading","clearTimeout","removeChild","loading","getTimeWindow","today","Date","getTime","day","startUpdating","_resourceGantt","hasConstraints","setRows","setConstraints","reload","stopUpdating","toobars","bar","ganttLoaded","catch","isFlat","updateTableHeaderHeight","updateWidthFromTimeLine","scrollTimeTableToX","getXFromMillis","getHorizon","updateTimeLineHeight","minWidth","clazz","setRowFilter","createUpdates","timePanel","vScrollerFiller","right","top","updateTimeLineRightMargin","rightMargin","getRightMargin","paddingRight","force","headersHeight","setHeaderHeight","timeTablePanel","left","bottom","attachTimeTableMouseWheel","target","deleteDrawCache","draw","lp","justifyContent","loaderCtnr","transform","loader","getString","loadChartNode","chartPanel","loadConfig","loadChart","flex","addWheelListener","preventDefault","setLoadChartVisible","isLoadChartVisible","visible","setRightComponentVisible","bottomMargin","getBottomMargin","paddingBottom","scroller","deltaY","zoomIn","zoomOut","timeLineCtnr","drawTimeTable","ToolbarClass","toolbarNode","barConfig","isDomElement","t","onInitialized","getRowCount","getRow","getVisibleRows","isRowFiltered","expandParents","scrollToRow","isRowVisible","getFirstVisibleRow","setFirstVisibleRow","toggleCollapseRow","scrollToY","activityRow","offsetHeight","forceTableRedraw","setBodyHeight","loadOnDemand","getRowHeight","getHeight","acts","getRowActivities","isInteger","getActivity","j","removeEventListener","firstChild","highlightRow","ls","resetZoom","zoom","validateZoomFactor","visibleW","xRef","getTimeTableCoordinates","offsetX","offsetY","getScrollLeft","timeRef","newScrollLeft","timeRange","getDisplayedActivitiesTimeRange","setVisibleTimeWindow","setBodyWidth","addFilter","actFilter","addOrFilters","filterChanged","success","removeFilter","searchFilter","hideEmptyRowsFilter","isEmpty","color","setRowColor","Math","min","max","round","getBodyWidth","setScrollLeft","lc","walkToAncestor","offsetLeft","addTimeMarker","removeTimeMarker","setTimeLineItem","addTimeLineItem","removeTimeLineItem","hasErrors","paletteNames","rowsChanged","sel","currentSel","GanttStrings","isFinite","floor","defaultDateFormat","format","fmt","year","month","hour","secs","millis","convertor","yyyy","yy","M","MM","MMMM","d","dd","H","HH","mm","s","ss","S","SS","SSS","replace","part","parts","match","closest","selector","prop","getChild","tagname","toUpperCase","tagName","arg","String","nodeType","hasClass","el","classList","contains","RegExp","add","removeClass","remove","reg","classname","set","html","htmlText","makeArrayMatcher","array","matcher","getWindowScrollLeft","documentElement","getWindowScrollTop","getBoundingClientRect","ajax","url","path","search","toLocaleLowerCase","toLowerCase","defaultValue","formatString","tpl","_","capture","attachEvent","detachEvent","implements","toImplement","hasOwnProperty","detectIE","ua","navigator","userAgent","msie","substring","trident","rv","edge","privateFields","settings","createEntry","cfg","postProcess","ajaxConfig","propEval","defConfig","entryConfigs","useDefault","prefix","_addEventListener","support","onmousewheel","elem","useCapture","_addWheelListener","eventName","originalEvent","srcElement","deltaMode","deltaX","deltaZ","altKey","returnValue","wheelDelta","wheelDeltaX","detail","token","timezone","timezoneClip","pad","val","date","mask","utc","dF","test","isNaN","SyntaxError","masks","D","L","getTimezoneOffset","flags","ddd","i18n","dayNames","dddd","mmm","monthNames","mmmm","hh","l","tt","T","TT","Z","pop","abs","$0","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","isoDate","isoTime","isoDateTime","isoUtcDateTime","colorSet","maxColorsSize","addColorSet","size","insert","getColorsFromSet","setCount","_getColors","colors","keyCount","makeResult","arLen","defaults","listClass","maxErrors","bodyClass","titleClass","barClass","descClass","detailsBtnClass","removeBtnClass","errorExpandedDefault","fadingOutDuration","ErrorGroup","errs","errNodes","errorList","removed","removedElt","beforeSettingErrorList","ensureErrorGroup","errorGroups","errorGroup","lockCount","msg","errDetails","convertError","errNode","createErrorNode","createErrorList","updateErrorList","iGroup","lst","errorContent","textContent","divTitle","_toggleErrorDisplay","divErrorBar","desc","divDesc","detailsBtn","tabIndex","removeErrorBtn","removeError","message","status","statusCode","description","stack","errorNode","filters","filterKeys","filterKey","createFilter","createFilterSet","paramList","orFilter","DEFAULT_FILTER_SET_MODE_OR","copyLength","filterList","f","or","and","object","str","updateLocks","_containsRowChanges","_tableYScrollChanged","isReload","rowRef","addUpdate","removeUpdate","doApplyUpdates","applyReload","iUpdate","applyUpdate","idCount","makeId","checkClass","Checkbox","buttonClass","selectClass","Select","ToolbarComponents","getTitle","justifyLeft","separator","sep","whitespace","component","mini","svg","viewBox","margin","paths","ganttNode","getPanelNode","comp","setChecked","fitToContent","refresh","toggleLoadChart","toggleLoadChartVisible","leftBar","append","marginRight","cfgNode","template","setId","initTooltip","tooltbar","getTooltipNode","dataset","installTooltip","container","getTooltipDisplayContainer","getBody","getTooltipElement","renderTooltip","tooltipNode","tooltipCtnr","FlatCheckbox","ARROW_STYLE","BOTTOM_ARROW_STYLE","TOP_ARROW_STYLE","_tooltip","visibility","_tooltipArrow","_arrowHeight","_hideTimer","_hidingElt","hideTooltip","_tooltipElt","hidingElt","_showTimer","maxHeight","tooltipHeight","eltScreenPt","limits","limitElt","lef","clientWidth","clientHeight","offsetWidth","topAvailHeight","bottomAvailHeight","arrowStyle","arrowPos","adjustHorizontally","limitLeft","limitRight","arrowMargin","maxWidth","setArrowPosition","showDelay","_hideCB","TOOLTIP_FADING_TIME","TOOLTIP_SHOWING_DELAY","tooltipData","getTooltipData","enteringTooltipElement","showTooltip","leavingTooltipElement","relatedTarget","printElement","AUTOMATIC_COLOR","TEXT_OVERFLOW_ELLIPSIS","TEXT_OVERFLOW_NO_DISPLAY","TEXT_OVERFLOW_CUT","createSelectorFunction","oldFct","fctCtx","ext","shapeElt","createShape","getCSS","css","setCSS","getText","getIcon","drawContent","bg","background","setBackground","setColor","backgroundColor","drawDefaultContent","ctnt","flexWrap","float","textAlign","textOverflow","classOptions","property","warn","propGetter","suffix","getter","createCSSGetter","cssGetters","cssClasses","cssToAdd","oldFilter","tooltipPropsGetter","getTooltipProperties","tooltipGetter","getTooltip","textGetter","iconGetter","oldDraw","oldDrawContent","drawEllipsisContent","drawNoDisplayOverflowContent","drawCutContent","oldDrawDefaultContent","hex","exec","r","g","b","hexColor","rgb","hexToRgb","colorGetter","textColor","getTextColorFromBackgroundColor","textColors","paletteConfig","paletteRenderer","getValue","getColor","makeColors","values","getValues","getPalette","getColors","processConfiguration","defaultProcessConfiguration","addCSSConfiguration","addTextConfiguration","addIconConfiguration","addFilterConfiguration","addTooltipConfiguration","tooltipProperties","addTooltipPropertiesConfiguration","addDrawContentConfiguration","addTextOverflowConfiguration","addColorConfiguration","addDrawConfiguration","initialized","props","tableCtnr","td","iProp","defaultOptions","cascadeOffset","topMargin","subRowPadding","constantRowHeight","compareBoundingBoxes","miniWidth","STRATEGY_LOGISTIC","STRATEGY_TILE","STRATEGIES","MINI_ACTIVITY_CLASS","MILESTONE","sortTasksOnStart","subRowsCount","computeSubRows","offset","actHeight","actCount","subRowIndex","tableRowHeight","subRowHeight","availMargin","activitiyComparator","act1","act2","sort","subRows","setTaskSubRows","subRowMargin","subRowTasks","task","iTask","strategy","getLayoutStrategy","strategyKey","vLayout","layoutHorizontally","getX","iSubRow","addGraphicToSubRowIfFits","subRow","lastRowTask","endTimes","endTime","endTimesCount","linkOutlineWidth","ID_DELIM","CONSTRAINT_LINK_CLASS","CONSTRAINT_LINK_CTNR_CLASS","CONSTRAINT_ARROW","SELECTION_CLASS","ready","layout","linkRenderer","LinkRendererPrototype","setNode","clearConstraintSelection","selectConstraints","unselectConstraints","removeGroup","tooltipEnter","tooltipLeave","clickHandler","getConstraintNode","isDragAndDropping","tooltipElt","processClick","processConstraints","getActivityFilter","startInitialize","nextRow","consNode","addConstraint","stopInitialize","opacity","fromNode","toNode","clearCache","clearLinks","resetLayout","drawCB","firstRowIndex","lastRowIndex","getNodeRect","prevRow","nodeToLinkPadding","horizLinkToNodeDist","linkToLinkPadding","horizLinkToLinkDist","layoutRowNodeLinks","fragment","createDocumentFragment","drawRowLinks","lastIndex","getConstraint","fadingTime","STYLE_ARROW","NodeLabelLayout","bbox","textWidth","DefaultNodeLabelLayout","drawLink","points","lastX","lastY","lineWidth","line","horiz","pointerEvents","paddingTop","link","paddingLeft","arrowWidth","arrowHeight","drawRightArrow","drawLeftArrow","borderTop","borderBottom","borderRightWidth","borderRightStyle","borderRightColor","borderLeftWidth","borderLeftStyle","borderLeftColor","getName","addLineWidthConfiguration","addArrowConfiguration","nodeLabelLayout","addNodeLabelLayoutConfiguration","oldLineWidth","field","arrowSize","oldArrowSize","labelLayout","getNodeToLabelSpacing","oldGetLabelLayout","getLabelLayout","LOCKED","LEFT","RIGHT","SIDE_COUNT","CONNECTOR_COUNT","INCOMINGS","OUTGINGS","Link","topNode","bottomNode","compareLinks","l1","l2","i1","topIndex","i2","bottomIndex","Node","links","layoutLinks","linksDisplayed","incomingLinks","connectors","side","thisLink","iLink","n","next","defaultLayoutOptions","horizSwitchSideLinkToNodeDist","switchSideLinkVertMargin","getIncomingLink","incConnectionCount","beforeTop","beforeBottom","addLink","setIncomingLink","reinteringPath","layoutOneSideNodeLinks","layoutNodeLabel","parentAct","connectIndex","incoming","outgoing","beforeLink","setBBox","processConnectors","nodeLimit","limit","getLinks","skipIndex","switchSides","last","MIN_VALUE","labelW","getTextWidth","iterLinks","nextLink","startLayout","hasLinks","spacing","move","startLeft","endLeft","iPoint","ROW_ID_PREFIX","ACTIVITY_ID_PREFIX","bufferPageSize","TIME_MARKER_DRAG_ITEM","TIME_TABLE_ACTIVITY_CLASSNAME","TIME_TABLE_ROW","UNSELECTABLE_CLASSNAME","DEFAULT_ACTIVITY_CLASSNAME","MILESTONE_CLASSNAME","PARENT_ACTIVITY_CLASSNAME","HIGHLIGHT_CLASS","SELECT_CONTENT_CLASSNAME","DECORATION_INVALID_TYPE","DECORATION_INVALID_CLASS","DECORATION_BREAK_TYPE","DECORATION_BREAK_CLASS","processDoubleClick","processMouseDown","clearActivitySelection","selectActvities","unselectActvities","selectRows","unselectRows","rendererClass","activityRenderer","ActivityRendererPrototype","interactor","moveInterator","mouseHandler","click","onScroll","synchronizeTableTop","initDragAndDrop","layoutClass","overflowX","timeTableWidthTester","timeTableHeightTester","minHeight","getTimeTableRowNode","ctsGraph","resetConstraints","actRow","oldRowHeight","variableLayoutRowHeight","allowVariableRowHeight","odd","rowSpan","rowNode","generateRowDecorations","renderActivities","actNodes","renderActivity","timeTableRowNode","forceRedraw","ctsNode","lastRepaintY","getScrollableHorizon","generateDecorations","backgroundCtnr","generateGlobalDecorations","getRowAt","getRowTop","ctsRows","maxBufferHeight","yFinal","variableHeightLayout","createContainer","renderRow","insertBefore","updateScrolls","_ready","padding","border","isActivityNode","activityElt","activityNode","deSelectAll","highlightActs","querySelectorAll","highlightRows","minDate","maxDate","resGantt","getActivityNode","highlightActivity","filterFct","dragDropHandler","addHandler","startMove","initOffsetX","initOffsetY","initActivityRow","initRow","initTimeTablePos","initScrollLeft","initScrollTop","timeLineItem","startRow","startDraggingActivity","scrollDiffX","dx","scrollDiffY","dy","preRow","newRow","currentTime","draggedObject","acceptActivityRowChange","acceptActivityMove","moved","updateTimeLineItem","restoreInitPosition","initTop","stopMove","stopDraggingActivity","applyMove","applyActivityMove","cancel","abortActivityMove","createDragTimeLineItem","changeRow","invalid","current","currentRow","content","startDragMouse","actParam","acceptRowChange","acceptMove","abortMove","processMouseEvent","rowClicked","activityClicked","rowCB","activityCB","coord","rowDoubleClicked","activityDoubleClicked","which","rowRightClicked","activityRightClicked","stopPropagation","decoContainer","getDecorationContainer","objs","addDecoration","zIndex","foreground","createConstraintGrapherNode","foregroundCtnr","diamond","triangleBar","triangleWidth","leftTriangle","borderTopStyle","borderTopWidth","rightTriangle","selElt","drawRightContent","textCtnr","getTextHeight","dist","marginLeft","addRowHeightConfiguration","addGenerateRowDecorations","addGenerateDecorations","defaultSetBackground","drawDefaultContentSet","ganttLoadListener","borderColor","querySelector","oldGenerateRowDecorations","decorations","newDecos","oldGenerateDecorations","defaultConfig","keySpeed","showMoveOnInvalid","dragActivationThresoldWidth","dragActivationThresoldHeight","DragDropHandler","initialMouseX","initialMouseY","startX","startY","dXKeys","dYKeys","clickedObject","handlers","methodsToHitch","hitchedMethods","element","onmousedown","clientX","clientY","blur","connectDragStarter","checkStartDrag","cancelDragStarter","dragStarterKeys","dragStartSwitchKeyEvents","dX","dY","startDrag","switchKeyEvents","keyCode","releaseElement","dragMouse","dropped","dragKeys","initLeft","initParentNode","meth","callHandlers","capturing","hitched","stopDrag","LOAD_RESOURCE_BAR_CLASS","RESOURCE_LOAD_CLASS","CHART_TOP_MARGIN","ResNode","maxLoad","Block","prev","resNodes","resNode","block","addResource","insertAfter","useMaxLoad","usedRes","computeMax","closing","plotAreaHeight","chartRenderer","toLocaleDateString","rowSelectionChanged","setResources","a","addChildResources","layoutSynch","headerContent","leftPanel","legendPanel","overflowY","yAxisPanel","yAxis","timeLineScrollerElt","noSelectionElt","noSelMsg","synchLayout","convertBounds","timeLineElt","updatePlottingArea","drawCharts","createGetter","resourceMaxLoad","resourceActivityLoad","info","resourceName","activityName","resourceLoad","initTooltips","visTimeline","Timeline","orientation","axis","scrollableHorizon","range","emitter","fireReady","getWindow","timeScaleElt","getElementsByClassName","getComputedStyle","topBorder","timeScaleHeight","$","outerHeight","allRes","selectionChanged","updateLegend","firstBlock","setYAxisMax","items","yRatio","createVisItem","setItems","legend","hasRes","li","colorBox","verticalAlign","tickCount","tickUnit","closest10Factor","MAX_TICK_COUNT","totalHeight","iTick","v","createLabelledTick","labelDiv","lineHeight","tick","setPlottingAreaHeight","isResourceLoadNode","getResourceLoadNode","getResource","loadchart","resName","resLoad","resMaxLoad","allGantts","getGantt","removeGantt","fn","gantts","each","ganttRef","apiRef","api","extend","$parent","$params","dataType","customizeRequest","beforeSend","statusText","req","request","methods","init","$splitPanes","setMinHeightAndMinWidth","mousedownHandler","createParentresizeHandler","trigger","firstComponentSize","$splitPane","getComponents","is","fixedTopHandler","pageY","fixedBottomHandler","horizontalPercentHandler","fixedLeftHandler","pageX","fixedRightHandler","verticalPercentHandler","lastComponentSize","setLeftComponentVisible","first","grep","it","SPLITPANERESIZE_HANDLER","special","_splitpaneparentresize","setup","namespaces","dispatch","teardown","removeData","$divider","$resizeShim","siblings","show","moveEventHandler","createMousemove","pageXof","pageYof","one","getComponentsSizes","find","lastComponentMinHeight","maxfirstComponentHeight","setTop","resize","firstComponentMinHeight","maxLastComponentHeight","setBottom","lastComponentMinWidth","maxFirstComponentWidth","setLeft","firstComponentMinWidth","maxLastComponentWidth","setRight","maxFirstComponentHeight","topOffset","newTop","bottomOffset","splitPaneHeight","leftOffset","newLeft","rightOffset","splitPaneWidth","touches","hideFirst","splitPaneElt","leftComponent","rightComponent","$splitPaneElt","scrollableHorizonFactor","itemsByIds","span","horizon","initPromise","initResolve","updateRatio","startMillis","endMillis","ratio","visTimeAxis","xCenter","horizPageCount","animate","interval","setWindow","animation","customTimes","addCustomTime","markerObj","removeCustomTime","$panel","FLAT_CLASS","NUMBER_COLUMN_NAME","HIERARCHY_COLUMN_NAME","TREE_NODE_TYPE","defaultDataTableOptions","bInfo","paging","rowId","getDefaultTableColumns","render","full","meta","orderable","searchable","findColumn","columns","iCol","GanttDataTable","clearSelection","$dataTable","dataTableOptions","dataTables","defaultColumns","configCol","customizeDataColumn","removedCols","sorting","bSort","initialSorting","order","controller","rowsVisibilityChanged","customizeOptions","oldInitComplete","initComplete","oSettings","json","oldDrawCallback","drawCallback","_drawCallbacks","sortComparator","sortValue","filterValue","colRenderer","ColumnRendererPrototype","getSortValue","comparator","iIcon","createdCell","cell","cellData","rowData","colIndex","tableElt","cellSpacing","thead","th","initResolver","initPms","resolver","$tableElt","tableBody","headerHeight","tableInitialized","DataTable","hasNumberColumn","column","allSettings","ganttDataTable","getScrollableBody","install","$scrollableBody","scrollableBody","$scrollableHead","tableHeader","tableScrollYChanged","scrollHeadHeight","tds","panelHeight","trs","startingRow","nextSibling","previousSibling","createRowResult","origIndex","nextTr","lastChild","childElementCount","prevTr","defaultHeight","yTop","isCollapsedNode","collapseNode","forceTableReload","__filterMatched","DATATABLE_FILTER_INSTALLED","TreeTableController","collapsedNodes","hCol","getHierarchyColumn","oldRender","oldData","oldCreatedRow","createdRow","parentRow","hidden","rowsModified","setRowVisible","topCollapsed","dataTable","aData","dataIndex","processVisibilityFromChildren","vNode","child","makeComparisonFct","aParent","lastParent","bParent"],"mappings":"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","file":"gantt-jquery.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"), require(\"vis\"), require(\"datatables.net\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Gantt\", [\"jQuery\", \"vis\", \"datatables.net\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Gantt\"] = factory(require(\"jQuery\"), require(\"vis\"), require(\"datatables.net\"));\n\telse\n\t\troot[\"Gantt\"] = factory(root[\"jQuery\"], root[\"vis\"], root[\"datatables.net\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_58__, __WEBPACK_EXTERNAL_MODULE_59__, __WEBPACK_EXTERNAL_MODULE_69__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f22d1b59baf2c1f31788","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./css/gantt-jquery.css\n// module id = 1\n// module chunks = 0","/**\n * Copyright 2016-present, Olivier, NOIRET.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n * @providesModule canDefineProperty\n */\n\n'use strict';\n\nimport Gantt from './gantt';\nmodule.exports = Gantt;\n// JQuery modules\nimport './jquery/jquery-core';\nimport './jquery/utils';\nimport './jquery/split';\nimport './jquery/timeline';\nimport './jquery/datatables';\n\n\n\n// WEBPACK FOOTER //\n// ./src/gantt-jquery.js","/**\n * Copyright 2016-present, Olivier, NOIRET.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n * @providesModule canDefineProperty\n */\n\n'use strict';\n\nexport { default } from './core/core';\nimport './core/plugins';\nimport './core/model';\nimport './core/selection';\nimport './core/layoutsynch';\nimport './core/ganttpanel';\nimport './core/renderer';\nimport './core/activitylayout';\nimport './core/constraintgraph';\nimport './core/constraintlayout';\nimport './core/timetable';\nimport './core/loadchart';\n\nimport P from '../node_modules/es6-promise/dist/es6-promise.min';\n\nif (typeof Promise === \"undefined\"/* && Promise.toString().indexOf(\"[native code]\") !== -1*/) {\n    console.log('Use of es6-promise');\n    P.polyfill();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gantt.js","'use strict';\n\nexport default class Gantt {\n  constructor(context, config) {\n    this.context = Gantt.utils.isString(context)? document.getElementById(context) : context;\n    const panelClass = Gantt.components.GanttPanel.impl || Gantt.components.GanttPanel;\n    this.gantt = new panelClass(this.context, config);\n    return this.gantt;\n  }\n}\n\n\nGantt.defaultConfiguration = {\n  rowHeight: 27,\n  zoomFactor: 0.2,\n  loadingPanelThresold: 500\n};\n\n\n//noinspection SpellCheckingInspection\nGantt.events = {\n  TITLE_CHANGED : 'titleChanged',\n  TABLE_INIT : 'tableinit',\n  TIME_TABLE_INIT : 'timesheetinit',\n  TIME_LINE_INIT : 'timeline_init',\n  TIME_WINDOW_CHANGED : 'timeWindowChanged',\n  TIME_LINE_RANGE_CHANGE : 'timeline_rangechange',\n  TIME_LINE_RANGE_CHANGED : 'timeline_rangechanged',\n  TIME_LINE_SIZE_CHANGED : 'timeline_sizeChanged',\n  TIME_LINE_PAN_MOVE : 'timeline_panmove',\n  TIME_LINE_PAN_MOVED : 'timeline_panmove',\n  TIME_LINE_SCROLLED: 'timeline_scrolled',\n  RESIZED : 'resized',\n  SPLIT_RESIZED : 'split_resized',\n  ROWS_FILTERED : 'rows_filtered',\n  DATA_LOADED : 'data_loaded',\n  ROWS_ADDED : 'rows_added',\n  ROWS_REMOVED : 'rows_removed',\n  ROWS_MODIFIED : 'rows_modified',\n  ROWS_SORTED : 'rows_sorted',\n\n  START_SELECTING : 'startSelecting',\n  SELECTION_CLEARED : 'selectionCleared',\n  STOP_SELECTING : 'stopSelecting',\n\n  // Event names are generated from the Type objects associated with the SelectionHandler, with the format type.name + 'Selected|Unselected|SelectionChanged|SelectionCleared'\n  ACTIVITY_SELECTED : 'activitySelected',\n  ACTIVITY_UNSELECTED : 'activityUnselected',\n  ACTIVITY_SELECTION_CHANGED : 'activitySelectionChanged',\n  ACTIVITY_SELECTION_CLEARED : 'activitySelectionCleared',\n\n  RESOURCE_SELECTED : 'resourceSelected',\n  RESOURCE_UNSELECTED : 'resourceUnselected',\n  RESOURCE_SELECTION_CHANGED : 'resourceSelectionChanged',\n  RESOURCE_SELECTION_CLEARED : 'resourceSelectionCleared',\n\n  ROW_SELECTED : 'rowSelected',\n  ROW_UNSELECTED : 'rowUnselected',\n  ROW_SELECTION_CHANGED : 'rowSelectionChanged',\n  ROW_SELECTION_CLEARED : 'rowSelectionCleared',\n\n  CONSTRAINT_SELECTED : 'constraintSelected',\n  CONSTRAINT_UNSELECTED : 'constraintUnselected',\n  CONSTRAINT_SELECTION_CHANGED : 'constraintSelectionChanged',\n  CONSTRAINT_SELECTION_CLEARED : 'constraintSelectionCleared'\n};\n\nGantt.type = {\n  ACTIVITY_CHART : \"ActivityChart\",\n  SCHEDULE_CHART : \"ScheduleChart\"\n};\n\nGantt.constraintTypes = {\n  START_TO_START : 0,\n  START_TO_END : 2,\n  END_TO_END : 3,\n  END_TO_START : 1,\n  isFromStart : function(type) { return (type === 0) || (type === 2); },\n  isToStart : function(type) { return type < 2; }\n};\n\nclass Tooltip {\n  constructor(config){}\n  showTooltip(elt, ctx, cb) {}\n  hideTooltip() {}\n  destroy(){}\n}\n\nclass DataFetcher {\n  get(obj){}\n}\n\nclass Split {\n  constructor(elt, config){}\n  getLeftComponent(){}\n  getRightComponent(){}\n  leftComponentCreated(){}\n}\n\nclass Component {\n  constructor(gantt, config) {\n    this.gantt = gantt;\n    this.config = config;\n    this.utils = Gantt.utils;\n  }\n\n  on(event, handler){\n    var events = this.__events || (this.__events = {});\n    var ar;\n    var eventList = this.utils.isArray(event) && event || event.split(' ');\n    for(var i = 0; i < eventList.length; i++) {\n      event = eventList[i];\n      if (!(ar = events[event])) {\n        events[event] = ar = [ handler ];\n      }\n      else {\n        ar.push(handler);\n      }\n    }\n  }\n\n  one(events, handler){\n    const wrapperHandler = (...params) => {\n      handler.apply(this, params);\n      // remove the handler after it has been notified\n      let event = params[0];\n      let index = this.__events[event].indexOf(wrapperHandler);\n      if (index > -1) {\n        this.__events[event].splice(index, 1);\n      }\n    };\n    this.on(events, wrapperHandler);\n  }\n\n  off(event, handler) {\n    if (this.__events) {\n      var ar, i;\n      var eventList = this.utils.isArray(event) && event || event.split(' ');\n      for(var iEvent = 0; iEvent < eventList.length; iEvent++) {\n        event = eventList[iEvent];\n        if (ar = this.__events[event]) {\n          for(i = 0; i < ar.length; i++) {\n            if (ar[i] == handler) {\n              ar.splice(i, 1);\n              break;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  triggerEvent(events) {\n    var ar, params;\n    if (events === true) {\n      // Apply mode, event parameters are provided as an array\n      events = arguments[1];\n      const paramsArg = arguments[2] || [];\n      params = new Array(paramsArg.length + 1);\n      for(let iParam = 0; iParam < paramsArg.length; ++iParam) {\n        params[iParam + 1] = paramsArg[iParam];\n      }\n    }\n    else {\n      params = new Array(arguments.length);\n      for(let iParam = 1; iParam < arguments.length; ++iParam) {\n        params[iParam] = arguments[iParam];\n      }\n    }\n\n    let eventList = this.utils.isArray(events) && events || events.split(' ');\n    for(let iEvent = 0, event, evCount = eventList.length; iEvent < evCount; iEvent++) {\n      if (ar = this.__events && this.__events[params[0] = event = eventList[iEvent]]) {\n        for(let i = 0, count = ar.length; i < count;) {\n          ar[i].apply(this, params);\n          // If the handler being notified still in the array, go to next array elt\n          if (count == ar.length) {\n            ++i;\n          }\n          else {\n            // If the handler was removed during notification (see one method), next element is at same index\n            count = ar.length;\n          }\n        }\n      }\n    }\n  }\n}\n\nclass ErrorHandler extends Component {\n  constructor(config) {\n    super(null, config);\n    this.config = config;\n  }\n\n  addError(err) {}\n\n  hasErrors() {\n    return false;\n  }\n\n  clear() {\n  }\n\n  showError(err) {\n\n  }\n\n  getErrors() { return []; }\n\n  createErrorNode(err) {\n    let node = document.createElement('div');\n    node.className = 'gantt_error';\n    return node;\n  }\n\n  removeGroup(node) {}\n}\n\n/**\n *\n * <br>Emmits events: <ul>\n *   <li>Gantt.events.TIME_LINE_INIT</li>\n *   <li>Gantt.events.TIME_LINE_RANGE_CHANGE</li>\n *   <li>Gantt.events.TIME_LINE_RANGE_CHANGED</li>\n *   <li>Gantt.events.TIME_LINE_PAN_MOVED</li>\n *   <li>Gantt.events.TIME_LINE_SIZE_CHANGED</li>\n * </ul>\n */\nclass TimeLine extends Component {\n  constructor(gantt, node, config) {\n    super(gantt, config);\n    this.node = node;\n  }\n\n  setTimeWindow(start, end) {\n  }\n\n  getTimeAxisHeight() {\n    return 0;\n  }\n\n  draw() {}\n\n  validateZoomFactor(zoomFactor) {}\n\n  getXFromMillis(time) {}\n\n  getDecorationContainer() {}\n\n  /**\n   * Returns the current time horizon, an object with two start and end time properties, time given in milliseconds\n   */\n  getHorizon() {}\n\n  getScrollableHorizon() {}\n\n  setVisibleTimeWindow(window) {}\n\n  resetZoom() {}\n\n  /**\n   * Markers\n   */\n  addTimeMarker(id, time, classes) {}\n\n  removeTimeMarker(id) {}\n\n  setTimeLineItem(id, item) {}\n\n  addTimeLineItem(id, item) {}\n\n  removeTimeLineItem(id) {}\n}\n\nclass TimeTable extends Component {\n  constructor(gantt, node, config) {\n    super(gantt, config);\n    this.node = node;\n    this.setConfiguration(config);\n  }\n  setConfiguration(config) {}\n\n  draw() {}\n\n  createUpdates(parent) { return new (Gantt.components.GanttUpdates.impl || Gantt.components.GanttUpdates)(parent); }\n\n  highlightRow(row, highlight, deselectAll){}\n\n  getDisplayedActivitiesTimeRange() {}\n\n  searchActivities(row, callback) {}\n\n  setConstraints(constraints) {}\n\n  update() {}\n\n  scrollToRow(row) {}\n\n  scrollToY(y) {}\n\n  setScrollTop(y) {}\n\n  setFirstVisibleRow(row) {}\n\n  getScrollLeft() {}\n  setScrollLeft(x) {}\n\n  /**\n   * Returns the component responsible for scrolling the time table.\n   */\n  getScroller() {}\n  getVisibleWidth() {}\n  getVisibleHeight() {}\n\n  // Called to adjust the time table body width according to the time line width\n  setBodyWidth(w) {}\n  getBodyWidth() {}\n\n  // Called to adjust the height of the time  table body according to the height of the gantt table\n  setBodyHeight(h) {}\n  getBodyHeight() {}\n\n  // To perfectly horizontally align the time line and the time table, we need to apply a right margin\n  // to the time line corresponding to the width of the vertical scroller in the time table, if any.\n  getRightMargin() {}\n\n  // The time line bottom must stops where the horizontal scrollbar of the time table starts.\n  // The getBottomMargin returns the height of this scrollbar.\n  getBottomMargin() {}\n}\n\n/**\n *\n * <br>Emmits events: <ul>\n *   <li>Gantt.events.TABLE_INIT</li>\n *   <li>Gantt.events.ROWS_ADDED</li>\n *   <li>Gantt.events.ROWS_REMOVED</li>\n *   <li>Gantt.events.ROWS_MODIFIED</li>\n *   <li>Gantt.events.ROWS_FILTERED</li>\n * </ul>\n */\nclass TreeTable extends Component {\n  constructor(gantt, node, config) {\n    super(gantt, config);\n    this.node = node;\n  }\n\n  setRows(rows) {}\n\n  getRowCount() { return 0; }\n\n  isRowVisible(param) {}\n\n  deleteDrawCache() {}\n\n  draw() {}\n\n  createUpdates(parent) { return new (Gantt.components.GanttUpdates.impl || Gantt.components.GanttUpdates)(parent); }\n\n  highlightRow(row, highlight, deselectAll) {}\n\n  setRowFilter(filter) {}\n\n  filterChanged() {}\n\n  isRowFiltered(row) { return false; }\n\n  toggleCollapseRow(param, collapse) {}\n\n  setHeaderHeight(height) {}\n\n  getTableBody() {}\n\n  getScrollableTable() {}\n\n  getTop(tr) {\n    return tr && (tr.offsetTop - this.getTableBody().offsetTop) || 0;\n  }\n\n  getRowAt(y) {}\n\n  getHeight() {}\n\n  nextRow(row) { return null; }\n\n  getRow(id) { return null; }\n\n  getRowName(row) { return row.name; }\n\n  getRowTop(row) {\n    return row.tr && (row.tr.offsetTop - this.getTableBody().offsetTop) || 0;\n  }\n\n  expandParents(row) {}\n}\n\nTreeTable.defaultClass = '';\n\nclass GanttModel extends Component {\n  constructor(gantt, config) {\n    super(gantt, config);\n    if (config) {\n      this.setConfiguration(config);\n    }\n  }\n\n  setConfiguration(config) {\n\n  }\n}\n\n/**\n *\n * <br>Emmits events: <ul>\n *   <li>Gantt.events.TABLE_INIT</li>\n *   <li>Gantt.events.ROWS_ADDED</li>\n *   <li>Gantt.events.ROWS_REMOVED</li>\n *   <li>Gantt.events.ROWS_MODIFIED</li>\n *   <li>Gantt.events.ROWS_FILTERED</li>\n * </ul>\n */\nclass GanttPanel extends Component {\n  constructor(node, config) {\n    super(node, config);\n    this.node = node;\n    this.events = Gantt.events;\n    this.constraintTypes = Gantt.constraintTypes;\n  }\n\n  setConfiguration(config) {}\n\n  draw() {}\n\n  startUpdating() {}\n\n  stopUpdating() {}\n\n  getModel() {}\n\n  getRowCount() { return 0; }\n\n  getRow(param) { return null; }\n\n  getVisiibleRows() { return []; }\n\n  ensureRowVisible(param) {}\n\n  isRowVisible(param) {}\n\n  getFirstVisibleRow() {}\n\n  setFirstVisibleRow(row) {}\n\n  isRowFiltered(param) {}\n\n  toggleCollapseRow(param, collapse) {}\n\n  scrollToY(y) {}\n\n  getRowActivities(param) {}\n\n  resetZoom() {}\n\n  zoomIn(evt) {}\n\n  zoomOut(evt) {}\n\n  zoom(zoomFactor, evt) {}\n\n  fitToContent() {}\n\n  getVisibleHeight() { return 0; }\n\n  /*                        */\n  /*    Search and filter   */\n  /*                        */\n  addFilter(rowFilter, rows, activities) {}\n\n  addFilter(rowFilter, filterTasks) {}\n\n  removeFilter(key, preventNotify) {}\n\n  search(text, rows, activities) {}\n\n  setHideEmptyRows(hide, preventNotify) {}\n\n\n  /*                        */\n  /*          Utils         */\n  /*                        */\n}\n\nclass Filter {\n  constructor(options){}\n}\n\nclass Renderer {\n  constructor(config, proto, paletteHandler) {\n    if (proto) {\n      Gantt.utils.mergeObjects(this, proto);\n    }\n    this.config = config;\n    this.paletteHandler = paletteHandler;\n    this.setConfiguration(config);\n  }\n\n  setConfiguration(config) {\n  }\n}\n\nclass ActivityLayout {\n  constructor(config) {\n  }\n\n  layout(row){}\n\n  allowVariableRowHeight() { return false; }\n}\n\nGantt.ObjectTypes = {\n  Activity : 2,\n  Resource : 4,\n  Row : 1,\n  Constraint : 8,\n  Reservation : 16\n};\n\nclass SelectionHandler extends Component {\n  constructor(config, proto) {\n    super(null, config);\n    this.selections = [];\n    this.selectionType = null;\n    if (proto) {\n      Gantt.utils.mergeObjects(this, proto);\n    }\n    this.setConfiguration(config);\n  }\n\n  setConfiguration(config) {\n  }\n\n  getObjectType(obj) {\n\n  }\n\n  select(obj, clear, notActive) {\n  }\n\n  clearSelection() {\n    this.selections = [];\n  }\n\n  isSelected(obj) {\n    return this.selections.indexOf(obj) >= 0;\n  }\n\n  processClick(e, obj) {}\n\n  destroy() {\n    this.selections = [];\n  }\n}\n\nclass LayoutSynchronizer extends Component {\n  constructor(config, proto) {\n    super(null, config);\n    if (proto) {\n      Gantt.utils.mergeObjects(this, proto || config);\n    }\n    this.setConfiguration(config);\n  }\n\n  setConfiguration(config) {}\n\n  connect(gantt) {}\n\n  disconnect() {\n  }\n\n  destroy() {\n    this.disconnect();\n  }\n}\n\n\nclass Palette {\n  constructor(config){}\n  getColors(count) {}\n}\n\nGantt.defaultPaletteName = null;\nGantt.defaultPalettes = {};\n\nclass GanttUpdates {\n  constructor(parent) {\n    this.parent = parent;\n  }\n\n  addUpdate(update) {}\n\n  removeUpdate(update) {}\n\n  reload() { this._reload = true; }\n  isReload() { return false; }\n  destroy() {}\n  startUpdating() {}\n  stopUpdating() {}\n}\n\nclass Toolbar extends Component {\n  constructor(gantt, node, config) {\n    super(gantt, config);\n    this.node = node;\n    this.setConfiguration(config, node);\n  }\n\n  setConfiguration(config, node) {\n    this.config = config;\n  }\n\n  connect(gantt) {}\n\n  ganttLoaded(gantt, rows) {\n\n  }\n\n  onInitialized() {}\n\n  destroy() {\n\n  }\n}\n\nToolbar.createTitle = function(title) {\n    const node = document.createElement('div');\n    node.innerHTML = title;\n    node.className = 'toolbar-title';\n    return node;\n};\n\nclass Button extends Component {\n  constructor(gantt, config) {\n    super(gantt, config);\n    this.callbacks = [];\n    this.setConfiguration(config);\n  }\n\n  setConfiguration(config) {\n    const btn = document.createElement('div');\n    if (config.id) {\n      btn.id = config.id;\n    }\n    btn.className = 'toolbar-button g-hoverable g-selectable' + (config.classes? (' ' + config.classes) : '');\n    if (config.icon) {\n      const img = document.createElement('img');\n      img.src = config.icon;\n      img.alt = '';\n      btn.appendChild(img);\n    }\n    if (config.fontIcon) {\n      const fontIcon = document.createElement('i');\n      fontIcon.className = config.fontIcon + (config.text? ' fa-fw' : '');\n      btn.appendChild(fontIcon);\n    }\n    if (config.text) {\n      btn.appendChild(document.createTextNode(config.text));\n    }\n    this.node = btn;\n    this.node.onclick = (e)=> {\n      this.clicked(e);\n      this.callbacks.map((cb) => {\n        cb({ gantt : this.gantt, event : e });\n      });\n    };\n    if (config.onclick) {\n      this.onclick(config.onclick);\n    }\n    return btn;\n  }\n\n  onclick(callback) {\n    this.callbacks.push(callback);\n  }\n\n  clicked(e) {\n\n  }\n\n  setId(id) {\n    this.node.id = id;\n  }\n\n  update() {\n  }\n\n  setSelected(selected) {\n    Gantt.utils.toggleClass(this.node, 'selected', selected);\n  }\n}\n\nclass CheckBox extends Component {\n  constructor(gantt, config) {\n    super(gantt, config);\n    this.setConfiguration(config);\n  }\n\n  setConfiguration(config) {\n    const ctnr = this.node = document.createElement('div');\n    ctnr.style.whiteSpace = 'nowrap';\n    const input = this.inputNode = document.createElement('input');\n    input.setAttribute('type', 'checkbox');\n    input.setAttribute('value', 'None');\n    input.className = 'g-selectable g-hoverable';\n    if (config.id) {\n      input.id = id;\n    }\n    if (config.classes) {\n      ctnr.className = config.classes;\n    }\n    ctnr.appendChild(input);\n    const label = document.createElement('label');\n    if (config.id) {\n      label.setAttribute('for', config.id);\n    }\n    if (config.icon) {\n      const img = document.createElement('img');\n      img.src = config.icon;\n      img.alt = '';\n      label.appendChild(img);\n    }\n    if (config.text) {\n      label.appendChild(document.createTextNode(config.text));\n    }\n    if (config.onclick) {\n      this.onclick(config.onclick);\n    }\n    ctnr.appendChild(label);\n    return ctnr;\n  }\n\n  setChecked(checked) {\n    this.inputNode.checked = checked;\n  }\n\n  onclick(callback) {\n    this.inputNode.onclick = (e) => {\n      callback(this.inputNode.checked, { gantt : this.gantt, event : e });\n    }\n  }\n  \n  update() {\n  }\n\n  setId(id) {\n    this.inputNode.id = id;\n  }\n}\n\nCheckBox.defaultClass = null;\n\nclass Toggle extends Component {\n    constructor(gantt, config) {\n        super(gantt, config);\n        this.setConfiguration(config);\n    }\n\n    setConfiguration(config) {\n      this.callbacks = [];\n        const ctnr = this._node = document.createElement('div');\n        this._isSel = config.isSelected && config.isSelected(this.gantt);\n        this.btnUnselected = new (Gantt.components.Button.impl || Gantt.components.Button)(this.gantt, config.unselected);\n        this.btnSelected = new (Gantt.components.Button.impl || Gantt.components.Button)(this.gantt, config.selected);\n        ctnr.appendChild(this._isSel? this.btnSelected.node : this.btnUnselected.node);\n        if (config.id) {\n            ctnr.id = id;\n        }\n        const onclick = (e)=> {\n          this._isSel = !this._isSel;\n          this.updateButtons(this._isSel);\n          this.callbacks.forEach((c) => {\n              c(this._isSel, { gantt : this.gantt, event : e });\n          });\n        };\n        this.btnUnselected.node.onclick = this.btnSelected.node.onclick = onclick;\n        if (config.onclick) {\n          this.onclick(config.onclick);\n        }\n        return ctnr;\n    }\n\n    isSelected() {\n      return this._isSel;\n    }\n\n    setSelected(selected) {\n        this._isSel = selected;\n        this.updateButtons(selected);\n    }\n\n    get node() {\n      return this._node;\n    }\n\n    set node(node) {\n      this._node = node;\n    }\n\n    onclick(callback) {\n      this.callbacks.push(callback);\n    }\n\n    update() {\n        this.updateButtons(this.config.isSelected? (this._isSel = this.config.isSelected(this.gantt)) : this._isSel);\n    }\n\n    updateButtons(isSel) {\n        if (this.btnSelected.node.parentNode) {\n            if (!isSel) this._node.replaceChild(this.btnUnselected.node, this.btnSelected.node);\n        }\n        else if (this.btnUnselected.node.parentNode) {\n            this._node.replaceChild(this.btnSelected.node, this.btnUnselected.node);\n        }\n    }\n}\n\nToggle.defaultClass = null;\n\nclass  DropDownList  extends Component {\n  constructor(gantt, config) {\n    super(gantt, config);\n    this.setConfiguration(config);\n  }\n\n  setConfiguration(config) {\n    let node = this.node = document.createElement('div');\n    let defaultClass = DropDownList.defaultClass;\n    if (defaultClass) {\n      node.className = defaultClass;\n    }\n    if (config.classes) {\n        Gantt.utils.addClass(node, config.classes);\n    }\n    if (config.text || config.icon || config.fontIcon) {\n      const labelNode = document.createElement('div');\n      labelNode.className = 'label';\n      if (config.icon) {\n        const img = document.createElement('img');\n        img.src = config.icon;\n        img.alt = '';\n        labelNode.appendChild(img);\n      }\n      if (config.fontIcon) {\n        const fontIcon = document.createElement('i');\n        fontIcon.className = config.fontIcon + (config.text? ' fa-fw' : '');\n        labelNode.appendChild(fontIcon);\n      }\n      if (config.text) {\n        labelNode.appendChild(document.createTextNode(config.text));\n      }\n      node.appendChild(labelNode);\n    }\n    const select = this.selectNode = document.createElement('select');\n    select.className = 'g-hoverable';\n    for(let i = 0, count = config.options.length, opt, optNode; i < count; i++) {\n      opt = config.options[i];\n      optNode = document.createElement('option');\n      optNode.text = opt.text;\n      optNode.value = opt.value;\n      select.appendChild(optNode);\n    }\n    node.appendChild(select);\n    if (config.onchange) {\n      this.onchange(config.onchange);\n    }\n    return node;\n  }\n\n  select(value) {\n    this.selectNode.value = value;\n  }\n  \n  onchange(callback) {\n    this.selectNode.onchange = (e)=> {\n      callback(this.selectNode.value, { gantt : this.gantt, event : e });\n    };\n  }\n\n  update() {\n  }\n\n  setId(id) {\n    this.selectNode.id = id;\n  }\n}\n\nDropDownList.defaultClass = 'dropdown-list';\n\nclass Input  extends Component {\n  constructor(gantt, config) {\n    super(gantt, config);\n    this.setConfiguration(config);\n  }\n\n  setConfiguration(config) {\n    let node = this.node = document.createElement('div');\n    if (Input.defaultClass) {\n        node.className = Input.defaultClass;\n    }\n    if (config.classes) {\n      Gantt.utils.addClass(node, config.classes);\n    }\n    node.style.display = 'flex';\n    node.style.flexDirection = 'row';\n    node.style.alignItems = 'center';\n    \n    if (config.text || config.icon || config.fontIcon || (config.type === 'search')) {\n      const labelNode = document.createElement('div');\n      labelNode.className = 'label';\n      labelNode.style.display = 'inline-block';\n      if (config.icon) {\n        const img = document.createElement('img');\n        img.src = config.icon;\n        img.alt = '';\n        labelNode.appendChild(img);\n      }\n      if (config.fontIcon) {\n        const fontIcon = document.createElement('i');\n        fontIcon.className = config.fontIcon + (config.text? ' fa-fw' : '');\n        fontIcon.setAttribute('aria-disabled', true);\n        labelNode.appendChild(fontIcon);\n      }\n      else if (config.type === 'search') {\n        const fontIcon = document.createElement('i');\n        fontIcon.setAttribute('aria-disabled', true);\n        fontIcon.className = 'fa fa-search fa-lg' + (config.text? ' fa-fw' : '');\n        labelNode.appendChild(fontIcon);\n      }\n      if (config.text) {\n        labelNode.appendChild(document.createTextNode(config.text));\n      }\n      node.appendChild(labelNode);\n    }\n    const input = this.inputNode = document.createElement('input');\n    node.appendChild(input);\n\n    const deleteBtn = document.createElement('div');\n    deleteBtn.className = 'delete-button';\n    deleteBtn.display = 'inline-block';\n    const deleteIcon = document.createElement('i');\n    deleteIcon.className = 'fa fa-times fa-lg';\n    deleteBtn.appendChild(deleteIcon);\n    node.appendChild(deleteBtn);\n    deleteBtn.onclick = ()=> {\n      input.value = '';\n      if (\"createEvent\" in document) {\n        var evt = document.createEvent(\"HTMLEvents\");\n        evt.initEvent(\"change\", false, true);\n        input.dispatchEvent(evt);\n      }\n      else\n        input.fireEvent(\"onchange\");\n    };\n\n    if (config.onchange) {\n      this.onchange(config.onchange);\n    }\n    return node;\n  }\n\n  setText(value) {\n    this.input.value = value;\n  }\n\n  onchange(userCallback) {\n    const callback = (e)=> {\n      userCallback(this.inputNode.value, { gantt : this.gantt, event : e });\n    };\n    this.inputNode.onchange = callback;\n    this.inputNode.onkeyup = callback;\n  }\n\n  setId(id) {\n    this.inputNode.id = id;\n  }\n}\n\nInput.defaultClass = 'input-box';\n\nclass ButtonGroup extends Component {\n  constructor(gantt, config) {\n    super(gantt, config);\n    this.selected = null;\n    this.callbacks = [];\n    this.setConfiguration(config);\n  }\n\n  setConfiguration(config) {\n    let node = this.node = document.createElement('div');\n    if (config.classes) {\n      node.className = config.classes;\n    }\n    this.buttons = [];\n    Gantt.utils.addClass(node, 'button-group');\n    node.style.display = 'flex';\n    node.style.flexDirection = 'row';\n    node.style.alignItems = 'center';\n\n    let self = this;\n    function installBtnClicked(button) {\n      button.clicked = ()=> {\n        self.setSelected(button);\n      }\n    }\n\n    this.value = null;\n    var cfgBtns = config.buttons;\n    for(var i = 0; i < cfgBtns.length; ++i) {\n      var btn = new (Gantt.components.Button.impl || Gantt.components.Button)(this.gantt, cfgBtns[i]);\n      this.buttons.push(btn);\n      installBtnClicked(btn);\n      if (cfgBtns[i].selected) {\n        this.selected = btn;\n        btn.setSelected(true);\n        this.value = btn.value;\n      }\n      btn.value = cfgBtns[i].value;\n      node.appendChild(btn.node);\n    }\n    if (config.onchange) {\n      this.onchange(config.onchange);\n    }\n    if (config.value !== undefined) {\n      this.setValue(config.value);\n    }\n    return node;\n  }\n\n  setValue(value, noNotify) {\n    for(var i = 0; i < this.buttons.length; i++) {\n      if (this.buttons[i].value === value) {\n        this.setSelected(this.buttons[i], noNotify);\n        break;\n      }\n    }\n  }\n\n  getValue() {\n    return this.value;\n  }\n\n  setSelected(btn, noNotify) {\n    if (this.selected !== btn) {\n      if (this.selected) {\n        this.selected.setSelected(false);\n      }\n      this.selected = btn;\n      if (btn) {\n        this.value = btn.value;\n        btn.setSelected(true);\n      }\n      else {\n        this.value = null;\n      }\n      if (!noNotify) {\n        this.callbacks.map((cb) => {\n          cb(this.value);\n        });\n      }\n    }\n  }\n\n  onchange(userCallback) {\n    this.callbacks.push(userCallback);\n  }\n\n  setId(id) {\n    this.inputNode.id = id;\n  }\n}\n\nclass LoadResourceChart extends Component {\n  constructor(gantt, node, config) {\n    super(gantt, node, config);\n    this.node = node;\n    this.setConfiguration(config);\n  }\n\n  setConfiguration(config) {}\n}\n\nclass ConstraintsGraph extends Component {\n  constructor(gantt, node, config) {\n    super(gantt, node, config);\n    this.node = node;\n    this.setConfiguration(config);\n  }\n\n  setConfiguration(config) {}\n  setConstraints(cts) {}\n  setNode(node) {}\n}\n\nclass ConstraintLayout extends Component {\n  constructor(gantt, config) {\n    super(gantt, null, config);\n    this.setConfiguration(config);\n  }\n\n  setConfiguration(config){}\n  startInitialize() {}\n  addNode(node){}\n  addConstraint(nodeFrom, nodeTo, cons) {}\n  stopInitialize() {}\n  forEachLink(node, cb) {}\n  layoutNode(node) {}\n  layoutRowNodeLinks(rowIndex){}\n  drawRowLinks(rowIndex, parentElt, renderer, ctx){}\n}\n\nGantt.components = {\n  Component : Component,\n  GanttPanel : GanttPanel,\n  GanttModel : GanttModel,\n  TreeTable : TreeTable,\n  TimeLine : TimeLine,\n  TimeTable : TimeTable,\n  Split : Split,\n  Tooltip : Tooltip,\n  Filter : Filter,\n  DataFetcher : DataFetcher,\n  ErrorHandler : ErrorHandler,\n  Renderer : Renderer,\n  ActivityLayout : ActivityLayout,\n  SelectionHandler : SelectionHandler,\n  LayoutSynchronizer : LayoutSynchronizer,\n  GanttUpdates : GanttUpdates,\n  Palette : Palette,\n  Toolbar : Toolbar,\n  Button : Button,\n  CheckBox : CheckBox,\n  Toggle : Toggle,\n  DropDownList : DropDownList,\n  Input : Input,\n  ButtonGroup : ButtonGroup,\n  LoadResourceChart : LoadResourceChart,\n  ConstraintsGraph : ConstraintsGraph,\n  ConstraintLayout : ConstraintLayout\n};\n\nGantt.envReady = function() {\n  return Promise.resolve(true);\n};\n\nif (module.hot) {\n    module.hot.accept();\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/core.js","'use strict';\n\nimport Gantt from './core';\n\nGantt.plugins = {\n  plugins: [],\n\n  /**\n   * Registers the list of specified plugins if not already registered.\n   * @param {Array|Object} plugins plugin instance(s).\n   */\n  register: function(plugins) {\n    for(var i = 0; i < arguments.length; i++) {\n      if (this.plugins.indexOf(arguments[i]) === -1) {\n        this.plugins.push(arguments[i]);\n      }\n    }\n  },\n\n  /**\n   * Unregisters the specified plugin if registered.\n   * @param {Array|Object} plugins plugin instance(s).\n   */\n  unregister: function(plugins) {\n    for(var i = 0, index; i < arguments.length; i++) {\n      if ((index = this.plugins.indexOf(arguments[i])) !== -1) {\n        this.plugins.splice(index, 1);\n      }\n    }\n  },\n\n  /**\n   * Remove all registered plugins.\n   * @see #register\n   */\n  clear: function() {\n    this.plugins = [];\n  },\n\n  /**\n   * Returns the number of registered plugins.\n   * @returns {Number}\n   */\n  count: function() {\n    return this.plugins.length;\n  },\n\n  /**\n   * Returns all registered plugin instances.\n   * @returns {Array} array of plugins.\n   */\n  getAll: function() {\n    return this.plugins;\n  },\n\n  /**\n   * Calls the registermed plugins on the specified method, with the provided args. This\n   * method immediately returns as soon as a plugin returns a value. The\n   * returned value can be used, for instance, to interrupt the current action.\n   * @param {String|Boolean} method boolean to indicate the plugin call order of the name of the plugin method to call.\n   * @param {...Object} args list to apply to the method call.\n   * @returns {Object} the value false if any of the plugins return false, otherwise returns true.\n   */\n  call: function(method, ...args) {\n    let paramsStart, reverse;\n    if (typeof method !== 'string') {\n      reverse = method;\n      method = arguments[1];\n      paramsStart = 2;\n    }\n    else {\n      paramsStart = 1;\n    }\n    let params = Array.prototype.slice.call(arguments, paramsStart);\n    for (let i = reverse? (this.plugins.length - 1) : 0, inc = reverse? -1 : 1,\n                end = reverse? -1 : this.plugins.length,result; i != end; i+= inc) {\n      let plugin = this.plugins[i];\n      if (typeof plugin[method] === 'function') {\n        if ((result = plugin[method].apply(plugin, params)) !== undefined) {\n          return result;\n        }\n      }\n    }\n  }\n};\n\n/**\n * Plugin extension methods.\n * @interface Gantt.PluginBase\n */\nexport default class Plugin {\n  // Called at start of Gantt init\n  beforeInit() {}\n\n  // Called at end of Gantt init\n  afterInit() {}\n\n  // Called at start of update\n  beforeUpdate() {}\n\n  // Called at end of update\n  afterUpdate() {}\n\n  // Called at start of draw\n  beforeDraw() {}\n\n  // Called at end of draw\n  afterDraw() {}\n\n  // Called during destroy\n  destroy() {}\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/plugins.js","'use strict';\n\nimport Gantt from './core';\n\nfunction updateTimeWindow(wnd, activity) {\n  if (activity.start && (wnd.start > activity.start)) {\n    wnd.start = activity.start;\n  }\n  if (activity.end && (wnd.end < activity.end)) {\n    wnd.end = activity.end;\n  }\n  return activity;\n}\n\nconst ConstraintPrototype = {\n  isDisplayed : function() {\n    return this.nodes != null;\n  },\n\n  clearLink : function() {\n    this.nodes = null;\n  },\n\n  setNodes : function(nodes) {\n    this.nodes = nodes;\n  }\n};\n\nexport default class GanttModel extends Gantt.components.GanttModel {\n\n  constructor(gantt, config) {\n    super(gantt, config);\n  }\n\n  setConfiguration(config) {\n    this.destroy();\n    const ftchClass = Gantt.components.DataFetcher.impl || Gantt.components.DataFetcher;\n    let fetchConfig;\n    const checkFetcher = (fetcher, type) => {\n      if (!fetcher.get) {\n        throw new Error(\"Could not configure data for \" + type + \". Probably a configuration issue with key(s) \" + Object.keys(fetcher).join(','));\n      }\n    };\n    this.dateParser = null;\n    if (config.dateFormat) {\n      try {\n        this.dateParser = Gantt.utils.createDateParser(config.dateFormat);\n      }\n      catch (err) {\n        throw new Error(\"Could not process date format \" + config.dateFormat + \": \" + err);\n      }\n    }\n    const makeTimeFct = (fct) => {\n      if (this.dateParser) {\n        var final;\n        return (obj) => {\n          if (!final) {\n            var value = fct(obj);\n            if (Gantt.utils.isString(value)) {\n              final = (obj) => { return this.dateParser(fct(obj)); };\n              return this.dateParser(value);\n            }\n            else {\n              final = fct;\n              return value;\n            }\n          }\n          return final(obj);\n        };\n      }\n      return fct;\n    };\n\n    this.allFetcher = null;\n    if (fetchConfig = config.all) {\n      this.allFetcher = new ftchClass(fetchConfig, [ 'reader', 'resources', 'activities', 'reservations', 'constraints' ], { gantt : this.gantt });\n      checkFetcher(this.allFetcher, 'all');\n      this.allFetcher._reader = fetchConfig.reader && Gantt.utils.isFunction(fetchConfig.reader)\n            ? fetchConfig.reader\n            : function (data) { return fetchConfig.reader; };\n      this.allFetcher._resourcesGetter = fetchConfig.resources && Gantt.utils.propertyEvaluator(fetchConfig.resources);\n      this.allFetcher._activitiesGetter = fetchConfig.activities && Gantt.utils.propertyEvaluator(fetchConfig.activities);\n      this.allFetcher._reservationsGetter = fetchConfig.reservations && Gantt.utils.propertyEvaluator(fetchConfig.reservations);\n      this.allFetcher._constraintsGetter = fetchConfig.constraints && Gantt.utils.propertyEvaluator(fetchConfig.constraints);\n    }\n\n    this.resourceFetcher = null;\n    if (fetchConfig = config.resources) {\n      this.resourceFetcher = new ftchClass(fetchConfig, ['id', 'parent', 'name', 'activities'], { gantt : this.gantt });\n      checkFetcher(this.resourceFetcher, 'resources');\n      if (fetchConfig.parent) {\n        this.resourceFetcher._parentIdGetter = Gantt.utils.propertyEvaluator(fetchConfig.parent || 'parentId');\n      }\n      this.resourceFetcher._idGetter = Gantt.utils.propertyEvaluator(fetchConfig.id || 'id');\n      this.resourceFetcher._nameGetter = fetchConfig.name && Gantt.utils.propertyEvaluator(fetchConfig.name) || this.resourceFetcher._idGetter;\n      if (fetchConfig.activities) {\n        this.resourceFetcher._activityGetter = Gantt.utils.propertyEvaluator(fetchConfig.activities);\n      }\n    }\n\n    if (fetchConfig = config.activities) {\n      // Do no not create an activity getter if activities are provided along with the resources\n      this.activityFetcher = this.resourceFetcher && this.resourceFetcher._activityGetter && {}\n          || new ftchClass(fetchConfig, ['id', 'parent', 'name', 'start', 'end', 'resource'], { gantt : this.gantt });\n      if (!this.resourceFetcher || !this.resourceFetcher._activityGetter) {\n        checkFetcher(this.activityFetcher, 'activities');\n      }\n      if (fetchConfig.parent) {\n        this.activityFetcher._parentIdGetter = Gantt.utils.propertyEvaluator(fetchConfig.parent || 'parentId');\n      }\n      this.activityFetcher._idGetter = Gantt.utils.propertyEvaluator(fetchConfig.id || 'id');\n      this.activityFetcher._nameGetter = fetchConfig.name && Gantt.utils.propertyEvaluator(fetchConfig.name) || this.activityFetcher._idGetter;\n      this.activityFetcher._startGetter = makeTimeFct(Gantt.utils.propertyEvaluator(fetchConfig.start || 'start'));\n      this.activityFetcher._endGetter = makeTimeFct(Gantt.utils.propertyEvaluator(fetchConfig.end || 'end'));\n      if (fetchConfig.resource) {\n        this.activityFetcher._resourceIdGetter = Gantt.utils.propertyEvaluator(fetchConfig.resource);\n      }\n    }\n\n    if (fetchConfig = config.reservations) {\n      this.reservationFetcher = new ftchClass(fetchConfig, [ 'activity', 'resource' ], { gantt : this.gantt });\n      checkFetcher(this.reservationFetcher, 'reservations');\n      //noinspection JSUnresolvedVariable\n      this.reservationFetcher._activityGetter = Gantt.utils.propertyEvaluator(fetchConfig.activity || 'activity');\n      this.reservationFetcher._resourceGetter = Gantt.utils.propertyEvaluator(fetchConfig.resource || 'resource');\n    }\n\n    if (fetchConfig = config.constraints) {\n      this.constraintFetcher = new ftchClass(fetchConfig, [ 'from', 'to', 'type' ], { gantt : this.gantt });\n      checkFetcher(this.constraintFetcher, 'constraints');\n      this.constraintFetcher._fromGetter = Gantt.utils.propertyEvaluator(fetchConfig.from || 'from');\n      //noinspection JSUnresolvedVariable\n      this.constraintFetcher._toGetter = Gantt.utils.propertyEvaluator(fetchConfig.to || 'to');\n      this.constraintFetcher._typeGetter = Gantt.utils.propertyEvaluator(fetchConfig.type || 'type');\n      this.constraintFetcher._idGetter = fetchConfig.id && Gantt.utils.propertyEvaluator(fetchConfig.id) || null;\n    }\n\n    if (fetchConfig = config.timeWindow) {\n      this.timeWindowFetcher = new ftchClass(fetchConfig, null, { gantt : this.gantt });\n      checkFetcher(this.timeWindowFetcher, 'timeWindow');\n      this.timeWindowFetcher._startGetter = makeTimeFct(Gantt.utils.propertyEvaluator(fetchConfig.start || 'start'));\n      this.timeWindowFetcher._endGetter = makeTimeFct(Gantt.utils.propertyEvaluator(fetchConfig.end || 'end'));\n    }\n  }\n\n  load(config) {\n    if (config) {\n      this.destroy();\n      this.setConfiguration(config);\n    }\n\n    this.allData = null;\n    if (this.allFetcher) {\n      return this.allFetcher.get().then((data)=> {\n        return this.loadFromData(data);\n      });\n    }\n    return this.loadFromData();\n  }\n\n  loadFromData(data /* May be null */) {\n    let actPromise, resaPromise, resourcePromise, consPromise;\n    this.activities = [];\n    this.activities.byIds = {};\n    this.rows = [];\n    this.constraints = [];\n    this.constraints.byIds = {};\n    this.resources = [];\n    this.resources.byIds = {};\n    this.reservations = [];\n    this.reservations.byIds = {};\n    this.timeWindow = null;\n    this.flat = true;\n\n    let wnd, wndPromise;\n    if (this.timeWindowFetcher) {\n      wndPromise = this.timeWindowFetcher.get(data).then(obj => {\n        return {\n          start: this.timeWindowFetcher._startGetter(obj),\n          end: this.timeWindowFetcher._endGetter(obj)\n        }\n      });\n    }\n    else {\n      // If time window not provided with a specified data fetcher, we compute it.\n      wnd = { start : Number.MAX_VALUE, end : 0 } || null;\n    }\n\n    const resourceGantt = this.gantt.isResourceGantt();\n    if (!this.resourceFetcher && !this.activityFetcher) {\n      if (resourceGantt) resourcePromise = Promise.resolve([]);\n      else actPromise = Promise.resolve([]);\n    }\n    else {\n      let timeWindowProcessed = !!wndPromise;\n      if (this.resourceFetcher) {\n        resourcePromise = this.resourceFetcher.get(data).then(resources => {\n          // Compute here the time window only if this is resource chart with activities provided along with resources\n          let computeTimeWindow = !timeWindowProcessed && (resourceGantt && this.resourceFetcher._activityGetter);\n          this.resources = this.createTreeNodes(resources, this.resourceFetcher, false, computeTimeWindow && wnd);\n          timeWindowProcessed = timeWindowProcessed || computeTimeWindow;\n          return this.resources;\n        });\n      }\n\n      if (this.activityFetcher && (!resourceGantt || !this.resourceFetcher || !this.resourceFetcher._activityGetter)) {\n        actPromise = this.activityFetcher.get(data).then(activities => {\n          // Compute here the time window only if a time window fetcher was not specified\n          this.activities = this.createTreeNodes(activities, this.activityFetcher, true, !timeWindowProcessed && wnd);\n          return this.activities;\n        });\n      }\n\n      if (this.reservationFetcher) {\n        resaPromise = this.reservationFetcher.get(data);\n      }\n\n      if (this.constraintFetcher) {\n        consPromise = this.constraintFetcher.get(data);\n      }\n    }\n\n    return Promise.all([resourcePromise, actPromise, resaPromise, consPromise, wndPromise]).then( ([resources, activities, resas, cons, wndResult]) => {\n      // If assigning activities to resources through a resource ID getter on activities\n      if (this.activityFetcher && this.activityFetcher._resourceIdGetter) {\n        this.createReservationsFromActivityResources(resourceGantt? this.resources.byIds : this.activities.byIds);\n      }\n      if (resas && resas.length) {\n        this.createReservations(resas);\n      }\n      if (cons && cons.length) {\n        this.createConstraints(cons);\n      }\n      wndResult = wndResult || wnd;\n      if (!wndResult.end && resourceGantt && activities && activities.length) {\n        // Gantt without reservations, process time window from unused activities\n        wndResult.start = activities[0].start;\n        wndResult.end = activities[0].end;\n        for(let i = activities.length - 1; i; i--) {\n          updateTimeWindow(wndResult, activities[i]);\n        }\n      }\n      if (wndResult.end) {\n        this.timeWindow = { start : wndResult.start, end : wndResult.end };\n        this.triggerEvent(Gantt.events.TIME_WINDOW_CHANGED, this.timeWindow);\n      }\n      return this.rows = resourceGantt? resources : activities;\n    });\n  }\n\n  createReservations(data) {\n    this.reservations = [];\n    this.reservations.byIds = {};\n    if (!data || data.length === 0) {\n      return;\n    }\n    const resByIds = this.resources.byIds;\n    const actByIds = this.activities.byIds;\n    const resIdGetter = this.reservationFetcher._resourceGetter;\n    const actIdGetter = this.reservationFetcher._activityGetter;\n    for (let i = 0, resId, res, actId, act, len = data.length, resa; i < len; ++i) {\n      resa = data[i];\n      resId = resIdGetter(resa);\n      if ((resId || (resId === 0)) && (res = resByIds[resId])) {\n        actId = actIdGetter(resa);\n        if ((actId || (actId === 0)) && (act = actByIds[actId])) {\n          (res.activities || (res.activities = [])).push(resa = this.createReservationNode(act, res));\n          this.reservations.push(resa);\n          if (resa.id) {\n            this.reservations.byIds[resa.id] = resa;\n          }\n        }\n        else if (actId) {\n          console.error('Cannot find activity \"' + actId + '\" for reservation ' + JSON.stringify(resa));\n        }\n        else {\n          console.error('No activity specified for reservation ' + JSON.stringify(resa));\n        }\n      }\n      else if (resId || (resId === 0)) {\n        console.error('Cannot find resource \"' + resId + '\" for reservation ' + JSON.stringify(resa));\n      }\n      else {\n        console.error('No resource specified for reservation ' + JSON.stringify(resa));\n      }\n    }\n  }\n\n  createReservationsFromActivityResources(rowByIds) {\n    const resGetter = this.activityFetcher._resourceIdGetter;\n    for(let i = 0, resId, res, len = this.activities.length, actNode; i < len; ++i) {\n      resId = resGetter((actNode = this.activities[i]).getData());\n      if (resId || (resId === 0)) {\n        if (res = rowByIds[resId]) {\n          (res.activities || (res.activities = [])).push(this.createReservationNode(actNode, res));\n        }\n        else {\n          console.error('Cannot find resource \"' + resId + '\" for activity ' + JSON.stringify(actNode.getData()));\n        }\n      }\n      else {\n        console.error('No resource specified for activity ' + JSON.stringify(actNode.getData()));\n      }\n    }\n  }\n\n  createConstraints(data) {\n    const len = data.length;\n    const consNodes = new Array(len);\n    consNodes.byIds = {};\n    for(let i = 0, node; i < len; ++i) {\n      consNodes[i] = node = this.createConstraintNode(data[i], this.activities, i);\n      consNodes.byIds[node.id] = node;\n    }\n    return this.constraints = consNodes;\n  }\n\n  isResourceGanttModel() {\n    return !!this.resourceFetcher;\n  }\n\n  isFlat() {\n    return this.flat;\n  }\n\n  createActivityNode(activity) {\n    const node = Object.create(activity);\n    node.id = this.activityFetcher._idGetter(activity);\n    node.name = this.activityFetcher._nameGetter(activity);\n    node.start = this.activityFetcher._startGetter(activity);\n    node.end = this.activityFetcher._endGetter(activity);\n    node.getData = function() { return activity; };\n    node.gantt = this.gantt;\n    node.getObjectType = function() { return Gantt.ObjectTypes.Activity; };\n    return node;\n  }\n\n  createReservationNode(activity, row) {\n    const node = Object.create(activity);\n    node.row = row;\n    node.gantt = this.gantt;\n    node.getObjectType = function() { return Gantt.ObjectTypes.Activity; }; // No reservation type as for now an activity acts as a reservation as the copy objects points to a row\n    return node;\n  }\n\n  createConstraintNode(cons, activities, index) {\n    let id = this.constraintFetcher._fromGetter(cons);\n    if (!id) {\n      throw \"No from activity specified for the constraint \" + JSON.stringify(cons);\n    }\n    const from = activities.byIds[id];\n    if (!from) {\n      throw \"No activity could be found with the ID \" + id + \"for constraint \" + JSON.stringify(cons);\n    }\n\n    id = this.constraintFetcher._toGetter(cons);\n    if (!id) {\n      throw \"No to activity specified for the constraint \" + JSON.stringify(cons);\n    }\n    const to = activities.byIds[id];\n    if (!to) {\n      throw \"No activity could be found with the ID \" + id + \"for constraint \" + JSON.stringify(cons);\n    }\n    const node = Object.create(cons, ConstraintPrototype);\n    node.from = from;\n    node.to = to;\n    node.type = this.constraintFetcher._typeGetter(cons);\n    node.gantt = this.gantt;\n    node.getData = function () { return cons; };\n    node.id = this.constraintFetcher._idGetter? this.constraintFetcher._idGetter(cons) : ('cons_' + index);\n    if (!from.consOuts) from.consOuts = [ node ];\n    else from.consOuts.push(node);\n    if (!to.consIns) to.consIns = [ node ];\n    else to.consIns.push(node);\n    node.getObjectType = function() { return Gantt.ObjectTypes.Constraint; }\n    return node;\n  }\n\n  createTreeNode(id, data) {\n    const row = Object.create(data);\n\n    row.id = id;\n    row.gantt = this.gantt;\n    row.getData = function() { return data; };\n    row.hasAncestor = function(node) {\n      for(var p = row.parent; p; p = p.parent){\n        if (p == node) {\n          return true;\n        }\n      }\n      return true;\n    };\n\n    row.getAncestorsCount = function() {\n      let count = 0;\n      for(let parent = row.parent; parent; parent = parent.parent ) {\n        count++;\n      }\n      return count;\n    };\n\n    row.setRowHeight = function(row, h) {};\n\n    row.isGanttRow = function() { return true; };\n    return row;\n  }\n\n  createTreeNodes(data, rowFetcher, isActivity, wnd) {\n    var result = new Array(data.length);\n    const byIds = result.byIds = {};\n    var children = {}, row, origData, parentId, arr;\n    var i, resultIndex, id, activities, iAct, len, roots = [];\n\n    let allActivities = this.activities, actNode, startGetter, endGetter, actsGetter, act;\n    if (isActivity || (actsGetter = rowFetcher._activityGetter)) {\n      startGetter = this.activityFetcher._startGetter;\n      endGetter = this.activityFetcher._endGetter;\n    }\n\n    /*function sortNodes(a, b) {\n      // Put child nodes with children first\n      const aChildren = children[a.id], bChildren = children[b.id];\n      return aChildren && aChildren.length\n          ? (bChildren && bChildren.length? 0 : -1) : (bChildren && bChildren.length? 1 : 0)\n    }*/\n\n    function addNode(node, parentNode) {\n      result[resultIndex++] = node;\n      node.parent = parentNode;\n      //const childNodes = children[node.id].sort(sortNodes);\n      const childNodes = children[node.id];\n      node.children = childNodes;\n      let childCount = childNodes.length;\n      for(let iChild = 0; iChild < childCount; ++iChild) {\n        addNode(childNodes[iChild], node);\n      }\n      if (isActivity && childCount && (!node.start || !node.end)) {\n        if (!node.start) {\n          node.start = childNodes[0].start;\n        }\n        if (!node.end) {\n          node.end = childNodes[0].end;\n        }\n        for(let iChild = 1; iChild < childCount; ++iChild) {\n          updateTimeWindow(node, childNodes[iChild]);\n        }\n      }\n      if (wnd && isActivity) {\n        updateTimeWindow(wnd, node);\n      }\n    }\n\n    const idGetter = rowFetcher._idGetter,\n        nameGetter = rowFetcher._nameGetter,\n        parentIdGetter = rowFetcher._parentIdGetter;\n\n    for(i = 0, len = data.length; i < len; ++i) {\n      origData = data[i];\n      parentId = parentIdGetter? parentIdGetter(origData) : null;\n      id = idGetter(origData);\n      row = this.createTreeNode(id, origData, children[id]);\n      if (!children[id]) {\n        children[id] = [];\n      }\n      if (nameGetter) {\n        row.name = nameGetter(origData);\n      }\n      if (isActivity) {\n        row.start = rowFetcher._startGetter(origData);\n        row.end = rowFetcher._endGetter(origData);\n        row.activities = [ row ];\n        row.getObjectType = function() { return Gantt.ObjectTypes.Activity; }\n      }\n      else {\n        row.getObjectType = function() { return Gantt.ObjectTypes.Resource; }\n      }\n\n      // Process the time window\n      if (wnd) {\n        if (!isActivity) {\n          activities = actsGetter(origData);\n          if (activities) {\n            row.activities = new Array(activities.length);\n            for(iAct = 0; iAct < activities.length; ++iAct) {\n              actNode = this.createActivityNode(act = activities[iAct]);\n              allActivities.push(actNode);\n              if (actNode.id) {\n                allActivities.byIds[actNode.id] = actNode;\n              }\n              row.activities[iAct] = this.createReservationNode(updateTimeWindow(wnd, actNode), row);\n            }\n          }\n          else {\n            row.activities = [];\n          }\n        }\n        else {\n          // We are defining an activity chart, rows are activities\n          updateTimeWindow(wnd, row);\n        }\n      }\n      byIds[id] = row;\n      if (parentId || (parentId === 0)) {\n        arr = children[parentId];\n        if (!arr) {\n          children[parentId] = [ row ];\n        }\n        else {\n          arr.push(row);\n        }\n      }\n      else {\n        roots.push(row);\n      }\n    }\n    if (this.gantt.isResourceGantt() !== isActivity) {\n      this.flat = roots.length === data.length;\n    }\n    for(i = 0, len = roots.length, resultIndex = 0; i < len; ++i) {\n      addNode(roots[i]);\n    }\n\n    return result;\n  }\n\n  destroy() {\n    if (this.allFetcher && this.allFetcher.destroy) {\n      this.allFetcher.destroy();\n    }\n    this.allFetcher = null;\n    if (this.resourceFetcher && this.resourceFetcher.destroy) {\n      this.resourceFetcher.destroy();\n    }\n    this.resourceFetcher = null;\n    this.resources = null;\n\n    if (this.activityFetcher && this.activityFetcher.destroy) {\n      this.activityFetcher.destroy();\n    }\n    this.activityFetcher = null;\n    this.activities = null;\n\n    if (this.reservationFetcher && this.reservationFetcher.destroy) {\n      this.reservationFetcher.destroy();\n    }\n    this.reservationFetcher = null;\n    this.reservations = null;\n\n    if (this.constraintFetcher && this.constraintFetcher.destroy) {\n      this.constraintFetcher.destroy();\n    }\n    this.constraintFetcher = null;\n    this.constraints = null;\n\n    if (this.timeWindowFetcher && this.timeWindowFetcher.destroy) {\n      this.timeWindowFetcher.destroy();\n    }\n    this.timeWindowFetcher = null;\n    this.timeWindow = null;\n  }\n\n  getActivity(param) {\n    if (Gantt.utils.isString(param)) {\n      return this.activities && this.activities.byIds[param];\n    }\n    else if (this.activities) {\n      for(let i = 0, count = this.activities.length; i < count; ++i) {\n        if (this.activities[i].getData() === param) {\n          return this.activities[i];\n        }\n      }\n    }\n    return null;\n  }\n}\n\nGantt.components.GanttModel = GanttModel;\n\n\n// WEBPACK FOOTER //\n// ./src/core/model.js","'use strict';\n\nimport Gantt from './core';\n\nconst START_SELECTION_METHOD = 'startSelection';\nconst STOP_SELECTION_METHOD = 'stopSelection';\nconst CLEAR_SELECTION_METHOD = 'clearSelection';\n\nconst SELECTION_CHANGED_EVENT = 'SelectionChanged';\nconst UNSELECT_EVENT = 'Unselected';\nconst SELECT_EVENT = 'Selected';\nconst CLEAR_SELECTION_EVENT = 'SelectionCleared';\nconst START_SELECTING = 'StartSelecting';\nconst STOP_SELECTING = 'StopSelecting';\n\nclass Type {\n    constructor(config) {\n        Gantt.utils.mergeObjects(this, config);\n        this[SELECTION_CHANGED_EVENT] = {\n            event : ()=> this.getSelectionChangedEvent(),\n            method: ()=> this.getSelectionChangedMethod()\n        };\n        this[SELECT_EVENT] = {\n            event : ()=> this.getSelectionEvent(),\n            method: ()=> this.getSelectionMethod()\n        };\n        this[UNSELECT_EVENT] = {\n            event : ()=> this.getUnselectionEvent(),\n            method: ()=> this.getUnselectionMethod()\n        };\n        this[CLEAR_SELECTION_EVENT] = {\n            event : ()=> this.getClearSelectionEvent(),\n            method: ()=> this.getClearSelectionMethod()\n        };\n    }\n\n    accept(obj) { return false; }\n\n    getTypeEvent(event) {\n        return this[event] && this[event].event();\n    }\n    getTypeMethod(method) { return this.name + method; }\n\n    notify(o, event, params) {\n        let m = this[event] && this[event].method();\n        if (m = o[m]) {\n            m.apply(o, params);\n        }\n    }\n\n    getClearSelectionEvent() { return this.name + CLEAR_SELECTION_EVENT; }\n    getClearSelectionMethod() {  return this.clearSelectionMethod || this.getTypeMethod(SELECT_EVENT); }\n\n    getSelectionEvent() { return this.name + SELECT_EVENT; }\n    getSelectionMethod() {  return this.selectionMethod || this.getTypeMethod(SELECT_EVENT); }\n\n    getUnselectionEvent() { return this.name + UNSELECT_EVENT; }\n    getUnselectionMethod() {  return this.unselectionMethod || this.getTypeMethod(UNSELECT_EVENT); }\n\n    getSelectionChangedEvent() { return this.name + SELECTION_CHANGED_EVENT; }\n    getSelectionChangedMethod() { return this.selectionChangedMethod || this.getTypeMethod(SELECTION_CHANGED_EVENT); }\n}\n\nexport default class SelectionHandler extends Gantt.components.SelectionHandler {\n    constructor(config, proto) {\n        super(config, proto);\n        this.lock = 0;\n        this.types = [];\n        this.genericType = new Type({ name : ''});\n        this.genericType[CLEAR_SELECTION_EVENT] = {\n            event: function() { return Gantt.events.SELECTION_CLEARED; },\n            method: function() { return CLEAR_SELECTION_METHOD; }\n        };\n        this.genericType[START_SELECTING] = {\n            event : function() { return Gantt.events.START_SELECTING; },\n            method: function() { return START_SELECTION_METHOD; }\n        };\n        this.genericType[STOP_SELECTING] = {\n            event : function() { return Gantt.events.STOP_SELECTING; },\n            method: function() { return STOP_SELECTION_METHOD; }\n        };\n    }\n\n    /**\n     * @return {string}\n     */\n    static get SELECTION_CHANGED_EVENT() {\n        return SELECTION_CHANGED_EVENT;\n    }\n\n    /**\n     * @return {string}\n     */\n    static get UNSELECT_EVENT() {\n        return UNSELECT_EVENT;\n    }\n\n    /**\n     * @return {string}\n     */\n    static get SELECT_EVENT() {\n        return SELECT_EVENT;\n    }\n\n    /**\n     * @return {string}\n     */\n    static get CLEAR_SELECTION_EVENT() {\n        return CLEAR_SELECTION_EVENT;\n    }\n\n    setConfiguration(config) {\n        this.config = config;\n        this.observers = [];\n        if (config) {\n            if (Gantt.utils.isArray(config)) {\n                for(let i = 0; i < config.length; i++) {\n                    this.addConfiguration(config[i]);\n                }\n            }\n            else {\n                this.addConfiguration(config);\n            }\n        } \n    }\n    \n    addConfiguration(config) {\n        this.addObserver(config);\n    }\n\n    select(obj, clear, notActive) {\n        if (obj) {\n            this.startSelecting();\n            const objType = this.getObjectType(obj), selTypeChanged = this.selectionType !== objType;\n            if (this.selections.length && (clear || selTypeChanged)) {\n                const oldType = this.selectionType;\n                this.clear();\n                if (selTypeChanged) {\n                    this.notify(oldType, SELECTION_CHANGED_EVENT, this.selections);\n                }\n            }\n            this.selectionType = objType;\n            if (notActive && this.selections.length) {\n                // Add the selections at the end of selections array so that the current active selection at\n                // position zero remains active\n                if (Gantt.utils.isArray(obj)) {\n                    for(let i = 0, count = obj.length; i < count; ++i) {\n                        this.setObjectSelected(obj[i], true);\n                    }\n                    this.selections = this.selections.concat(obj);\n                }\n                else {\n                    this.setObjectSelected(obj, true);\n                    this.selections.push(obj);\n                }\n            }\n            else if (Gantt.utils.isArray(obj)) {\n                for(let i = 0, count = obj.length; i < count; ++i) {\n                    this.setObjectSelected(obj[i], true);\n                }\n                this.selections = obj.concat(this.selections);\n            }\n            else {\n                // obj becomes the new active selection\n                this.setObjectSelected(obj, true);\n                this.selections.unshift(obj);\n            }\n            if (this.selections.length) {\n                this.notify(this.selectionType, SELECT_EVENT, this.selections, this.selections[0]);\n            }\n            this.stopSelecting();\n        }\n    }\n\n    unselect(obj) {\n        if (obj) {\n            let selecting = false;\n            const uns = Gantt.utils.isArray(obj) && obj || [obj], foundUns = [];\n            uns.map((o) => {\n                let index = this.selections.indexOf(obj);\n                if (index >= 0) {\n                    if (!selecting) {\n                        this.startSelecting();\n                        selecting = true;\n                    }\n                    this.selections.splice(index, 1);\n                    this.setObjectSelected(obj, false);\n                    foundUns.push(obj);\n                }\n            });\n            if (selecting) {\n                this.notify(this.selectionType, UNSELECT_EVENT, foundUns);\n                this.stopSelecting();\n            }\n        }\n    }\n\n    setObjectSelected(obj, selected) {\n    }\n\n    clear() {\n        if (this.selections.length) {\n            this.startSelecting();\n            const oldSelection = this.selections;\n            for(let i = 0, count = oldSelection && oldSelection.length || 0; i < count; ++i) {\n                this.setObjectSelected(oldSelection[i], false);\n            }\n            this.selections = [];\n            this.notify(this.selectionType, CLEAR_SELECTION_EVENT, oldSelection);\n            this.notify(this.genericType, CLEAR_SELECTION_EVENT, oldSelection);\n            this.stopSelecting();\n        }\n    }\n    \n    processClick(e, obj) {\n        if (obj) {\n            if (e.ctrlKey) {\n                // toggle object selection.\n                if (this.isSelected(obj)) {\n                    this.unselect(obj);\n                }\n                else {\n                    this.select(obj);\n                }\n            }\n            else {\n                if (!this.isSelected(obj)) {\n                    this.select(obj, !e.shiftKey);\n                }\n            }\n        }\n    }\n\n    getObjectType(obj) {\n        for(let i = 0, count = this.types.length; i < count; ++i) {\n            if (this.types[i].accept(obj)) return this.types[i];\n        }\n        return null;\n    }\n\n    startSelecting() {\n        if (++this.lock === 1) {\n            this.notify(this.genericType, START_SELECTING);\n        }\n    }\n\n    stopSelecting() {\n        if (!--this.lock) {\n            this.notify(this.genericType, STOP_SELECTING);\n            if (this.selectionType) {\n                this.notify(this.selectionType, SELECTION_CHANGED_EVENT,\n                    this.selections, this.selections.length? this.selections[0] : null);\n            }\n        }\n    }\n\n    //\n    // Notify selection observers\n    //\n    notify(type, event, ...params) {\n        const typeEvent = type.getTypeEvent(event);\n        if (typeEvent) {\n            this.triggerEvent(true /* Specify 3rd parameter is an array of parameters */, typeEvent, params);\n        }\n        for(let i = 0, o; i < this.observers.length; i++) {\n            o = this.observers[i];\n            type.notify(o, event, params);\n        }\n    }\n\n    /*notifyObserver(type, event, ...params) {\n        for(let i = 0, o, m; i < this.observers.length; i++) {\n            o = this.observers[i];\n            type.notify(o, event, params);\n        }\n    }*/\n\n    addObserver(o) {\n        this.observers.push(o);\n    }\n\n    removeObserver(o) {\n        const index = this.observers.indexOf(o);\n        if (index >= 0) {\n            this.observers.splice(index, 1);\n            return 0;\n        }\n        return null;\n    }\n\n    //\n    // Object types\n    //\n    registerType(type) {\n        type = new Type(type);\n        this.types.push(type);\n        return type;\n    }\n}\n\nGantt.components.SelectionHandler.impl = SelectionHandler;\n\n\n// WEBPACK FOOTER //\n// ./src/core/selection.js","'use strict';\n\nimport Gantt from './core';\n\nfunction sameBounds(rect1, rect2) {\n    if (!rect1 || !rect2) {\n        return !rect1 == !rect2;\n    }\n    return (rect1.x === rect2.x) && (rect1.y === rect2.y) && (rect1.width === rect2.width) && (rect1.height === rect2.height);\n}\n\nfunction bounds (x, y, width, height) {\n    return {\n        x : x, y : y, width : width, height : height,\n        toString() {\n            return \"{ x = \" + this.x + \", y = \" + this.y + \", width = \" + this.width + \", height = \" + this.height + \" }\";\n        }\n    };\n}\n\nexport default class LayoutSynchronizer extends Gantt.components.LayoutSynchronizer {\n    constructor(config, proto) {\n        super(config, config);\n        this.timeTableBounds = null;\n    }\n\n    setConfiguration(config) {\n        if (config) {\n            Gantt.utils.mergeObjects(this, config);\n        }\n    }\n\n    connect(gantt) {\n        this.gantt = gantt; \n        this.resizeHandler = (e)=> {\n            this.checkBounds();\n        };\n        gantt.on([Gantt.events.RESIZED, Gantt.events.SPLIT_RESIZED], this.resizeHandler);\n\n        this.timeWindowChangeListener = (e, start, end) => {\n            this.timeWindowChanged(start, end);\n        };\n        gantt.on(Gantt.events.TIME_WINDOW_CHANGED, this.timeWindowChangeListener);\n\n        this.timeLineSizeListener = (e, width, height) => {\n            this.timeLineSizeChanged(width, height);\n        };\n        gantt.on(Gantt.events.TIME_LINE_SIZE_CHANGED, this.timeLineSizeListener);\n\n        this.timeLineInitializedListener = (e) => {\n            this.timeLineInitialized();\n        };\n        gantt.on(Gantt.events.TIME_LINE_INIT, this.timeLineInitializedListener);\n\n        this.timeLineScrollListener = (e, x) => {\n            this.timeLineScrolled(x);\n        };\n        gantt.on(Gantt.events.TIME_LINE_SCROLLED, this.timeLineScrollListener);\n    }\n\n    convertBounds(bounds, elt) {\n        const parent = Gantt.utils.offsetParent(elt);\n        const parentBounds = Gantt.utils.getScreenPoint(parent);\n        parentBounds.x = bounds.x - parentBounds.x;\n        parentBounds.y = bounds.y - parentBounds.y;\n        parentBounds.width = bounds.width;\n        parentBounds.height = bounds.height;\n        return parentBounds;\n    }\n\n    //\n    // Time line methods\n    //\n\n    getTimeLine() {\n        return this.gantt.timeLine;\n    }\n\n    getTimeLineWidth() {\n        return this.gantt.timeLine.getWidth();\n    }\n\n    getTimeLineHeight() {\n        return this.gantt.timeLine.getTimeAxisHeight();\n    }\n    \n    getTimeLineScrollLeft() {\n        return this.gantt.timeTable.getScroller().scrollLeft;\n    }\n\n    getTimeAt(x) {\n        return this.gantt.timeLine.getTimeAt(x);\n    }\n\n    timeLineInitialized() {\n    }\n\n    timeTableBoundsChanged(bounds) {\n    }\n\n    timeWindowChanged(start, end) {\n    }\n\n    timeLineSizeChanged(width, height) {\n    }\n\n    timeLineScrolled(x) {\n    }\n\n    checkBounds() {\n        const newBounds = this.getScreenTimeTableScrollerBounds();\n        if (newBounds) {\n            if (!sameBounds(this.timeTableBounds, newBounds)) {\n                this.timeTableBounds = newBounds;\n                this.timeTableBoundsChanged(newBounds);\n            }\n        }\n    }\n\n    getScreenTimeTableScrollerBounds() {\n        if (!this.gantt.timeTable) {\n            // Called from first cycle of the Gantt initialization\n            return null;\n        }\n        const timeTableScroller = this.gantt.timeTable.getScroller();\n        const pt = Gantt.utils.getScreenPoint(timeTableScroller);\n        return bounds(pt.x, pt.y, this.gantt.timeTable.getVisibleWidth(), this.gantt.timeTable.getVisibleHeight());\n    }\n\n    disconnect() {\n        if (this.gantt) {\n            this.gantt.off([Gantt.events.RESIZED, Gantt.events.SPLIT_RESIZED], this.resizeHandler);\n            this.gantt.off(Gantt.events.TIME_WINDOW_CHANGED, this.timeWindowChangeListener);\n            this.gantt.off(Gantt.events.TIME_LINE_SIZE_CHANGED, this.timeLineSizeListener);\n            this.gantt.off(Gantt.events.TIME_LINE_INIT, this.timeLineInitializedListener);\n            this.gantt.off(Gantt.events.TIME_LINE_SCROLLED, this.timeLineScrollListener);\n        }\n    }\n    \n    destroy() {\n        \n    }\n}\n\nGantt.components.LayoutSynchronizer.impl = LayoutSynchronizer;\n\n\n// WEBPACK FOOTER //\n// ./src/core/layoutsynch.js","'use strict';\n\nimport Gantt from './core';\nimport './utils';\nimport './error';\nimport './filter';\nimport './updates';\nimport './toolbar';\nimport './tooltip';\n\n/**\n * Gantt panel is structured as follows:\n *\n * <pre>\n *   .gantt-panel\n *   ------------------------------------------------------------------------------------------------------------\n *   | Split pane                                                                                               |\n *   | -------------------------------------------------------------------------------------------------------- |\n *   | | .table-panel      | .time-panel                                                                      | |\n *   | | ----------------- | -------------------------------------------------------------------------------  | |\n *   | | | Table         | | | .time-line-scroller                            .vertical-scroller-filler     | | |\n *   | | | ------------- | | | --------------------------------------------   ----------------------------  | | |\n *   | | | | Header    | | | | | Time Line                                |   |                          |  | | |\n *   | | | ------------- | | | --------------------------------------------   ----------------------------  | | |\n *   | | |               | | |                                                                              | | |\n *   | | |               | | | .time-table-scroller                                                         | | |\n *   | | | ------------- | | | ---------------------------------------------------------------------------  | | |\n *   | | | | Body    ^ | | | | | Time Table                                                            ^^ | | | |\n *   | | | |         : | | | | |< .............. timeTableWidthTester ...................................>| | | |\n *   | | | |         : | | | | |                                                                       :: | | | |\n *   | | | |         : | | | | |                                                 timeTableHeightTester :: | | | |\n *   | | | |         : | | | | |                                                                       :: | | | |\n *   | | | |         : | | | | |                                                                       v: | | | |\n *   | | ------------:-- | | ---------------------------------------------------------------------------:-- | | |\n *   | --------------:----------------------------------------------------------------------------------:------ |\n *   ----------------:----------------------------------------------------------------------------------:--------\n *                   :                                                                                  :\n *                   : Matches height of .time-table-body                              .time-table-body :\n *                   v                                                                                  v\n * </pre>\n */\nclass GanttPanel extends Gantt.components.GanttPanel {\n\n  constructor(node, config) {\n    super(node, config);\n    this.resizeHandler = () => this.onResize();\n    Gantt.envReady().then(()=> this.setConfiguration(config));\n  }\n\n  setConfiguration(config) {\n    if (this.splitPane) {\n      this.destroy();\n    }\n\n    this.initializing = true;\n    window.addEventListener('resize', this.resizeHandler);\n\n    this.config = Gantt.utils.mergeObjects({}, Gantt.defaultConfiguration, config);\n\n    //TODO\n    this.rowHeight = this.config.rowHeight;\n    this.zoomFactor = this.config.zoomFactor;\n\n    if (this.tooltip && this.tooltip.destroy) {\n      this.tooltip.destroy();\n    }\n    let tooltipClazz = Gantt.components.Tooltip.impl || Gantt.components.Tooltip;\n    this.tooltip = new tooltipClazz(this.config.tooltip);\n\n    if (this.config.title) {\n      if (Gantt.utils.isFunction(this.config.title)) {\n        this.title = this.config.title(this);\n      }\n      else {\n        this.title = this.config.title;\n      }\n    }\n    else this.title = null;\n\n    var stringMatcher = Gantt.utils.stringMatches;\n    let filterClazz = Gantt.components.Filter.impl || Gantt.components.Filter;\n    this.rowFilter = Gantt.utils.mergeObjects(new filterClazz(\n        this.config && this.config.rows && this.config.rows.filter), {\n      stringMatches: function (string, pattern) {\n        return stringMatcher(string, pattern);\n      },\n      getObjectFilterMethodName: function () {\n        return 'acceptRow';\n      },\n      acceptString: function (row, columnData, rowIndex, text) {\n        if (!text) {\n          return true;\n        }\n        for (var col = 0; col < columnData.length; col++) {\n          if (stringMatcher(columnData[col], text)) {\n            return true;\n          }\n        }\n        return false;\n      }\n    });\n    this.activityFilter = Gantt.utils.mergeObjects(new filterClazz(\n        this.config && this.config.tasks && this.config.tasks.filter), {\n      stringMatches: function (string, pattern) {\n        return stringMatcher(string, pattern);\n      },\n      getObjectFilterMethodName: function () {\n        return 'acceptTask';\n      },\n      acceptString: function (activity, row, text) {\n        var actName = activity.name;\n        return !text || (actName && stringMatcher(actName, text));\n      }\n    });\n    if (this.config.table && this.config.table.hideEmptyRows) {\n      this.setHideEmptyRows(true, true);\n    }\n\n    if (this.config.palette) {\n      this.setPaletteConfiguration(this.config.palette);\n    }\n    else {\n      this.palettes = {};\n      this.defaultPalette = null;\n    }\n\n    const selectionClazz = Gantt.components.SelectionHandler.impl || Gantt.components.SelectionHandler;\n    this.selectionHandler = new selectionClazz(this.config && this.config.selection, {\n      setObjectSelected(obj, selected) {\n        if (selected) {\n          obj.selected = true;\n        }\n        else {\n          delete obj.selected;\n        }\n      }\n    });\n    let actType = this.selectionHandler.registerType( { name : 'activity', accept: function(o) { return o.getObjectType() === Gantt.ObjectTypes.Activity },\n      clearSelectionMethod: 'clearActivitySelection', selectionChangedMethod : 'activitySelectionChanged',\n      unselectionMethod : 'unselectActivities', selectionMethod: 'selectActivities' });\n    let resType = this.selectionHandler.registerType( { name : 'resource', accept: function(o) { return o.getObjectType() === Gantt.ObjectTypes.Resource},\n        clearSelectionMethod: 'clearResourceSelection', selectionChangedMethod : 'resourceSelectionChanged',\n        unselectionMethod : 'unselectResources', selectionMethod: 'selectResources' });\n    this.selectionHandler.registerType( { name : 'constraint', accept: function(o) { return o.getObjectType() === Gantt.ObjectTypes.Constraint },\n      clearSelectionMethod: 'clearConstraintSelection', selectionChangedMethod : 'constraintSelectionChanged',\n      unselectionMethod : 'unselectConstraints', selectionMethod: 'selectConstraints' });\n    this.selectionHandler.registerType( { name : 'reservation', accept: function(o) { return o.getObjectType() === Gantt.ObjectTypes.Reservation },\n      clearSelectionMethod: 'clearReservationSelection', selectionChangedMethod : 'reservationSelectionChanged',\n      unselectionMethod : 'unselectReservations', selectionMethod: 'selectReservations' });\n    const rowType = this.selectionHandler.registerType( { name : 'row',\n      clearSelectionMethod: 'clearRowSelection', selectionChangedMethod : 'rowSelectionChanged',\n      unselectionMethod : 'unselectRows', selectionMethod: 'selectRows' });\n\n    this.type = config && config.type || Gantt.type.SCHEDULE_CHART;\n    const rc = this.isResourceGantt();\n    this.selectionHandler.on(rc && Gantt.events.RESOURCE_SELECTED || Gantt.events.ACTIVITY_SELECTED,\n        (e, sels) =>  this.selectionHandler.triggerEvent(Gantt.events.ROW_SELECTED, sels));\n    this.selectionHandler.on(rc && Gantt.events.RESOURCE_UNSELECTED || Gantt.events.ACTIVITY_UNSELECTED,\n        (e, sels) =>  this.selectionHandler.triggerEvent(Gantt.events.ROW_UNSELECTED, sels));\n    this.selectionHandler.on(rc && Gantt.events.RESOURCE_SELECTION_CHANGED || Gantt.events.ACTIVITY_SELECTION_CHANGED,\n        (e, sels) => this.selectionHandler.triggerEvent(Gantt.events.ROW_SELECTION_CHANGED, sels));\n    this.selectionHandler.on(rc && Gantt.events.RESOURCE_SELECTION_CLEARED || Gantt.events.ACTIVITY_SELECTION_CLEARED,\n        (e, sels) => this.selectionHandler.triggerEvent(Gantt.events.ROW_SELECTION_CLEARED, sels));\n    // Selection of objects that are rows for the Gantt chart (activities or resources) must generate row specific events\n    const typeForRow = rc? resType : actType;\n    const defaultNotify = this.selectionHandler.notify;\n    const handler = this.selectionHandler;\n    this.selectionHandler.notify = function(type, event) {\n      let args = new Array(arguments.length);\n      for(let i = 0; i < arguments.length; i++) {\n        args[i] = arguments[i];\n      }\n      defaultNotify.apply(handler, args);\n      if (type === typeForRow) {\n        args[0] = rowType;\n        defaultNotify.apply(handler, args);\n      }\n    };\n    \n\n    const errorClass = Gantt.components.ErrorHandler.impl || Gantt.components.ErrorHandler;\n    this.errorHandler = new errorClass(this.node, this.config && this.config.error);\n\n    this.updates = new (Gantt.components.GanttUpdates.impl || Gantt.components.GanttUpdates)();\n    const oldApplyUpdates = this.updates.applyUpdates;\n    this.updates.applyUpdates = () => {\n      const containsRowChanges = this.updates.containsRowChanges;\n      oldApplyUpdates.call(this.updates);\n      if (containsRowChanges) {\n        // Time sheet scroller height depends on the height of the time sheet displays rows.\n        // Call updateScrollerHeight without modifying the time sheet rows first has no effect\n        this.updateScrollerHeight();\n      }\n      if (this.updates.hasTableScrollYChanged()) {\n        const table = this.table && this.table.getScrollableTable();\n        var scrollTop = table.scrollTop;\n        this.timeTable.setScrollTop(scrollTop);\n      }\n    };\n\n    this.model = null;\n    // Create the Gantt\n    try {\n      this.create();\n    }\n    catch (err) {\n      // Error already display in the Gantt\n      return this._init = Promise.reject(err);\n    }\n\n    try {\n      // Constructs the model, not loading it yet\n      // Load data if specified in the configuration\n      this.model = this.createModel(this.config.data || this.createDefaultModelConfig());\n      this.initializing = false;\n      this.triggerEvent(Gantt.events.RESIZED);\n      return this._init = (this.model && this.load() || Promise.resolve([]).then(()=>this.updateScrollerHeight()));\n    }\n    catch (err) {\n      this.errorHandler.addError(err, \"Error initializing the Gantt\");\n    }\n  }\n\n  createDefaultModelConfig(config) {\n    return {\n      resources: { data: [] },\n      activities: { data: [] },\n      reservations: { data: [] }\n    }\n  }\n\n  createModel(config) {\n    const modelClass = Gantt.components.GanttModel.impl || Gantt.components.GanttModel;\n    const model = new modelClass(this, config);\n    model.on(Gantt.events.TIME_WINDOW_CHANGED, (event, wnd) => {\n      return this.setTimeWindow(wnd);\n    });\n    return model;\n  }\n\n  create() {\n    this.contentElt = document.createElement('div');\n    this.contentElt.className = 'gantt-panel docloud-gantt';\n    this.contentElt.style.position = 'relative';\n    this.contentElt.style.display = 'flex';\n    this.contentElt.style.flexDirection = 'column';\n    this.contentElt.style.height = '100%';\n\n    const getLoadConfig = p => {\n      const c = this.config.loadResourceChart;\n      return Gantt.utils.isArray(c)? (c.length? c[0][p] : undefined) : c[p];\n    }\n    this.loadChartHidden = !this.config.loadResourceChart || !getLoadConfig('visible');\n\n    this.toolbars = null;\n    if (this.config.toolbar) {\n      this.createToolbars(this.config.toolbar);\n    }\n    else {\n      this.toolbarElt = null;\n    }\n\n    if (this.config.classes) {\n      Gantt.utils.addClass(this.contentElt, this.config.classes);\n    }\n    if (this.config.header) {\n      this.headerElt = this.createHeader(this.config.header);\n      if (this.headerElt != null) {\n        this.contentElt.appendChild(this.headerElt);\n      }\n    }\n    else {\n      this.headerElt = null;\n    }\n\n    this.node.appendChild(this.contentElt);\n\n    const bodyElt = this.body = document.createElement('div');\n    bodyElt.className = 'gantt-body';\n    bodyElt.style.position = 'relative'; // Position must be set for the child split pane to get its offsetTop relative to it and have the tooltips positioning work...\n    bodyElt.style.flexGrow = 1;\n    bodyElt.style.flexShrink = 1;\n    // Impressive hack: the flex layout does not manage well resizing of components of height initially to zero!\n    bodyElt.style.height = '10px';\n    this.errorHandler.node = bodyElt;\n    this.contentElt.appendChild(bodyElt); // Need to be added here for the split pane to be created in a element in the DOM\n\n    let bodyCtnr;\n    const splitClass = Gantt.components.Split.impl || Gantt.components.Split;\n    if (this.config.loadResourceChart) {\n      const getLoadConfig = p => {\n        const c = this.config.loadResourceChart;\n        return Gantt.utils.isArray(c)? (c.length? c[0][p] : undefined) : c[p];\n      }\n      let h = 150, hConfig = getLoadConfig('height');\n      if (hConfig) {\n        if (Gantt.utils.isFunction(hConfig)) {\n          h = hConfig();\n        }\n        else if (Gantt.utils.isString(hConfig)) {\n          h = parseInt(hConfig);\n        }\n        else {\n          h = hConfig;\n        }\n      }\n      try {\n        this.loadChartSplit = new splitClass(bodyElt,\n          Gantt.utils.mergeObjects({}, this.config && this.config.divider, {pos: -h, horizontal: false, fixedFirst: false, hideSecond: this.loadChartHidden }));\n        this.loadChartSplit.onDividerDragEnd = (e) => {\n          if (this._init) {\n            this._init.then(()=> {\n              this.triggerEvent(Gantt.events.SPLIT_RESIZED);\n              this.onResize();\n            });\n          }\n        };\n      } catch (err) {\n        this.errorHandler.addError(err, \"Load split pane initialization error\", this.node);\n        throw new Error(\"Load split pane initialization error\");\n      }\n      bodyCtnr = this.loadChartSplit.getLeftComponent();\n    }\n    else bodyCtnr = bodyElt;\n    try {\n      this.splitPane = new splitClass(bodyCtnr, this.config && this.config.divider);\n      this.splitPane.onresized = (e) => {\n        this.triggerEvent(Gantt.events.SPLIT_RESIZED);\n      }\n    }\n    catch (err) {\n      this.errorHandler.addError(err, \"Split pane initialization error\", this.node);\n      throw new Error(\"Split pane initialization error\");\n    }\n\n    // Initialize table panel\n    this.tablePanel = null;\n    let leftComp = this.splitPane.getLeftComponent();\n    leftComp.style.overflow = 'hidden';\n    try {\n      this.tablePanel = this.createTreeTable(leftComp);\n      // A non-zero width component has been created in the left component part of the split pane, we can now\n      // fix the split position\n      this.splitPane.leftComponentCreated();\n    }\n    catch (err) {\n      this.errorHandler.addError(err, \"Tree table initialization error\", this.tablePanel || this.node);\n      throw new Error(\"Table creation error\");\n    }\n\n    // Initialize the time panel\n    let rightPanel = this.splitPane.getRightComponent();\n    rightPanel.style.overflow = 'hidden';\n    try {\n      this.createTimePanel(rightPanel);\n    }\n    catch (err) {\n      this.errorHandler.addError(err, \"Error creating the time panel\", rightPanel);\n      throw new Error(\"Time panel creation error\");\n    }\n    try {\n      this.createTimeLine(this.timeLineScroller);\n    }\n    catch (err) {\n      this.errorHandler.addError(err, \"Error create the time line\", this.timeLineScroller);\n      throw new Error(\"Time line creation error\");\n    }\n\n    if (this.toolbars) {\n      for(let i = 0; i < this.toolbars.length; i++) {\n        this.toolbars[i].connect(this, this.toolbars[i].node);\n      }\n    }\n\n    // Initialize the load resource chart if any\n    this.loadCharts = null;\n    this.loadResPanel = null;\n    if (this.config.loadResourceChart) {\n      this.loadResPanel = this.createLoadResourceChart(this.config.loadResourceChart);\n      if (this.loadResPanel) {\n        // Both width and height to 100% for IE\n        this.loadResPanel.style.width = '100%';\n        this.loadResPanel.style.height = '100%';\n        this.loadChartSplit.getRightComponent().appendChild(this.loadResPanel);\n        this.loadChartSplit.rightComponentCreated();\n      }\n    }\n  }\n\n  load(config) {\n    if (config) {\n      if (this.model && this.model.destroy) {\n        this.model.destroy();\n      }\n      this.model = this.createModel(config);\n    }\n    this.timeLineInit = null;\n\n    //Loading panel\n    this.loadingPanel = null;\n    const loadTimeout = setTimeout(()=> {\n        this.loadingPanel = this.createLoadingPanel(this.config);\n        this.body.appendChild(this.loadingPanel);\n    }, this.config.loadingPanelThresold);\n    const stopLoading = ()=> {\n        if (!this.loadingPanel) {\n            clearTimeout(loadTimeout);\n        }\n        else {\n            this.body.removeChild(this.loadingPanel);\n        }\n        this.loading = false;\n    };\n\n    return this.model.load().then((rows)=> {\n      const wnd = this.getTimeWindow();\n      if (!wnd || !wnd.start) {\n        if (!rows.length) {\n          // Empty Gantt, this is ok\n          const today = new Date().getTime(), day = 1000 * 3600 * 24;\n          this.setTimeWindow({ start: today - day * 2, end : today + day * 2 });\n        }\n        else {\n          stopLoading();\n          return Promise.reject(\"No time window defined\");\n        }\n      }\n      this.loading = true;\n      this.startUpdating();\n      this._resourceGantt = this.isResourceGantt();\n      Gantt.utils.toggleClass(this.contentElt, 'schedule_chart', this._resourceGantt);\n      Gantt.utils.toggleClass(this.contentElt, 'activity_chart', !this._resourceGantt);\n      Gantt.utils.toggleClass(this.contentElt, 'constraints_chart', this.hasConstraints);\n      return Promise.all([\n        // Promise.all can be given non-promises as the parameter.\n        // See example in https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all\n        this.table.setRows(rows) || rows,\n        this.timeLineInit || rows\n      ]).then(() => {\n        stopLoading();\n        // After table is initialized and time line ready with accurate time window\n        // We can update the time table\n\n        this.triggerEvent(Gantt.events.DATA_LOADED, rows);\n        this.timeTable.setConstraints(this.model.constraints);\n        this.updates.timeTable.reload();\n        this.stopUpdating();\n        if (this.toobars) {\n          this.toolbars.map((bar) => {\n            bar.ganttLoaded(this, rows);\n          });\n        }\n        return rows;\n      });\n    }).catch(err => {\n      stopLoading();\n      this.errorHandler.addError(err, \"Loading error\", this.tablePanel);\n      return Promise.reject(err);\n    });\n  }\n\n  isResourceGantt() {\n    return !this.type || (this.type !== Gantt.type.ACTIVITY_CHART);\n  }\n\n  hasConstraints() {\n    return this.model && this.model.constraints && this.model.constraints.length;\n  }\n\n  isFlat() {\n    return !this.model || this.model.isFlat();\n  }\n\n  getTimeWindow() {\n    return this.timeWindow;\n  }\n\n  setTimeWindow({start: start, end : end}) {\n    if (end === 0) {\n      throw new Error(\"Invalid time window + \" + JSON.stringify({ start : start, end : end }) + \", may not have been processed correctly\");\n    }\n    if (this.timeWindow && (this.timeWindow.start == start) && (this.timeWindow.end == end)) {\n      return Promise.resolve(this.timeWindow);\n    }\n    this.timeWindow = { start : start, end : end };\n    return this.timeLineInit = this.timeLine.setTimeWindow(start, end).then(({ start: start, end : end }) => {\n      this.updateTableHeaderHeight();\n      this.updateWidthFromTimeLine();\n      this.scrollTimeTableToX(this.timeLine.getXFromMillis(this.timeLine.getHorizon().start));\n      this.updateTimeLineHeight();\n      this.triggerEvent(Gantt.events.TIME_WINDOW_CHANGED, start, end);\n    });\n  }\n  \n  getBody() {\n    return this.body;\n  }\n\n  initialized() {\n    return this._init;\n  }\n\n  //noinspection JSUnusedLocalSymbols\n  createTreeTable(ctnr) {\n    // Initialize table panel\n    let tablePanel = document.createElement('div');\n    tablePanel.className = 'table-panel';\n    tablePanel.style.position = 'relative';\n    tablePanel.style.height = '100%';\n    tablePanel.style.width = '100%';\n    tablePanel.style.overflow = 'hidden';\n    // If not setting the min width, the table width would be zero while data being loaded and\n    // the split pane would not able to set its split position.\n    tablePanel.style.minWidth = '100px';\n\n    let clazz = Gantt.components.TreeTable.impl || Gantt.components.TreeTable;\n    this.table = new clazz(this, tablePanel, this.config.table);\n    this.table.setRowFilter(this.rowFilter);\n    this.updates.table = this.table.createUpdates(this.updates);\n    ctnr.appendChild(tablePanel);\n    return tablePanel;\n  }\n\n  //noinspection JSUnusedLocalSymbols\n  createTimePanel(ctnr) {\n    this.timePanel = document.createElement('div');\n    this.timePanel.className = 'time-panel';\n    // CSS layout\n    this.timePanel.style.position = 'relative';\n    this.timePanel.style.height = '100%';\n\n    // Create the time right panel\n    let vScrollerFiller = document.createElement('div');\n    vScrollerFiller.className = 'vertical-scroller-filler';\n    // CSS layout\n    vScrollerFiller.style.position = 'absolute';\n    vScrollerFiller.style.right = 0;\n    vScrollerFiller.top = 0;\n    this.timePanel.appendChild(vScrollerFiller);\n    this.updateTimeLineRightMargin = () => {\n      var rightMargin = this.timeTable.getRightMargin();\n      this.timeLineScroller.style.paddingRight = rightMargin ? '' + rightMargin + 'px' : '0';\n      vScrollerFiller.style.width = this.timeLineScroller.style.paddingRight;\n      vScrollerFiller.style.display = rightMargin ? 'block' : 'none';\n    };\n\n    this.updateTableHeaderHeight = (force) => {\n      if (!this.initializing && this.timeLine) { // Timeline is created after first resize events are fired\n        var h = this.timeLine.getTimeAxisHeight();\n        if (force || (this.headersHeight != h)) {\n          this.headersHeight = h;\n          this.table.setHeaderHeight(h);\n          if (h) {\n            this.timeTablePanel.style.top = vScrollerFiller.style.height = h + 'px';\n          }\n        }\n      }\n    };\n\n    this.timeLineScroller = document.createElement('div');\n    this.timeLineScroller.className = 'time-line-scroller';\n    this.timeLineScroller.style.overflow = 'hidden';\n    this.timeLineScroller.style.width = '100%';\n    this.timeLineScroller.style.height = '100%';\n\n    this.timePanel.appendChild(this.timeLineScroller);\n\n    this.timeTablePanel = document.createElement('div');\n    this.timeTablePanel.className = 'time-table';\n    // CSS layout\n    this.timeTablePanel.style.position = 'absolute';\n    this.timeTablePanel.style.left = '0';\n    this.timeTablePanel.style.right = '0';\n    this.timeTablePanel.style.bottom = '0';\n\n    this.timePanel.appendChild(this.timeTablePanel);\n\n    let clazz = Gantt.components.TimeTable.impl || Gantt.components.TimeTable;\n    this.timeTable = new clazz(this, this.timeTablePanel, this.config && this.config.timeTable);\n    this.updates.timeTable = this.timeTable.createUpdates(this.updates);\n    this.attachTimeTableMouseWheel(this.timeTable.getScroller());\n    this.timeTable.getScroller().addEventListener('scroll', (e) => {\n      this.timeLineScroller.scrollLeft = e.target.scrollLeft;\n      this.triggerEvent(Gantt.events.TIME_LINE_SCROLLED, e.target.scrollLeft);\n    });\n    ctnr.appendChild(this.timePanel);\n    return this.timePanel;\n  }\n\n  drawTimeTable(clear) {\n    if (clear && this.table.deleteDrawCache) {\n      this.table.deleteDrawCache();\n    }\n    this.timeTable.draw(clear);\n  }\n\n  createLoadingPanel(config) {\n    const lp = document.createElement('div');\n    lp.className = 'loading-panel';\n    lp.style.position = 'absolute';\n    lp.style.left = '0';\n    lp.style.right = '0';\n    lp.style.top = '0';\n    lp.style.bottom = '0';\n    lp.style.display = 'flex';\n    lp.style.alignItems = 'center';\n    lp.style.justifyContent = 'center';\n\n    const loaderCtnr = document.createElement('div');\n    loaderCtnr.style.position = 'absolute';\n    loaderCtnr.style.left = '50%';\n    loaderCtnr.style.top = '50%';\n    loaderCtnr.style.transform = 'translate(-50%, -50%)';\n\n    const loader = document.createElement('div');\n    loader.className = 'loader';\n    loaderCtnr.appendChild(loader);\n    lp.appendChild(loaderCtnr);\n\n    const label = document.createElement('div');\n    label.className = 'label';\n    label.appendChild(document.createTextNode(Gantt.utils.getString('gantt.loading')));\n    lp.appendChild(label);\n    return lp;\n  }\n\n  createLoadResourceChart(config) {\n    let loadChartNode;\n    let chartPanel;\n    (Gantt.utils.isArray(config) && config.length && Gantt.utils.isArray(config[0])? config : [ config ]).map((loadConfig) => {\n      // Construct the bar node\n      if (!chartPanel) {\n        chartPanel = document.createElement('div');\n        chartPanel.className = 'load-resource-chart-panel';\n        chartPanel.style.flexShrink = 0;\n        chartPanel.style.position = 'relative';\n        // IE specific\n        chartPanel.style.display = 'flex';\n        chartPanel.style.flexDirection = 'columm';\n      }\n      loadChartNode = document.createElement('div');\n      loadChartNode.className = 'load-resource-chart';\n      chartPanel.appendChild(loadChartNode);\n      if (!this.loadCharts) {\n        this.loadCharts = [];\n      }\n      const loadChart = new (Gantt.components.LoadResourceChart.impl || Gantt.components.LoadResourceChart)\n                    (this, loadChartNode, Gantt.utils.mergeObjects({}, loadConfig, { height: '' }));\n      loadChart.node.style.flex = '1 1';\n      this.loadCharts.push(loadChart);\n      window.addWheelListener(loadChart.getScroller(), (evt) => {\n          evt.preventDefault();\n      });\n    });\n\n    return chartPanel;\n  }\n\n  toggleLoadChartVisible() {\n    this.setLoadChartVisible(!this.isLoadChartVisible());\n  }\n\n  setLoadChartVisible(visible) {\n    this.loadChartHidden = !visible;\n    this.loadChartSplit.setRightComponentVisible(visible);\n    this.onResize();\n  }\n\n  isLoadChartVisible() {\n    return !this.loadChartHidden;\n  }\n\n  getPanelNode() {\n    return this.contentElt;\n  }\n\n  updateTimeLineHeight() {\n    const bottomMargin = this.timeTable.getBottomMargin();\n    this.timeLineScroller.style.paddingBottom = bottomMargin ? '' + bottomMargin + 'px' : '0';\n  }\n\n  attachTimeTableMouseWheel(scroller) {\n    window.addWheelListener(scroller, (evt) => {\n      if (evt.ctrlKey && (evt.deltaY != 0)) {\n        if (evt.deltaY < 0) {\n          this.zoomIn(evt);\n        }\n        else {\n          this.zoomOut(evt);\n        }\n        evt.preventDefault();\n      }\n    });\n  }\n\n  //noinspection JSUnusedLocalSymbols\n  createTimeLine(timeLineCtnr) {\n    let clazz = Gantt.components.TimeLine.impl || Gantt.components.TimeLine;\n    this.timeLine = new clazz(this, timeLineCtnr, this.config);\n    this.timeLine.on([Gantt.events.TIME_LINE_RANGE_CHANGE, Gantt.events.TIME_LINE_RANGE_CHANGED,\n      Gantt.events.TIME_LINE_PAN_MOVED], () => {\n      this.updateTableHeaderHeight();\n      this.updateWidthFromTimeLine();\n      this.drawTimeTable(true);\n    });\n    this.timeLine.on(Gantt.events.TIME_LINE_SIZE_CHANGED, (e, w, h) => {\n      this.updateWidthFromTimeLine();\n      this.drawTimeTable(true);\n      this.triggerEvent(Gantt.events.TIME_LINE_SIZE_CHANGED, w, h);\n    });\n    this.timeLine.on(Gantt.events.TIME_LINE_INIT, (e) => {\n      this.triggerEvent(Gantt.events.TIME_LINE_INIT);\n    });\n    return this.timeLine;\n  }\n\n  createToolbars(config) {\n    this.toolbars = [];\n    const ToolbarClass = Gantt.components.Toolbar.impl || Gantt.components.Toolbar;\n    let toolbarNode;\n    this.toolbarElt = null;\n    (Gantt.utils.isArray(config) && config.length && Gantt.utils.isArray(config[0])? config : [ config ]).map((barConfig) => {\n      if (barConfig.node) {\n        if (Gantt.utils.isString(barConfig.node)) {\n          toolbarNode = document.getElementById(barConfig.node);\n        }\n        else if (Gantt.utils.isDomElement(node)) {\n          toolbarNode = node;\n        }\n        else if (Gantt.utils.isFunction(barConfig.node)) {\n          toolbarNode = barConfig.node(this);\n        }\n        else {\n          throw new Error('The toolbar.node must be a string(Dom element ID) or a Dom element or a function returning a Dom element');\n        }\n        barConfig = barConfig.components;\n      }\n      else {\n        // Construct the bar node\n        if (!this.toolbarElt) {\n          this.toolbarElt = document.createElement('div');\n          this.toolbarElt.className = 'gantt-toolbars';\n          this.toolbarElt.style.flexShrink = 0;\n        }\n        toolbarNode = document.createElement('div');\n        toolbarNode.className = 'gantt-toolbar';\n        this.toolbarElt.appendChild(toolbarNode);\n      }\n      this.toolbars.push(new ToolbarClass(this, toolbarNode, barConfig));\n    });\n\n    if (this.toolbarElt) {\n      this.contentElt.appendChild(this.toolbarElt);\n    }\n    // Wait for all toolbar components to be created before triggering onInitialized as components can refer to each others\n    this.toolbars.forEach((t) => {\n        t.onInitialized();\n    });\n    return this.toolbarElt;\n  }\n\n  createHeader(config) {\n    const header = document.createElement('div');\n    header.className = 'gantt-header';\n    if (Gantt.utils.isString(config)) {\n      header.appendChild(document.createTextNode(config));\n    }\n    else if (Gantt.utils.isFunction(config)) {\n      const node = config(this);\n      if (node) {\n        header.appendChild(node);\n      }\n    }\n    return header;\n  }\n\n  getRowCount() {\n    return this.table.getRowCount();\n  }\n\n  getRow(param) {\n    return this.table.getRow(param);\n  }\n\n  getVisibleRows() {\n    return this.table.getVisibleRows();\n  }\n\n  getVisibleHeight() {\n    return this.timeTable.getVisibleHeight();\n  }\n\n  ensureRowVisible(param) {\n    const row = this.table.getRow(param);\n    if (!row) {\n      throw new Error(\"Cannot find row for \" + param);\n    }\n    if (this.table.isRowFiltered(row)) {\n      throw new Error(\"Cannot show the filtered row: \" + param);\n    }\n    this.table.expandParents(row);\n    this.timeTable.scrollToRow(row);\n  }\n\n  isRowVisible(param) {\n    return this.table.isRowVisible(param);\n  }\n\n  getFirstVisibleRow() {\n    return this.table.getFirstVisibleRow();\n  }\n\n  setFirstVisibleRow(param) {\n    this.timeTable.setFirstVisibleRow(this.getRow(param));\n  }\n\n  isRowFiltered(param) {\n    return this.table.isRowFiltered(param);\n  }\n\n  toggleCollapseRow(param, collapse) {\n    this.table.toggleCollapseRow(this.getRow(param), collapse);\n  }\n\n  scrollToY(y) {\n    this.timeTable.scrollToY(y);\n  }\n\n  getRowHeight(row) {\n    row = this.getRow(row);\n    return row && (row.activityRow? row.activityRow.height : row.tr.offsetHeight);\n  }\n\n  draw(forceTableRedraw) {\n    this.timeLine.draw(true);\n    if (this.table.deleteDrawCache) {\n      this.table.deleteDrawCache();\n    }\n    this.table.draw(forceTableRedraw);\n    this.timeTable.draw();\n    this.updateScrollerHeight();\n  }\n\n  updateScrollerHeight() {\n    this.timeTable.setBodyHeight(this.loadOnDemand\n        ? this.table.getRowCount() * this.getRowHeight()\n        : this.table.getHeight());\n    this.updateTimeLineRightMargin();\n  }\n\n  getRowActivities(row) {\n    row = this.getRow(row);\n    return row && row.activities || [];\n  }\n\n  getActivity(param, row) {\n    if (row) {\n      const acts = this.getRowActivities(row);\n      if (Gantt.utils.isString(param)) {\n        for(let i = 0, count = acts.length; i < count; ++i) {\n          if (acts[i].id === param) {\n            return acts[i];\n          }\n        }\n      }\n      else if (Gantt.utils.isInteger(param)) {\n        return acts[param];\n      }\n      else {\n        for(let i = 0, count = acts.length; i < count; ++i) {\n          if (acts[i].getData() === param) {\n            return acts[i];\n          }\n        }\n      }\n    }\n    else {\n      return this.model.getActivity(param);\n    }\n  }\n\n  getActivityNode(param, res) {\n    const activity = this.getActivity(param, res);\n    return activity && activity.node;\n  }\n\n  getToolbarComponent(id) {\n    for(let i = 0; i < this.toolbars.length; i++) {\n      for(let j = 0; j < this.toolbars[i].components.length; j++) {\n        let c = this.toolbars[i].components[j];\n        if (c && (id === c.id)) {\n          return c;\n        }\n      }\n    }\n  }\n\n  onResize() {\n    if (this.timeLine && this.timeLine.onResize) {\n      this.timeLine.onResize();\n    }\n    if (this.updateTimeLineRightMargin) {\n      this.updateTimeLineRightMargin();\n    }\n    if (this.table && this.table.onResize) {\n      this.table.onResize();\n    }\n    if (this.updateTableHeaderHeight && this.timeLine) {\n      this.updateTableHeaderHeight(true);\n    }\n    if (this.table) {\n      this.triggerEvent(Gantt.events.RESIZED);\n    }\n    if (this.timeTable && this.timeTable.onResize) {\n      this.timeTable.onResize();\n    }\n    this.updateScrollerHeight();\n  }\n\n  destroy() {\n    Gantt.plugins.call('destroy', this);\n    if (this.errorHandler && this.errorHandler.destroy) {\n      this.errorHandler.destroy();\n    }\n\n    if (this.splitPane && this.splitPane.destroy) {\n      this.splitPane.destroy();\n    }\n\n    if (this.table && this.table.destroy) {\n      this.table.destroy();\n    }\n\n    if (this.model && this.model.destroy) {\n      this.model.destroy();\n    }\n\n    if (this.resizeHandler) {\n      window.removeEventListener('resize', this.resizeHandler);\n      this.resizeHandler = null;\n    }\n\n    if (this.updates) {\n      this.updates.destroy();\n    }\n\n    if (this.toolbars) {\n      this.toolbars.map((bar) => {\n        bar.destroy();\n      });\n\n      this.toobars = null;\n    }\n\n    while (this.node.firstChild) {\n      this.node.removeChild(this.node.firstChild);\n    }\n\n    this.contentElt = null;\n    this.table = null;\n    this.body = null;\n  }\n\n  disconnect() {}\n\n  /*             */\n  /*     Rows    */\n  /*             */\n\n  highlightRow(row, highlight, deselectAll) {\n    if (typeof row === 'string') {\n      row = this.table.getRow(row);\n    }\n    highlight = (highlight === undefined) || highlight;\n    this.table.highlightRow(row, highlight, deselectAll);\n    this.timeTable.highlightRow(row, highlight, deselectAll);\n  }\n\n  /*                */\n  /*   Selection    */\n  /*                */\n\n  get selection() {\n    return this.selectionHandler;\n  }\n\n  set selection(sel) {\n    const currentSel = this.selectionHandler && this.selectionHandler.get();\n    if (this.selectionHandler) {\n      this.selectionHandler.destroy();\n    }\n    this.selectionHandler = sel;\n    if (this.selectionHandler) {\n      if (currentSel && currentSel.length) {\n        this.selectionHandler.select(sel);\n      }\n    }\n  }\n\n  /*                         */\n  /*   Layout synchronizer   */\n  /*                         */\n  synchLayout(config) {\n    const ls = new (Gantt.components.LayoutSynchronizer.impl || Gantt.components.LayoutSynchronizer)(config)\n    ls.connect(this);\n    return ls;\n  }\n\n  /*             */\n  /*     Zoom    */\n  /*             */\n\n  resetZoom() {\n    this.timeLine.resetZoom();\n    this.scrollTimeTableToX(this.timeLine.getXFromMillis(this.timeLine.getHorizon().start));\n  }\n\n  zoomIn(evt) {\n    this.zoom(this.zoomFactor, evt);\n  }\n\n  zoomOut(evt) {\n    this.zoom(-this.zoomFactor, evt);\n  }\n\n  zoom(zoomFactor, evt) {\n    zoomFactor = this.timeLine.validateZoomFactor(zoomFactor);\n    if (zoomFactor != 0) {\n      var visibleW = this.timeTable.getVisibleWidth();\n      // When zooming, we want to keep the same time coordinate under the mouse, if mousewheel event is provided as a parameter.\n      var xRef = evt && this.getTimeTableCoordinates(evt.target, {x: evt.offsetX, y: evt.offsetY}).x\n          || this.timeTable.getScrollLeft() + (visibleW / 2);\n      var timeRef = this.timeLine.getTimeAt(xRef);\n      xRef -= this.timeTable.getScrollLeft();\n\n      this.timeLine.zoom(zoomFactor);\n\n      var newScrollLeft = this.timeLine.getXFromMillis(timeRef) - xRef;\n      this.scrollTimeTableToX(newScrollLeft);\n    }\n  }\n\n  fitToContent() {\n    var timeRange = this.timeTable.getDisplayedActivitiesTimeRange();\n    this.timeLine.setVisibleTimeWindow(timeRange);\n    this.scrollTimeTableToX(this.timeLine.getXFromMillis(timeRange && timeRange.start || this.timeLine.getHorizon().start));\n  }\n\n  updateScrollFromTimeLine() {}\n\n  updateWidthFromTimeLine() {\n    this.timeTable.setBodyWidth(this.timeLine.getWidth());\n  }\n\n  /*                        */\n  /*    Search and filter   */\n  /*                        */\n  addFilter(filter, rows, activities) {\n    var result = { activities : activities && this.activityFilter.addFilter(filter) };\n    const actFilter = result.activities;\n    if (rows) {\n      //noinspection JSUnusedLocalSymbols\n      result.row = actFilter\n          ? this.rowFilter.addOrFilters(filter, (row, columnData, rowIndex) => {\n        const count = row.activities.length, params = [ null, row ];\n        for(let i = 0; i < count; i++) {\n          params[0] = row.activities[i];\n          if (actFilter(params)) {\n            return true;\n          }\n        }\n        return false;\n      })\n          : this.rowFilter.addFilter(filter);\n    }\n    if (result.row || result.activities) {\n      this.filterChanged();\n      return result;\n    }\n    return null;\n  }\n\n  removeFilter(key, preventNotify) {\n    var success = false;\n    if (key) {\n      if (key.row) {\n        success = this.rowFilter.removeFilter(key.row);\n      }\n      if (key.activities) {\n        success = this.activityFilter.removeFilter(key.activities);\n      }\n      if (this.searchFilter == key) {\n        this.searchFilter = null;\n      }\n    }\n    if (success && !preventNotify) {\n      this.filterChanged();\n    }\n    return success;\n  }\n\n  search(text, rows, activities) {\n    if (this.searchFilter) {\n      if (this.searchFilter.row) {\n        this.rowFilter.removeFilter(this.searchFilter.row);\n      }\n      if (this.searchFilter.activities) {\n        this.activityFilter.removeFilter(this.searchFilter.activities);\n      }\n    }\n    if (text && (rows || activities)) {\n      this.searchFilter = this.addFilter(text, rows, activities);\n    }\n    else {\n      this.searchFilter = null;\n      this.filterChanged();\n    }\n  }\n\n  setHideEmptyRows(hide, preventNotify) {\n    if ((hide && !this.hideEmptyRowsFilter) || (!hide && this.hideEmptyRowsFilter)) {\n      if (this.hideEmptyRowsFilter) {\n        this.rowFilter.removeFilter(this.hideEmptyRowsFilter);\n        this.hideEmptyRowsFilter = null;\n      }\n      else {\n        //noinspection JSUnusedLocalSymbols\n        this.hideEmptyRowsFilter = this.rowFilter.addFilter((row, columnData, rowIndex) => {\n          let activityFilter = this.activityFilter;\n          activityFilter = activityFilter && !activityFilter.isEmpty()? activityFilter : null;\n          const count = row.activities && row.activities.length;\n          if (!count || !activityFilter) {\n            return count;\n          }\n          for(let i = 0; i < count; i++) {\n            if (activityFilter.accept(row.activities[i], row)) {\n              return true;\n            }\n          }\n          return false;\n        });\n      }\n      if (!preventNotify) {\n        this.filterChanged();\n      }\n      return true;\n    }\n    return false;\n  }\n\n  filterChanged() {\n    if (this.table && this.timeTable) {\n      this.table.filterChanged();\n      const table = this.table && this.table.getScrollableTable();\n      this.updateScrollerHeight();\n      var scrollTop = table.scrollTop;\n      this.timeTable.setScrollTop(scrollTop);\n      this.drawTimeTable(true);\n      this.triggerEvent(Gantt.events.ROWS_FILTERED);\n    }\n  }\n\n  /*             */\n  /*     Title   */\n  /*             */\n  getTitle() {\n    return this.title;\n  }\n\n  setTitle(title) {\n    this.title = title;\n    this.triggerEvent(Gantt.events.TITLE_CHANGED, title);\n  }\n\n  /*                */\n  /*   Row colors   */\n  /*                */\n\n  setRowColor(row, color) {\n    row.color = color;\n    if (this.table.setRowColor) {\n        this.table.setRowColor(row, color);\n    }\n    if (this.timeTable.setRowColor) {\n      this.timeTable.setRowColor(row, color);\n    }\n  }\n\n  /*             */\n  /*     Utils   */\n  /*             */\n\n  //noinspection JSUnusedGlobalSymbols\n  centerTimeSheetOnX(x) {\n    this.scrollTimeTableToX(x - (this.timeTable.getVisibleWidth() / 2));\n  };\n\n  scrollTimeTableToX(x) {\n    x = Math.min(Math.max(Math.round(x), 0), this.timeTable.getBodyWidth() - this.timeTable.getVisibleWidth());\n    this.timeTable.setScrollLeft(x);\n    if (this.loadCharts && this.loadCharts.length) {\n      this.loadCharts.forEach((lc) => lc.getScroller().scrollLeft = x);\n    }\n    this.triggerEvent(Gantt.events.TIME_LINE_SCROLLED, x);\n  }\n\n  getTimeTableCoordinates(target, position) {\n    return Gantt.utils.walkToAncestor([this.timeTable.getScroller(), this.timeLineScroller], target,\n        (parent, node, position) => {\n          if (parent == this.timeLineScroller) {\n            position.x += this.timeTable.getScrollLeft();\n          }\n          else if (parent == this.timeTable.getScroller()) {\n            return position;\n          }\n          return {x: position.x + node.offsetLeft - parent.scrollLeft, y: position.y + node.offsetTop - parent.scrollTop};\n        }, {x: position && position.x || 0, y: position && position.y || 0});\n  };\n\n\n  addTimeMarker(id, time, classes) {\n    this.timeLine.addTimeMarker(id, time, classes);\n  }\n\n  removeTimeMarker(id) {\n    this.timeLine.removeTimeMarker(id);\n  }\n\n  setTimeLineItem(id, item) {\n    this.timeLine.setTimeLineItem(id, item);\n  }\n\n  addTimeLineItem(id, item) {\n    this.timeLine.addTimeLineItem(id, item);\n  }\n\n  removeTimeLineItem(id) {\n    this.timeLine.removeTimeLineItem(id);\n  }\n\n  /*             */\n  /*    Errors   */\n  /*             */\n\n  hasErrors() {\n    return this.errorHandler.hasErrors();\n  }\n\n  /*             */\n  /*   Palettes  */\n  /*             */\n\n  setPaletteConfiguration(config) {\n    if (Gantt.utils.isArray(config) || Gantt.utils.isFunction(config)) {\n      this.palettes = null;\n      this.defaultPalette = new (Gantt.components.Palette.impl || Gantt.components.Palette)(config);\n    }\n    else if (Gantt.utils.isString(config)) {\n      this.palettes = null;\n      this.defaultPalette = Gantt.defaultPalettes[config];\n      if (!this.defaultPalette) {\n        console.error(\"Palette [\" + config + \"] does not exist\");\n      }\n    }\n    else {\n      const paletteNames = Object.keys(config);\n      this.palettes = {};\n      this.defaultPalette = null;\n      for(let i = 0, count = paletteNames.length; i < count; ++i) {\n        this.palettes[paletteNames[i]] = new (Gantt.components.Palette.impl || Gantt.components.Palette)(config[paletteNames[i]]);\n      }\n    }\n  }\n\n  getPalette(name) {\n    if (!name) {\n      return this.defaultPalette || (Gantt.defaultPaletteName && Gantt.defaultPalettes[Gantt.defaultPaletteName]);\n    }\n    return this.palettes && this.palettes[name] || Gantt.defaultPalettes[name];\n  }\n\n  /*             */\n  /*   Updates   */\n  /*             */\n  startUpdating() {\n    this.updates.startUpdating();\n  }\n\n  stopUpdating() {\n    if (this.updates.stopUpdating()) {\n    }\n  }\n\n  rowsChanged(event, rows) {\n    this.updates.startUpdating();\n    this.triggerEvent(event, rows);\n    this.updates.rowsChanged(event, rows);\n    this.updates.stopUpdating();\n  }\n}\n\nGantt.components.GanttPanel.impl = GanttPanel;\n\nexport default GanttPanel;\n\n\n// WEBPACK FOOTER //\n// ./src/core/ganttpanel.js","'use strict';\n\nimport Gantt from './core';\n\nlet GanttStrings = {\n  \"Gantt.MoveActivity\" : \"Move \\\"{name}\\\"\",\n  \"Gantt.ChangeActivityRow\" : \"Change \\\"{name}\\\" of row\",\n  \"timeLine.changeRowItem.fmt\" : '<div class=\"dragg-item-content\"><h2 class=\"dragg-title\">{title}</h2><table>' +\n            '<tr><td class=\"dragg-item-property\">From row</td><td class=\"table-separator\"></td><td class=\"dragg-item-value\">{start}</td></tr>' +\n            '<tr><td class=\"dragg-item-property\">At date</td><td class=\"table-separator\"></td><td class=\"dragg-item-value\">{startRow}</td></tr>' +\n            '<tr><td class=\"dragg-item-property\">To row</td><td class=\"table-separator\"></td><td class=\"dragg-item-value\">{current}</td></tr>' +\n            '<tr><td class=\"dragg-item-property\">At date</td><td class=\"table-separator\"></td><td class=\"dragg-item-value\">{currentRow}</td></tr>' +\n          '</table></div>',\n  \"timeLine.newTimeItem.fmt\" : '<div class=\"dragg-item-content\"><h2 class=\"dragg-title {draggStatusClass}\">{title}</h2><table>' +\n            '<tr><td class=\"dragg-item-property\">From</td><td class=\"table-separator\"></td><td class=\"dragg-item-value\">{start}</td></tr>' +\n            '<tr><td class=\"dragg-item-property\">To</td><td class=\"table-separator\"></td><td class=\"dragg-item-value\">{current}</td></tr>' +\n          '</table></div>',\n  'gantt.loading' : 'Loading',\n  'gantt.error.details' : 'Details',\n  'gantt.error.title.fmt' : '{msg} : {title}',\n  'gantt.toolbar.mini.text' : 'Mini',\n  'gantt.toolbar.minimize.text' : 'Compact',\n  'gantt.toolbar.normal.text' : 'Normal',\n  'gantt.toolbar.mini.tooltip' : 'Change row height',\n  'gantt.toolbar.fit.tooltip' : 'Fit',\n  'gantt.toolbar.refresh.text' : 'Refresh',\n  'gantt.toolbar.refresh.tooltip' : 'Refresh',\n  'gantt.toolbar.zoomIn.tooltip' : 'Zoom In',\n  'gantt.toolbar.zoomOut.tooltip' : 'Zoom Out',\n  'gantt.loadResourceChart.load.title' : 'Load',\n  'gantt.loadResourceChart.show.tooltip' : 'Show Load chart',\n  'gantt.loadResourceChart.hide.tooltip' : 'Hide Load chart',\n  'gantt.loadResourceChart.noSelection.title' : 'Select one or more resources to display in the load chart',\n  'gantt.constraintChart.from' : 'From',\n  'gantt.constraintChart.to' : 'To',\n  'gantt.constraintChart.type' : 'Type',\n  'gantt.constraintChart.start.start' : 'Start to Start',\n  'gantt.constraintChart.start.end' : 'End to Start',\n  'gantt.constraintChart.end.end' : 'End to End',\n  'gantt.constraintChart.end.start' : 'End to Start',\n  'gantt.name' : 'Name',\n  'gantt.id' : 'Id',\n  'gantt.start' : 'Start',\n  'gantt.end' : 'End'\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\nNumber.isInteger = Number.isInteger || function(value) {\n      return typeof value === \"number\" &&\n          isFinite(value) &&\n          Math.floor(value) === value;\n    };\n\nGantt.utils = {\n  defaultDateFormat : \"mmm d, hh:MM:ss TT\",\n\n  createDateParser : function(format) {\n    var i = 0, fmt = {};\n    var year = 'year', month = 'month', day = 'day', hour = 'hour', min = 'min', secs = 'secs', millis = 'millis';\n    var convertor = {\n      yyyy : year, yy : year, y : year,\n      M : month, MM : month, MMMM : month,\n      d : day, dd : day,\n      H : hour, HH : hour,\n      m : min, mm : min,\n      s : secs, ss : secs,\n      S : millis, SS : millis, SSS : millis\n    };\n    format.replace(/(yyyy|yy|y|MMMM|MM|M|dd|d|HH|H|mm|m|ss|s|SSS|SS|S)/g, function(part) {\n      fmt[convertor[part]] = i++;\n    });\n    return function (s) {\n      if (!s) return 0;\n      var parts = s.match(/(\\d+)/g);\n      return new Date(parts[fmt[year]], parts[fmt[month]]-1, parts[fmt[day]], parts[fmt[hour]], parts[fmt[min]], parts[fmt[secs]]).getTime();\n    }\n  },\n\n  closest(elt, selector) {},\n\n  mergeObjects(target) {\n    if (!target) {\n      target = {};\n    }\n    for(let i = 1, obj, prop; i < arguments.length; i++) {\n      if (obj = arguments[i]) {\n        for (let j = 0, keys = Object.keys(obj); j < keys.length; j++) {\n          prop = keys[j];\n          target[prop] = obj[prop];\n        }\n      }\n    }\n    return target;\n  },\n\n  getChild(elt, tagname) {\n    tagname = tagname? tagname.toUpperCase() : null;\n    for(var i = 0; i < elt.childNodes.length; i++) {\n      if (!tagname || (elt.childNodes[i].tagName.toUpperCase() === tagname)) {\n        return elt.childNodes[i];\n      }\n    }\n    return null;\n  },\n  isArray(obj) {\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray\n    if (!Array.isArray) {\n      Array.isArray = function(arg) {\n        return Object.prototype.toString.call(arg) === '[object Array]';\n      };\n    }\n    return Array.isArray(obj);\n  },\n  isString(obj) {\n    return (typeof obj === 'string') || (obj instanceof String);\n  },\n  isFunction(obj) {\n    return typeof obj === 'function';\n  },\n  isDomElement(obj) {\n    return obj.nodeType > 0;\n    /*return (\n        typeof HTMLElement === \"object\"\n            ? o instanceof HTMLElement :  o && typeof o === \"object\" && o !== null && o.nodeType === 1 && typeof o.nodeName===\"string\"\n    )*/\n  },\n  hasClass(el, className) {\n    if (el.classList) {\n      return el.classList.contains(className)\n    }\n    else if (el.className && el.className.match) { // Classname strings for SVG elements don't have some string methods including replace or match\n        return !!el.className.match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'))\n    }\n    return false;\n  },\n\n  addClass(el, className) {\n    if (el.classList) {\n      el.classList.add(className);\n    }\n    else if (!this.hasClass(el, className)) {\n      if (el.className) {\n        el.className += \" \" + className\n      }\n      else {\n        el.className = className;\n      }\n    }\n  },\n  removeClass(el, className) {\n    if (el.classList) {\n      el.classList.remove(className);\n    }\n    else if (this.hasClass(el, className)) {\n      var reg = new RegExp('(\\\\s|^)' + className + '(\\\\s|$)');\n      el.className = el.className.replace(reg, ' ');\n    }\n  },\n  toggleClass(el, classname, set) {\n    if (set === undefined) {\n      if (this.hasClass(el, classname)) {\n        this.removeClass(el, classname);\n      }\n      else {\n        this.addClass(el, classname);\n      }\n    }\n    else if (set) {\n      this.addClass(el, classname);\n    }\n    else {\n      this.removeClass(el, classname);\n    }\n  },\n  html(node, htmlText) {\n    throw new Error('Gantt.utils.html not supported');\n  },\n  walkToAncestor(parent, elt, cb, param) {\n    function makeArrayMatcher(array) {\n      return function(obj) {\n        for(var i =0; i < array.length; i++) {\n          if (obj === array[i]) {\n            return true;\n          }\n        }\n        return false;\n      }\n    }\n    var matcher = typeof parent === \"function\"\n      ? parent : this.isArray(parent)? makeArrayMatcher(parent) : function(obj) { return parent === obj; };\n    for(var p = elt, parentNode; p && (p !== document) || matcher(p);) {\n      if (matcher(p)) {\n        return param === undefined && p || param;\n      }\n      parentNode = p.parentNode;\n      if ((parentNode === document) && !matcher(document)) {\n        return;\n      }\n      if (cb) {\n        var result = cb(parentNode, p, param);\n        if (result !== undefined) {\n          param = result;\n        }\n      }\n      p = parentNode;\n    }\n  },\n\n  getWindowScrollLeft() {\n    var t;\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect for this browser safe implementation of scrollLeft\n    return (((t = document.documentElement) || (t = document.body.parentNode))\n                && typeof t.scrollLeft == 'number' ? t : document.body).scrollLeft;\n  },\n\n  getWindowScrollTop() {\n    var t;\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect for this browser safe implementation of scrollTop\n    return (((t = document.documentElement) || (t = document.body.parentNode))\n              && typeof t.scrollTop == 'number' ? t : document.body).scrollTop\n  },\n\n  getScreenPoint(elt, pt) {\n    var bounds = elt.getBoundingClientRect();\n    return {\n      x : bounds.left + this.getWindowScrollLeft() + (pt? pt.x : 0),\n      y : bounds.top + this.getWindowScrollTop() + (pt? pt.y : 0)\n    }\n  },\n\n  getHeight(elt) {\n    // In firefox, actual row heights can be non-integers, which results in elt.offsetHeight (integer)\n    // being different from the actual display size, as the rounding done in the browser display and the one returned\n    // from offsetHeight can different. A table row of height 32.5 is displayed with 32px and have its offsetHeight\n    // returning 33...\n    return elt.offsetHeight;\n  },\n\n  offsetParent(elt) {\n    return elt.parentNode; // Should be the closest ancestor with positioned style (fixed, relative or absolute)\n  },\n\n  ajax(url, params) {\n\n  },\n  propertyEvaluator(path) {\n    if (this.isFunction(path)) {\n      return path;\n    }\n    var ar = path.split('.');\n    if (ar.length > 1) {\n      return function(obj) {\n        for(var i = 0; obj && (i < ar.length); i++) {\n          obj = obj[ar[i]];\n        }\n        return obj;\n      }\n    }\n    else if (ar.length == 1) {\n      return function(obj) { return obj[path]; }\n    }\n    else return function(obj) {\n        return obj;\n      }\n  },\n  stringMatches(s, search) {\n    return s.toLocaleLowerCase().indexOf(search.toLowerCase()) > -1;\n  },\n  getString(key, defaultValue) {\n    return GanttStrings[key] || defaultValue || key;\n  },\n  formatString(tpl, obj) {\n    tpl = this.getString(tpl, tpl);\n    return tpl.replace(/\\{(\\w+)\\}/g, function(_,key){\n      return obj[key];\n    });\n  },\n  addEventListener(target, evt, cb, capture) {\n    if (target.addEventListener)\n      target.addEventListener(evt, cb, capture);\n    else if (target.attachEvent)\n      target.attachEvent('on' + evt, cb);\n  },\n  removeEventListener(target, evt, cb) {\n    if (target.removeEventListener)\n      target.removeEventListener(evt, cb, false);\n    else if (target.detachEvent)\n      target.detachEvent('on' + evt, cb);\n  },\n\n  implements(clazz) {\n    for (var i = 1, count = arguments.length; i < count; i++) {\n      let toImplement = arguments[i];\n      for(let key in toImplement) {\n        if (toImplement.hasOwnProperty(key)) {\n          clazz[key] = toImplement[key];\n        }\n      }\n    }\n    return clazz;\n  },\n\n  detectIE() {\n    // https://codepen.io/gapcode/pen/vEJNZN\n    var ua = window.navigator.userAgent;\n\n    // Test values; Uncomment to check result …\n\n    // IE 10\n    // ua = 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)';\n\n    // IE 11\n    // ua = 'Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko';\n\n    // Edge 12 (Spartan)\n    // ua = 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36 Edge/12.0';\n\n    // Edge 13\n    // ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.10586';\n\n    var msie = ua.indexOf('MSIE ');\n    if (msie > 0) {\n      // IE 10 or older => return version number\n      return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n    }\n\n    var trident = ua.indexOf('Trident/');\n    if (trident > 0) {\n      // IE 11 => return version number\n      var rv = ua.indexOf('rv:');\n      return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n    }\n\n    var edge = ua.indexOf('Edge/');\n    if (edge > 0) {\n      // Edge (IE 12+) => return version number\n      return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n    }\n\n    // other browser\n    return false;\n  }\n};\n\nGantt.utils.isInteger = Number.isInteger;\n\n//\n// DataFetcher\n//\n/**\n * Utility class for accessing remote or local data\n * @\n * @param config Configuration for accessing data.\n * @constructor\n */\nclass DataFetcher {\n  /**\n   * Constructs a new data fetcher associated with specified context and parameterized with the provided\n   * options.\n   * @param config parameters describing the access to data.\n   * @param privateFields (Array) list of fields to not take into account when parsing the configuration.\n   * @param settings the settings object to provide contextual info to user's callbacks.\n   */\n  constructor(config, privateFields, settings) {\n    const createEntry = (name, cfg) => {\n      const ctx = config.context || config;\n      const postProcess = (data) => {\n        let p = data && data.then && data || Promise.resolve(data);\n        if (config.success) {\n          p = p.then((data) => {\n            return config.success.call(ctx, data, settings);\n          });\n        }\n        return p;\n      };\n      if (Gantt.utils.isFunction(cfg)) {\n        this[name] = (...params) => {\n          try {\n            return cfg.apply(settings, params);\n          }\n          catch (err) {\n            return Promise.reject(err);\n          }\n        };\n      }\n      else if (config.url) {\n        // make the ajax call\n        const ajaxConfig = Gantt.utils.mergeObjects({ success : cfg.success, settings : settings }, cfg.ajaxConfig);\n        this[name] = () => {\n          return Gantt.utils.ajax(cfg.url, ajaxConfig);\n        };\n      }\n      else if (Gantt.utils.isArray(config)) {\n        this[name] = () => {\n          return Promise.resolve(config);\n        };\n      }\n      else {\n        const data = config.data;\n        if (data) {\n          if (Gantt.utils.isString(data)) {\n            if (!ctx) {\n              throw \"No context defined for data fetcher \" + name;\n            }\n            const propEval = Gantt.utils.propertyEvaluator(data);\n            let fct = typeof ctx === 'function';\n            this[name] = (model) => {\n              model = model? model : (fct? ctx() : ctx);\n              if (model && model.then) { // Check if promise. See https://promisesaplus.com/#point-53\n                return model.then(function(res) {\n                  return postProcess(propEval(res));\n                });\n              }\n              return postProcess(propEval(model));\n            }\n          }\n          else if (Gantt.utils.isFunction(data)) {\n            let fct = typeof ctx === 'function';\n            this[name] = (model) => {\n              model = model? model : (fct? ctx() : ctx);\n              if (model && model.then) { // Check if promise. See https://promisesaplus.com/#point-53\n                return model.then(function(res) {\n                  return postProcess(data.call(ctx, model));\n                });\n              }\n              try {\n                return postProcess(data.call(ctx, model));\n              }\n              catch (err) {\n                return Promise.reject(err);\n              }\n            }\n          }\n          else {\n            this[name] = () => {\n              return postProcess(data);\n            }\n          }\n        }\n        else {\n          throw \"Data definition for \" + JSON.stringify(config) + \" for '\" + name + \"' does not define ajax parameters nor static data\";\n        }\n      }\n    };\n\n    if (Gantt.utils.isFunction(config)) {\n      createEntry('get', config, {});\n    }\n    else if (Gantt.utils.isArray(config)) {\n      createEntry('get', config, {});\n    }\n    else {\n      const defConfig = {context: settings};\n      const entryConfigs = [];\n      let useDefault;\n      for (let i = 0, prop, keys = Object.keys(config); i < keys.length; i++) {\n        prop = keys[i];\n        if ((prop === 'data') || (prop === 'url') || (prop === 'success') || (prop === 'context') || (prop === 'ajaxConfig')) {\n          defConfig[prop] = config[prop];\n          useDefault = true;\n        }\n        else if (!privateFields || (privateFields.indexOf(prop) < 0)) {\n          entryConfigs.push(prop);\n          entryConfigs.push(config[prop]);\n        }\n      }\n\n      for (let i = 0, prop; i < entryConfigs.length;) {\n        prop = entryConfigs[i++];\n        createEntry(prop, useDefault && Gantt.utils.mergeObjects({}, defConfig, entryConfigs[i++]) || entryConfigs[i++], defConfig);\n      }\n      if (!entryConfigs.length && useDefault) {\n        createEntry('get', defConfig);\n      }\n    }\n  }\n}\n\nGantt.components.DataFetcher.impl = DataFetcher;\n\n//\n// Tooltip\n//\n\n// See https://developer.mozilla.org/en-US/docs/Web/Events/wheel\nlet prefix = \"\", _addEventListener, support;\n\n// detect event model\nif ( window.addEventListener ) {\n  _addEventListener = \"addEventListener\";\n} else {\n  _addEventListener = \"attachEvent\";\n  prefix = \"on\";\n}\n\n// detect available wheel event\n//noinspection JSUnresolvedVariable\nsupport = \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : // Modern browsers support \"wheel\"\n  document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE support at least \"mousewheel\"\n    \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n\nwindow.addWheelListener = function( elem, callback, useCapture ) {\n  _addWheelListener( elem, support, callback, useCapture );\n\n  // handle MozMousePixelScroll in older Firefox\n  if( support == \"DOMMouseScroll\" ) {\n    _addWheelListener( elem, \"MozMousePixelScroll\", callback, useCapture );\n  }\n};\n\nfunction _addWheelListener( elem, eventName, callback, useCapture ) {\n  elem[ _addEventListener ]( prefix + eventName, support == \"wheel\" ? callback : function( originalEvent ) {\n    !originalEvent && ( originalEvent = window.event );\n\n    // create a normalized event object\n    var event = {\n      // keep a ref to the original event object\n      originalEvent: originalEvent,\n      target: originalEvent.target || originalEvent.srcElement,\n      type: \"wheel\",\n      deltaMode: originalEvent.type == \"MozMousePixelScroll\" ? 0 : 1,\n      deltaX: 0,\n      deltaY: 0,\n      deltaZ: 0,\n      altKey : originalEvent.altKey,\n      ctrlKey : originalEvent.ctrlKey,\n      shiftKey : originalEvent.shiftKey,\n\n      preventDefault: function() {\n        originalEvent.preventDefault ?\n          originalEvent.preventDefault() :\n          originalEvent.returnValue = false;\n      }\n    };\n\n    // calculate deltaY (and deltaX) according to the event\n    if ( support == \"mousewheel\" ) {\n      event.deltaY = - 1/40 * originalEvent.wheelDelta;\n      // Webkit also support wheelDeltaX\n      //noinspection JSUnresolvedVariable\n      originalEvent.wheelDeltaX && ( event.deltaX = - 1/40 * originalEvent.wheelDeltaX );\n    } else {\n      event.deltaY = originalEvent.detail;\n    }\n\n    // it's time to fire the callback\n    return callback( event );\n\n  }, useCapture || false );\n}\n\n/*                                                                                      */\n/*                                                                                      */\n/*                                  Date formatting                                     */\n/*                                                                                      */\n/*                                                                                      */\nvar dateFormat = function () {\n  var\ttoken = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZ]|\"[^\"]*\"|'[^']*'/g,\n    timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g,\n    timezoneClip = /[^-+\\dA-Z]/g,\n    pad = function (val, len) {\n      val = String(val);\n      len = len || 2;\n      while (val.length < len) val = \"0\" + val;\n      return val;\n    };\n\n  // Regexes and supporting functions are cached through closure\n  return function (date, mask, utc) {\n    var dF = dateFormat;\n\n    // You can't provide utc if you skip other args (use the \"UTC:\" mask prefix)\n    if (arguments.length == 1 && Object.prototype.toString.call(date) == \"[object String]\" && !/\\d/.test(date)) {\n      mask = date;\n      date = undefined;\n    }\n\n    // Passing date through Date applies Date.parse, if necessary\n    date = date ? new Date(date) : new Date;\n    if (isNaN(date))\n      throw SyntaxError(\"invalid date\");\n\n    mask = String(dF.masks[mask] || mask || dF.masks[\"default\"]);\n\n    // Allow setting the utc argument via the mask\n    if (mask.slice(0, 4) == \"UTC:\") {\n      mask = mask.slice(4);\n      utc = true;\n    }\n\n    var\t_ = utc ? \"getUTC\" : \"get\",\n      d = date[_ + \"Date\"](),\n      D = date[_ + \"Day\"](),\n      m = date[_ + \"Month\"](),\n      y = date[_ + \"FullYear\"](),\n      H = date[_ + \"Hours\"](),\n      M = date[_ + \"Minutes\"](),\n      s = date[_ + \"Seconds\"](),\n      L = date[_ + \"Milliseconds\"](),\n      o = utc ? 0 : date.getTimezoneOffset(),\n      flags = {\n        d:    d,\n        dd:   pad(d),\n        ddd:  dF.i18n.dayNames[D],\n        dddd: dF.i18n.dayNames[D + 7],\n        m:    m + 1,\n        mm:   pad(m + 1),\n        mmm:  dF.i18n.monthNames[m],\n        mmmm: dF.i18n.monthNames[m + 12],\n        yy:   String(y).slice(2),\n        yyyy: y,\n        h:    H % 12 || 12,\n        hh:   pad(H % 12 || 12),\n        H:    H,\n        HH:   pad(H),\n        M:    M,\n        MM:   pad(M),\n        s:    s,\n        ss:   pad(s),\n        l:    pad(L, 3),\n        L:    pad(L > 99 ? Math.round(L / 10) : L),\n        t:    H < 12 ? \"a\"  : \"p\",\n        tt:   H < 12 ? \"am\" : \"pm\",\n        T:    H < 12 ? \"A\"  : \"P\",\n        TT:   H < 12 ? \"AM\" : \"PM\",\n        Z:    utc ? \"UTC\" : (String(date).match(timezone) || [\"\"]).pop().replace(timezoneClip, \"\"),\n        o:    (o > 0 ? \"-\" : \"+\") + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n        S:    [\"th\", \"st\", \"nd\", \"rd\"][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10]\n      };\n\n    return mask.replace(token, function ($0) {\n      return $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);\n    });\n  };\n}();\n\n// Some common format strings\ndateFormat.masks = {\n  \"default\":      \"ddd mmm dd yyyy HH:MM:ss\",\n  shortDate:      \"m/d/yy\",\n  mediumDate:     \"mmm d, yyyy\",\n  longDate:       \"mmmm d, yyyy\",\n  fullDate:       \"dddd, mmmm d, yyyy\",\n  shortTime:      \"h:MM TT\",\n  mediumTime:     \"h:MM:ss TT\",\n  longTime:       \"h:MM:ss TT Z\",\n  isoDate:        \"yyyy-mm-dd\",\n  isoTime:        \"HH:MM:ss\",\n  isoDateTime:    \"yyyy-mm-dd'T'HH:MM:ss\",\n  isoUtcDateTime: \"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'\"\n};\n\n// Internationalization strings\ndateFormat.i18n = {\n  dayNames: [\n    \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\",\n    \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"\n  ],\n  monthNames: [\n    \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\",\n    \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n  ]\n};\n\n// For convenience...\nDate.prototype.format = function (mask, utc) {\n  return dateFormat(this, mask || Gantt.utils.defaultDateFormat, utc);\n};\n\n//\n// Palette\n//\n\nclass Palette extends Gantt.components.Palette {\n  constructor(config){\n    super(config);\n    this.colorSet = null;\n    this.setConfiguration(config);\n  }\n  setConfiguration(config) {\n    let maxColorsSize = -1;\n    const addColorSet = (col, size) => {\n      if (col.length >= maxColorsSize) {\n        this.colorSet[size] = col;\n        maxColorsSize = col.length;\n      }\n      else {\n        let insert = size - 1;\n        while((insert >= 0) && (this.colorSet[insert].length < col.length)) {\n          this.colorSet[i] = this.colorSet[i - 1];\n        }\n        this.colorSet[insert === -1? 0 : insert] = col;\n      }\n    };\n\n    const getColorsFromSet = (count) => {\n      for(let index = 0, setCount = this.colorSet.length; index < setCount; ++index) {\n        if (this.colorSet[index].length >= count) {\n          return this.colorSet[index];\n        }\n      }\n      return this.colorSet.length && this.colorSet[this.colorSet.length - 1] || null;\n    };\n\n    if (Gantt.utils.isArray(config)) {\n      const count = config.length;\n      if (count) {\n        if (Gantt.utils.isArray(config[0])) {\n          // If defining a set of color collections\n          this.colorSet = new Array(count);\n          // Sort color collections in this.colorSet from the lowest number of colors to the greatest.\n          // Algo is optimized for case when receiving ordered array of color collections.\n          for(let i = 0; i < count; i++) {\n            addColorSet(config[i], i);\n          }\n          this._getColors = getColorsFromSet;\n        }\n        else {\n          this.colors = config;\n          this._getColors = () => {\n            return this.colors;\n          };\n        }\n      }\n      else {\n        this._getColors = () => { return null; };\n      }\n    }\n    else if (Gantt.utils.isFunction(config)) {\n      this._getColors = config;\n    }\n    else {\n      const keys = Object.keys(config);\n      let keyCount = keys.length, size = 0;\n      this.colorSet = new Array(keyCount);\n      for(let i = 0, val; i < keyCount; ++i) {\n        if (Gantt.utils.isArray(val = config[keys[i]])) {\n          addColorSet(val, size++);\n        }\n      }\n      if (!size || (size !== keyCount)) {\n        console.error('Unkown palette configuration ' + config);\n        console.log(config);\n        this._getColors = () => { return null; };\n        this.colorSet = null;\n      }\n      else {\n        this._getColors = getColorsFromSet;\n      }\n    }\n  }\n  \n  getColors(count) {\n    function makeResult(ar) {\n      let arLen = ar.length;\n      if ((count < 0) || (arLen === count)) return ar;\n      if (arLen > count) return ar.slice(0, count);\n      // Extremely bad temporary solution when number of required colors exceeds palette's size\n      const result = new Array(count);\n      for(let i = 0; i < count; ++i) {\n        result[i] = ar[i % arLen];\n      }\n      return result;\n    }\n    const colors = this._getColors(count);\n    return colors && makeResult(colors);\n  }\n}\n\nGantt.components.Palette.impl = Palette;\n\nGantt.defaultPaletteName = 'qualitative20';\nGantt.defaultPalettes[Gantt.defaultPaletteName] = new Palette([\n    // IBM colors. See http://www.ibm.com/design/language/framework/visual/color/\n    //'#5AA8F8', '#FFA573', '#8CD211', '#EFC100', '#AF6EE8', '#FDE876', '#FF5050', '#00B29E', '#152935', '#4178BC', '#562F72', '#C8F08F', '#FF7832', '#FDD600'\n  // '#325C80', '#2D660A', '#4178BE', '#4B8401', '#5596E6', '#5AA701', '#5AAAFA', '#8CD211', '#7CC7FF', '#B4E051', '#C0E6FF', '#C8F08F', '#1D3649', '#0A3C02'\n  //'#6EB400', '#FF7832', '#BA8FF7', '#F0F2F4'\n     //'#9655D2', '#FF71D2', '#D92780', '#FF7D85', '#FCFAFA'\n    /*'#C0E6FF', '#7CC7FF', '#5AAAFA', '#5596E6', '#4178BE', '#325C80'*/ // blue palette\n    /*\"#a6cee3\", \"#1f78b4\", \"#b2df8a\", \"#33a02c\", \"#fb9a99\", \"#e31a1c\", \"#fdbf6f\", \"#ff7f00\", \"#cab2d6\", \"#6a3d9a\" // Brewer palette*/\n    // https://releases.fr.eurolabs.ibm.com/display/OS/Design+for+GANTT+CHART\n    '#41D6C3', '#8CD211', '#5AAAFA', '#BA8FF7',\n    '#00AE9A', '#5AA600', '#4178BE', '#9855D4',\n    '#EFC100', '#FF7832', '#E71D32', '#325C80',\n    '#AC8C00', '#D74108', '#AD1625', '#1D3649',\n    '#FF71D4', '#DB2780', '#9D9393', '#645A5A'\n]);\n\nGantt.components.GanttPanel.prototype.utils = Gantt.utils;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/utils.js","/*require('../../css/error.css');*/\n\n'use strict';\n\nimport Gantt from './core';\n\nlet defaults = {\n  listClass: 'error-list fit-parent-content',\n  maxErrors: 5,\n  bodyClass: 'error-body clearfix',\n  titleClass: 'error-title',\n  barClass: 'error-bar',\n  descClass: 'error-desc',\n  detailsBtnClass: 'error-details-btn',\n  removeBtnClass: 'remove-error-btn',\n  errorExpandedDefault : true,\n  fadingOutDuration: 600\n};\n\n\nclass ErrorGroup {\n  constructor(node) {\n    this.node = node;\n    this.errs = [];\n    this.errNodes = [];\n    this.errorList = null;\n  }\n\n  addError(err, node, maxErrors) {\n    if (maxErrors && (maxErrors > 0) && (this.errs.length >= maxErrors)) {\n      this.errs.splice(0, this.errs.length - maxErrors + 1);\n      let removed = this.errNodes.splice(0, this.errNodes.length - maxErrors + 1);\n      removed.map(removedElt => {\n        this.errorList.removeChild(removedElt);\n      });\n    }\n    this.errs.push(err);\n    this.errNodes.push(node);\n    this.errorList.appendChild(node);\n    return node;\n  }\n\n  removeError(err) {\n    for (let i = 0; i < this.errs.length; i++) {\n      if ((this.errs[i] == err) || (this.errNodes[i] == err)) {\n        this.errs.splice(i, 1);\n        var nodes = this.errNodes.splice(i, 1);\n        if (nodes.length) {\n          this.errorList.removeChild(nodes[0]);\n        }\n        return true;\n      }\n    }\n  }\n\n  clear() {\n    if (this.errorList && (this.errorList.parentNode == this.node)) {\n      this.node.removeChild(this.errorList);\n    }\n    this.errs = [];\n    this.errNodes = [];\n    this.errorList = null;\n  }\n\n  updateErrorList() {\n    if (this.errorList) {\n      if (this.errs.length) {\n        this.errorList.style.display = '';\n        if (!this.errorList.parentNode) {\n          this.beforeSettingErrorList(this.node);\n          this.node.appendChild(this.errorList);\n        }\n      }\n      else {\n        this.errorList.style.display = 'none';\n      }\n    }\n  }\n\n  beforeSettingErrorList(node) {\n    while(node.firstChild) {\n      node.removeChild(node.firstChild);\n    }\n  }\n\n  hasErrors() {\n    return !!this.errs.length;\n  }\n}\n\nfunction ensureErrorGroup(node, errorGroups) {\n  for (let i = 0; i < errorGroups.length; i++) {\n    if (errorGroups[i].node == node) {\n      return errorGroups[i];\n    }\n  }\n  let errorGroup = new ErrorGroup(node);\n  errorGroups.push(errorGroup);\n  return errorGroup;\n}\n\nexport default class ErrorHandler extends Gantt.components.ErrorHandler {\n  constructor(node, config) {\n    super(Gantt.utils.mergeObjects({}, defaults, config));\n    this.node = node;\n    this.lockCount = 0;\n    this.errorGroups = [];\n  }\n\n  //noinspection JSUnusedGlobalSymbols\n  addError(err, msg, node) {\n    if (!this.lockCount) {\n      let errDetails = this.convertError(err, msg);\n      let errNode = errDetails && this.createErrorNode(err, errDetails);\n      if (errNode) {\n        let errorGroup = ensureErrorGroup(node || this.node, this.errorGroups);\n        if (!errorGroup.errorList) {\n          errorGroup.errorList = this.createErrorList();\n        }\n        errorGroup.addError(err, errNode, this.config.maxErrors);\n        errorGroup.updateErrorList();\n        return errNode;\n      }\n    }\n  }\n\n  lock() {\n    this.lockCount++;\n  }\n\n  //noinspection JSUnusedGlobalSymbols\n  unlock() {\n    --this.lockCount;\n  }\n\n  getErrors() {\n    let result = [];\n    for (let iGroup = 0, count = this.errorGroups.length; iGroup < count; ++iGroup) {\n      result = result.concat(this.errorGroups[iGroup].errs);\n    }\n    return result;\n  }\n\n  hasErrors() {\n    for (let iGroup = 0, count = this.errorGroups.length; iGroup < count; ++iGroup) {\n      if (this.errorGroups[iGroup].hasErrors()) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  createErrorList() {\n    let lst = document.createElement('ul');\n    lst.className = 'error-list';\n    return lst;\n  }\n\n  createErrorNode(err, errDetails) {\n    let node = document.createElement('li');\n    node.className = this.config.errorExpandedDefault && 'error-component error-expanded' || 'error-component';;\n\n    var errorContent = document.createElement('div');\n    errorContent.className = 'error-content clearfix';\n\n    var textContent = document.createElement('div');\n    var divTitle = document.createElement('span');\n    divTitle.innerHTML = errDetails.title;\n    divTitle.className = 'error-title';\n    divTitle.onclick = evt => this._toggleErrorDisplay(node);\n    textContent.appendChild(divTitle);\n\n    var divErrorBar = document.createElement('div');\n    divErrorBar.className = 'error-bar';\n\n    if (errDetails.desc) {\n      var divDesc = document.createElement('div');\n      divDesc.className = 'error-desc';\n      divDesc.innerHTML = errDetails.desc;\n      textContent.appendChild(divDesc);\n\n      var detailsBtn = document.createElement('span');\n      detailsBtn.tabIndex = 0;\n      detailsBtn.className = 'error-details-btn';\n      detailsBtn.innerHTML = Gantt.utils.getString('gantt.error.details');\n      detailsBtn.onclick = evt => this._toggleErrorDisplay(node);\n      divErrorBar.appendChild(detailsBtn);\n    }\n\n    // Remove error button\n    var removeErrorBtn = document.createElement('span');\n    removeErrorBtn.className = 'remove-error-btn';\n    removeErrorBtn.tabIndex = 0;\n    removeErrorBtn.onclick = evt => this.removeError(err);\n    divErrorBar.appendChild(removeErrorBtn);\n\n    errorContent.appendChild(divErrorBar);\n\n    errorContent.appendChild(textContent); // Error the text div after the bar so that the bar remains top aligned with its container\n    node.appendChild(errorContent);\n\n    return node;\n  }\n\n  convertError(err, msg) {\n    let c = this.config && this.config.convertError && this.config.convertError(err, msg);\n    if (c) {\n      return c;\n    }\n    if (Gantt.utils.isString(err)) {\n      return {\n        title: err\n      };\n    }\n    let title = err.message || err.status || err.statusCode;\n    if (msg) {\n      title = Gantt.utils.formatString('gantt.error.title.fmt', {msg: msg, title: title});\n    }\n    let desc = err.desc || err.description || err.stack;\n    if (desc) {\n      desc = desc.replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n    }\n    return {\n      title: title,\n      desc: desc\n    }\n  }\n\n  _toggleErrorDisplay(errorNode) {\n    Gantt.utils.toggleClass(errorNode, 'error-expanded');\n  }\n\n  removeError(err) {\n    for (let iGroup = 0, count = this.errorGroups.length; iGroup < count; iGroup++) {\n      if (this.errorGroups[iGroup].removeError(err)) {\n        this.errorGroups[iGroup].updateErrorList();\n        return true;\n      }\n    }\n    return false;\n  }\n  \n  removeGroup(node) {\n    for (let iGroup = 0, count = this.errorGroups.length; iGroup < count; iGroup++) {\n      if (this.errorGroups[iGroup].node === node) {\n        this.errorGroups[iGroup].clear();\n        this.errorGroups.splice(iGroup, 1);\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nGantt.components.ErrorHandler.impl = ErrorHandler;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/error.js","'use strict';\n\nimport Gantt from './core';\n\nclass Filter {\n  constructor(options) {\n    this.filters = [];\n    this.filterKeys = [];\n    if (options) {\n      if (Array.isArray(options)) {\n        for (var i = 0; i < options.length; i++) {\n          this.addFilter(options[i]);\n        }\n      }\n      else {\n        this.addFilter(options);\n      }\n    }\n  }\n\n  addFilter(filter) {\n    var filterKey = filter;\n    filter = this.createFilter(filter);\n    if (filter) {\n      this.filters.push(filter);\n      this.filterKeys.push(filterKey);\n    }\n    return filter;\n  }\n\n  addOrFilters() {\n    var params = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      params[i] = arguments[i];\n    }\n    var filter = this.createFilterSet(params, true);\n    if (filter) {\n      this.filters.push(filter);\n      this.filterKeys.push(filter);\n    }\n    return filter;\n  }\n\n  addAndFilters() {\n    var params = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      params[i] = arguments[i];\n    }\n    var filter = this.createFilterSet(params, false);\n    if (filter) {\n      this.filters.push(filter);\n      this.filterKeys.push(filter);\n    }\n    return filter;\n  }\n\n  static get DEFAULT_FILTER_SET_MODE_OR() {\n    return false;\n  }\n\n  createFilterSet() {\n    if (!arguments.length) {\n      return null;\n    }\n    var paramList, orFilter, i, filter;\n    if (Array.isArray(arguments[0])) {\n      paramList = arguments[0];\n      orFilter = arguments.length > 1 ? arguments[1] : this.DEFAULT_FILTER_SET_MODE_OR;\n    }\n    else {\n      var copyLength;\n      orFilter = arguments[arguments.length - 1];\n      if (typeof orFilter !== 'boolean') {\n        orFilter = this.DEFAULT_FILTER_SET_MODE_OR;\n        copyLength = arguments.length;\n      }\n      else {\n        copyLength = arguments.length - 1;\n      }\n      paramList = new Array(copyLength);\n      for (i = 0; i < copyLength; i++) {\n        paramList[i] = arguments[i];\n      }\n    }\n    var filterList = [];\n    for (i = 0; i < paramList.length; i++) {\n      filter = this.createFilter(paramList[i]);\n      if (filter) {\n        filterList.push(filter);\n      }\n    }\n    if (filterList.length) {\n      filter = orFilter\n        ? function (args) {\n        for (var f = 0; f < filterList.length; f++) {\n          if (filterList[f](args)) {\n            return true;\n          }\n        }\n        return false;\n      }\n        : function (args) {\n        for (var f = 0; f < filterList.length; f++) {\n          if (!filterList[f](args)) {\n            return false;\n          }\n        }\n      };\n      return filter;\n    }\n    return null;\n  }\n\n  removeFilter(filter) {\n    var index = this.filters.indexOf(filter);\n    if (index < 0) {\n      index = this.filterKeys.indexOf(filter);\n    }\n    if (index > -1) {\n      this.filters.splice(index, 1);\n      this.filterKeys.splice(index, 1);\n      return true;\n    }\n    return false;\n  }\n\n  createFilter(filter) {\n    if (filter !== undefined) {\n      var self = this;\n      if (typeof filter === 'string') {\n        return filter && function () {\n            var params = arguments[0];\n            params.push(filter);\n            var result = self.acceptString.apply(self, params);\n            params.pop();\n            return result;\n          } || function () {\n            return true;\n          };\n      }\n      else if (typeof filter == \"function\") {\n        return function () {\n          return filter.apply(self, arguments[0]);\n        };\n      }\n      else if (filter[this.getObjectFilterMethodName()]) { // Filter is an object with the appropriate filter method\n        var fct = filter[this.getObjectFilterMethodName()];\n        return function () {\n          return fct.apply(filter, arguments[0]);\n        };\n      }\n      else if (filter.or) {\n        return this.createFilterSet(filter.or, true);\n      }\n      else if (filter.and) {\n        return this.createFilterSet(filter.and, false);\n      }\n      else {\n        console.log('Cannot process filter:');\n        console.log(filter);\n      }\n    }\n    else {\n      console.log('Null filter specified');\n    }\n    return null;\n  }\n\n  accept() {\n    var params = [], i;\n    for (i = 0; i < arguments.length; i++) {\n      params.push(arguments[i]);\n    }\n\n    for (i = 0; i < this.filters.length; i++) {\n      if (!this.filters[i].call(this, params)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  setFilter(filter) {\n    this.filters = [];\n    this.filterKeys = [];\n    var params = [], i;\n    for (i = 0; i < arguments.length; i++) {\n      params.push(arguments[i]);\n    }\n    this.addFilter.apply(this, params);\n  }\n\n  stringMatches(string, pattern) {\n    return string.indexOf(pattern) > -1;\n  }\n\n  acceptString(object, str) {\n  }\n\n  getObjectFilterMethodName() {\n    return 'accept';\n  }\n\n  isEmpty() {\n    return this.filters.length === 0;\n  }\n}\n\nGantt.components.Filter.impl = Filter;\n\nexport default Filter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/filter.js","'use strict';\n\nimport Gantt from './core';\n\nclass GanttUpdates extends Gantt.components.GanttUpdates {\n    constructor(parent, proto) {\n        super(parent);\n        this.children = [];\n        this.updates = [];\n        this.updateLocks = 0;\n        this._reload = false;\n        if (parent) {\n            parent.children.push(this);\n        }\n        if (proto) {\n            Gantt.utils.mergeObjects(this, proto);\n        }\n        this._containsRowChanges = false;\n        this._tableYScrollChanged = false;\n    }\n\n    reload() {\n        this._reload = true;\n        this._containsRowChanges = true;\n    }\n    \n    isReload() {\n        return this._reload || (this.parent && this.parent.isReload());\n    }\n    \n    rowsChanged(event, rows, rowRef) {\n        this.addUpdate({ type : event, rows : rows, rowRef : rowRef });\n        this._containsRowChanges = true;\n    }\n\n    addUpdate(update) {\n        this.updates.push(update);\n    }\n\n    removeUpdate(update) {\n        const index = this.updates.indexOf(update);\n        if (index >= 0) {\n            this.updates.splice(index, 1);\n        }\n\n        for(let i = 0, count = this.children? this.children.length : 0; i < count; i++) {\n            this.children[i].removeUpdate(update);\n        }\n    }\n\n    tableScrollYChanged() {\n        this._tableYScrollChanged = true;\n    }\n\n    hasTableScrollYChanged() {\n        return this._tableYScrollChanged || (this.parent && this.parent.hasTableScrollYChanged());\n    }\n\n    startUpdating() { ++this.updateLocks; }\n    stopUpdating() {\n        if (--this.updateLocks === 0) {\n            this.applyUpdates();\n            return true;\n        }\n        return false;\n    }\n\n    applyUpdates() {\n        this.doApplyUpdates();\n        this.updates = [];\n        this._reload = false;\n        for(let i = 0, count = this.children? this.children.length : 0; i < count; i++) {\n            this.children[i].applyUpdates();\n        }\n        this._containsRowChanges = false;\n    }\n\n    containsRowChanges() {\n        return this._containsRowChanges || (this.parent && this.parent.containsRowChanges());\n    }\n\n    applyReload() {\n\n    }\n\n    doApplyUpdates() {\n        if (this._reload) {\n            this.applyReload();\n        }\n        else {\n            for(let iUpdate = 0, count = this.updates.length; iUpdate < count; iUpdate++) {\n                this.applyUpdate(this.updates[iUpdate]);\n            }\n        }\n    }\n\n    applyUpdate(update) {\n\n    }\n\n    destroy() {\n        for(let i = 0, count = this.children? this.children.length : 0; i < count; i++) {\n            this.children[i].destroy();\n        }\n        this.children = null;\n    }\n}\n\nGantt.components.GanttUpdates.impl = GanttUpdates;\n\n\n// WEBPACK FOOTER //\n// ./src/core/updates.js","'use strict';\n\nimport Gantt from './core';\n\nvar idCount = 1;\n\nfunction makeId(prefix) {\n    return prefix + idCount++;\n}\n\nvar checkClass;\nfunction Checkbox(gantt, config) {\n    if (!checkClass) {\n        checkClass = Gantt.components.CheckBox.impl || Gantt.components.CheckBox;\n    }\n    return new checkClass(gantt, config);\n}\n\nvar buttonClass;\nfunction Button(gantt, config) {\n    if (!buttonClass) {\n        buttonClass = Gantt.components.Button.impl || Gantt.components.Button;\n    }\n    return new buttonClass(gantt, config);\n}\n\nvar selectClass;\nfunction Select(gantt, config) {\n    if (!selectClass) {\n        selectClass = Gantt.components.DropDownList.impl || Gantt.components.DropDownList;\n    }\n    return new selectClass(gantt, config);\n}\n\nvar toggleClass;\nfunction Toggle(gantt, config) {\n    if (!toggleClass) {\n        toggleClass = Gantt.components.Toggle.impl || Gantt.components.Toggle;\n    }\n    return new toggleClass(gantt, config);\n}\n\nconst ToolbarComponents = {\n    title : {\n        node : function(parentElt, gantt) {\n            const node = Gantt.components.Toolbar.createTitle(gantt.getTitle());\n            gantt.on(Gantt.events.TITLE_CHANGED, (event, title) => {\n                node.innerHTML = title;\n            });\n            return node;\n        },\n\n        justifyLeft : true\n    },\n    separator : {\n        node : function(parentElt) {\n            const sep = document.createElement('div');\n            sep.className = 'separator';\n            return sep;\n        }\n    },\n    whitespace : {\n        node : function(parentElt) {\n            const sep = document.createElement('div');\n            sep.className = 'white-space';\n            return sep;\n        }\n    },\n\n    search : {\n        component(gantt) {\n            return  new(Gantt.components.Input.impl || Gantt.components.Input)(gantt, {\n                type : 'search',\n                onchange : function(text) {\n                    gantt.search(text, true, true);\n                }\n            });\n        }\n    },\n    mini : {\n        component(gantt) {\n            return new Toggle(gantt, {\n                unselected : {\n                    /*text : Gantt.utils.getString('gantt.toolbar.minimize.text'),*/\n                    tooltip : Gantt.utils.getString('gantt.toolbar.mini.tooltip'),\n                    /*fontIcon : \"fa fa-compress fa-lg\"*/\n                    svg : {\n                        width: 20,\n                        height: 20,\n                        viewBox : \"0 0 16 16\",\n                        margin: \"-6px 0 0 0 \",\n                        paths: [\"M4 5h16v2H4zM4 9h16v2H4zM4 13h16v2H4zM4 17h16v2H4z\"]\n                    }\n                },\n                selected : {\n                    /*fontIcon : \"fa fa-expand fa-lg\",*/\n                    /*text : Gantt.utils.getString('gantt.toolbar.normal.text'),*/\n                    tooltip : Gantt.utils.getString('gantt.toolbar.mini.tooltip'),\n                    svg : {\n                        width: 24,\n                        height: 24,\n                        viewBox : \"0 0 24 24\",\n                        paths: [\"M4 5h16v2H4zM4 9h16v2H4zM4 13h16v2H4zM4 17h16v2H4z\"]\n                    }\n                },\n                isSelected : function() {\n                    const ganttNode = gantt.getPanelNode();\n                    return Gantt.utils.hasClass(ganttNode, 'mini');\n                },\n\n                onclick : function() {\n                    const ganttNode = gantt.getPanelNode();\n                    Gantt.utils.toggleClass(ganttNode, 'mini');\n                    gantt.draw();\n                }\n            });\n        },\n\n        update(gantt, rows, comp) {\n            const ganttNode = gantt.getPanelNode();\n            comp.setChecked(Gantt.utils.hasClass(ganttNode, 'mini'));\n        }\n    /*    template : \"<div class='rounded-check' style='white-space: nowrap;'> \\\n                        <input type='checkbox' value='None' name='check' id='{id}'/> \\\n                        <label for='{id}'>{label}</label> \\\n                     </div>\",*/\n    },\n\n    fitToContent : {\n        component(gantt) {\n            return Button(gantt, {\n                /*fontIcon : 'fa fa-arrows fa-lg',*/\n                // Edited with http://editor.method.ac/\n                svg : {\n                    width: 20,\n                    height: 20,\n                    viewBox : \"0 0 24 24\",\n                    paths: [\"m9,3c3.309,0 6,2.691 6,6s-2.691,6 -6,6s-6,-2.691 -6,-6s2.691,-6 6,-6m0,-2a8,8 0 1 0 0,16a8,8 0 0 0 0,-16zm6,17l3,-3l5,5l-3,3l-5,-5z\",\n                    \"m5.067202,10.936161l1.794565,-1.677985l-1.794565,-1.677997l1.025685,-0.958955l2.820467,2.636953l-2.820467,2.637771\",\n                    \"m13.211615,7.601521l-1.74349,1.712784l1.74349,1.712783l-0.996386,0.979422l-2.739875,-2.692204l2.739875,-2.69241\"]\n                },\n                tooltip : Gantt.utils.getString('gantt.toolbar.fit.tooltip'),\n                onclick : function() {\n                    gantt.fitToContent();\n                }\n            });\n        }\n    },\n\n    refresh : {\n        component(gantt) {\n            return Button(gantt, {\n                fontIcon : 'fa fa-refresh fa-lg',\n                /*svg : {\n                    width: 24,\n                    height: 40,\n                    margin: '-6px 2px 0 0',\n                    viewBox : \"0 0 24 24\",\n                    paths: [\"M2 13.987c0-4.97 4.032-8.994 9-8.994h7l-2.5-2.506L17 1l5 4.987-5 5-1.5-1.5 2.5-2.5h-6.864c-3.867 0-7.136 3.133-7.136 7S7.146 21 11.013 21a7.034 7.034 0 0 0 5.185-2.29l1.478 1.348A9.067 9.067 0 0 1 11 23c-4.97 0-9-4.043-9-9.013z\"]\n                },*/\n                text: Gantt.utils.getString('gantt.toolbar.refresh.text'),\n                tooltip : Gantt.utils.getString('gantt.toolbar.fit.tooltip'),\n                onclick : function() {\n                    gantt.draw();\n                }\n            });\n        }\n    },\n\n    zoomIn : {\n        component(gantt) {\n            return Button(gantt, {\n                /*classes: 'zoom-in',*/\n                /*fontIcon : 'fa fa-search-plus fa-lg',*/\n                svg : {\n                    width: 20,\n                    height: 20,\n                    viewBox : \"0 0 24 24\",\n                    paths: [\"M9 1a8 8 0 1 0 0 16A8 8 0 0 0 9 1zm0 14c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM15 18l3-3 5 5-3 3z\",\n                            \"M10 5H8v3H5v2h3v3h2v-3h3V8h-3z\"]\n                },\n                tooltip : Gantt.utils.getString('gantt.toolbar.zoomIn.tooltip'),\n                onclick : function() {\n                    gantt.zoomIn();\n                }\n            });\n        }\n    },\n\n    zoomOut : {\n        component(gantt) {\n            return Button(gantt, {\n                /*classes: 'zoom-out',*/\n                /*fontIcon : 'fa fa-search-minus fa-lg',*/\n                svg : {\n                    width: 20,\n                    height: 20,\n                    /*margin: '-2px 0 0 0',*/\n                    viewBox : \"0 0 24 24\",\n                    paths: [\"M9 3c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6m0-2a8 8 0 1 0 0 16A8 8 0 0 0 9 1zM14.999 18l3-3 5 5-3 3z\",\n                        \"M9 3c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6m0-2a8 8 0 1 0 0 16A8 8 0 0 0 9 1z\",\n                        \"M5 8h8v2H5z\"]\n                },\n                tooltip : Gantt.utils.getString('gantt.toolbar.zoomOut.tooltip'),\n                onclick : function() {\n                    gantt.zoomOut();\n                }\n            });\n        }\n    },\n\n    toggleLoadChart : {\n        component(gantt) {\n            return new Toggle(gantt, {\n                unselected : {\n                    classes: 'toggle-load-chart',\n                    fontIcon : 'fa fa-bar-chart fa-lg',\n                    tooltip : Gantt.utils.getString('gantt.loadResourceChart.show.tooltip')\n                },\n                selected : {\n                    classes: 'toggle-load-chart selected',\n                    fontIcon : 'fa fa-bar-chart fa-lg',\n                    tooltip : Gantt.utils.getString('gantt.loadResourceChart.hide.tooltip')\n                },\n                isSelected : function() {\n                    return gantt.isLoadChartVisible();\n                },\n\n                onclick : function() {\n                    gantt.toggleLoadChartVisible();\n                }\n            });\n        }\n    }\n};\n\nclass Toolbar extends Gantt.components.Toolbar {\n    constructor(gantt, node, config) {\n        super(gantt, node, config);\n    }\n    \n    setConfiguration(config, toolbarNode) {\n        this.components = [];\n        let leftBar = null;\n\n        function append(comp, handler) {\n            if (handler.justifyLeft) {\n                if (!leftBar) {\n                    leftBar = document.createElement('div');\n                    leftBar.style.display = 'flex';\n                    leftBar.style.flexDirection = 'row';\n                    leftBar.style.alignItems = 'center';\n                    leftBar.style.marginRight = 'auto';\n                    leftBar.className = 'left-toolbar-body';\n                    toolbarNode.appendChild(leftBar);\n                }\n                leftBar.appendChild(comp.node);\n            }\n            else {\n                toolbarNode.appendChild(comp.node);\n            }\n        }\n        for(let i = 0, count = config.length, cfgNode, handler, node, comp; i < count; i++) {\n            cfgNode = config[i];\n            if (Gantt.utils.isString(cfgNode)) {\n                handler = ToolbarComponents[cfgNode];\n            }\n            else {\n                handler = cfgNode;\n            }\n\n            if (!handler.node) {\n                if (handler.component) {\n                    comp = handler.component(this.gantt, toolbarNode);\n                    if (comp.node && !comp.node.parentNode) {\n                        append(comp, handler);\n                    }\n                }\n                else if (handler.template) {\n                    comp = { id : handler.id !== undefined\n                        ? (Gantt.utils.isFunction(handler.id)? handler.id(handler) : handler.id)\n                        : makeId(Gantt.utils.isString(cfgNode)? cfgNode : \"toolbarComp\") };\n                    comp.node = document.createElement('div');\n                    let tpl = Gantt.utils.formatString(handler.template, comp);\n                    Gantt.utils.html(comp.node, tpl);\n                    append(comp, handler);\n                }\n                else if (handler.type) {\n                    if (handler.type === 'button') {\n                        comp = Button(this.gantt, handler);\n                    }\n                    else if (handler.type === 'checkbox') {\n                        comp = Checkbox(this.gantt, handler);\n                    }\n                    else if (handler.type === 'select') {\n                        comp = Select(this.gantt, handler);\n                    }\n                    else if (handler.type === 'buttonGroup') {\n                        comp = new (Gantt.components.ButtonGroup.impl || Gantt.components.ButtonGroup)(this.gantt, handler);\n                    }\n                    else if (handler.type === 'separator') {\n                        handler = ToolbarComponents.separator;\n                        comp = {};\n                        comp.node = handler.node(toolbarNode, this.gantt, comp);\n                    }\n                    else {\n                        throw new Error('Unknown toolbar component type: ' + config.type);\n                    }\n                    if (comp.node && !comp.node.parentNode) {\n                        append(comp, handler);\n                    }\n                }\n                else {\n                    throw new Error('a node property must be specified in a toolbar element: ' + cfgNode);\n                }\n            }\n            else if (Gantt.utils.isString(handler.node)) {\n                comp = { id : handler.node, node : document.getElementById(handler.node) };\n            }\n            else if (Gantt.utils.isFunction(handler.node)) {\n                comp = {};\n                comp.node = handler.node(toolbarNode, this.gantt, comp);\n                append(comp, handler);\n            }\n            else {\n                throw new Error(\"The node property of a toolbar element must be either a string ID or a function creating a Dom element\");\n            }\n\n            if (handler.id) {\n                comp.setId(handler.id);\n            }\n\n            if (handler.connect) {\n                handler.connect(comp.node, comp);\n            }\n            if (handler.update) {\n                comp.update = (gantt, rows)=> {\n                    handler.update(gantt, rows, comp);\n                }\n            }\n            if (cfgNode.id) comp.id = cfgNode.id;\n            this.components.push(comp);\n        }\n        this.initTooltip();\n    }\n\n    onInitialized() {\n        this.components.forEach((c) => {\n            if (c.onInitialized) {\n                c.onInitialized();\n            }\n        });\n    }\n\n    initTooltip() {\n        const tooltbar = this;\n        function getTooltipNode(elt) {\n            for(;elt && (elt !== tooltbar.node); elt = elt.parentNode) { // Can be called with an elt outside the toolbar\n                if (elt.dataset && elt.dataset.tooltip) {\n                    return elt;\n                }\n            }\n        }\n        this.gantt.tooltip.installTooltip({\n            // The container that contains elements to display tooltip for.\n            container: this.node,\n            // The container inside which bounds the tooltip can be displayed\n            getTooltipDisplayContainer() { return tooltbar.gantt.getBody(); },\n            // Returns an element in the node hierarchy for which a tooltip can be displayed\n            getTooltipElement(node) { return getTooltipNode(node); },\n            renderTooltip(tooltipNode /* The element returned by getTooltipElement */,\n                          act /* data returned by getTooltipData for the specified tooltipElt */,\n                          tooltipCtnr /* The container of the tooltip to fill with info. */) {\n                tooltipCtnr.appendChild(document.createTextNode(tooltipNode.dataset.tooltip))\n            }\n        });\n    }\n\n    connect(gantt) {\n    }\n\n    ganttLoaded(gantt, rows) {\n        for(let i = 0, count = this.components.length, comp; i < count; ++i) {\n            comp = this.components[i];\n            if (comp.update) {\n                comp.update(gantt, rows);\n            }\n        }\n    }\n\n    destroy() {\n        \n    }\n}\n\nGantt.components.Toolbar.impl = Toolbar;\n\n/*                    */\n/* Toolbar components */\n/*                    */\n\nclass FlatCheckbox extends Gantt.components.CheckBox {\n    constructor(gantt, config) {\n        super(gantt, config);\n    }\n\n    setConfiguration(config) {\n        const btn = document.createElement('div');\n        if (config.id) {\n            btn.id = config.id;\n        }\n        btn.className = 'button g-hoverable g-selectable' + (config.classes? (' ' + config.classes) : '');\n        if (config.icon) {\n            const img = document.createElement('img');\n            img.src = config.icon;\n            img.alt = '';\n            btn.appendChild(img);\n        }\n        if (config.fontIcon) {\n            const fontIcon = document.createElement('i');\n            fontIcon.className = config.fontIcon + (config.text? ' fa-fw' : '');\n            btn.appendChild(fontIcon);\n        }\n        if (config.text) {\n            btn.appendChild(document.createTextNode(config.text));\n        }\n        this.node = btn;\n        btn.onclick = (e)=> {\n            Gantt.utils.toggleClass(btn, 'selected');\n            if (config.onclick) {\n                config.onclick(this.gantt);\n            }\n        };\n        return btn;\n    }\n}\n\nGantt.components.CheckBox.impl = FlatCheckbox;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/toolbar.js","import Gantt from './core';\n\nconst ARROW_STYLE = 'gantt-tooltip-arrow';\nconst BOTTOM_ARROW_STYLE = 'bottom-arrow';\nconst TOP_ARROW_STYLE = 'top-arrow';\n\nclass Tooltip extends Gantt.components.Tooltip {\n    constructor(options) {\n        super(options);\n        this._tooltip = document.createElement('div');\n        this._tooltip.className = 'gantt-tooltip';\n        this._tooltip.style.position = \"fixed\";\n        this._tooltip.style.visibility = 'hidden';\n\n        // Cannot have the arrow defined in CSS as the arrow position on the tooltip varies.\n        this._tooltipArrow = document.createElement('div');\n        this._tooltipArrow.style.position = \"absolute\";\n        this._tooltipArrow.style.width = '0';\n        this._tooltipArrow.style.height = '0';\n        this._arrowHeight = 5;\n        this._tooltip.appendChild(this._tooltipArrow);\n        document.body.appendChild(this._tooltip);\n\n        Gantt.utils.addEventListener(this._tooltip, 'mouseenter', (evt) => {\n            if (this._hideTimer !== undefined) {\n                clearTimeout(this._hideTimer);\n                this._hideTimer = null;\n                this._hidingElt = null;\n            }\n        }, true); // Capturing!\n        Gantt.utils.addEventListener(this._tooltip, 'mouseleave', (evt) => {\n            if (evt.target === this._tooltip) {\n                this.hideTooltip(300);\n            }\n        }, true); // Capturing!*/\n    }\n\n    showTooltip(elt, ctx, cb) {\n        if (elt === this._tooltipElt) return;\n        if (this._hideTimer !== undefined) {\n            clearTimeout(this._hideTimer);\n            delete this._hideTimer;\n            const hidingElt = this._hidingElt;\n            this._hidingElt = null;\n            if (hidingElt === elt) {\n                return;\n            }\n        }\n        // tooltip associated with same data is already showing.\n        if (this._showTimer !== undefined) {\n            if (this._tooltipElt === elt) {\n                // tooltip associated with same data is about to show, do nothing\n                return;\n            }\n            clearTimeout(this._showTimer);\n            delete this._showTimer;\n            this._tooltipElt = null;\n        }\n        this._tooltip.innerHTML = '';\n        if (arguments.length === 2) {\n            cb = ctx;\n            ctx = null;\n        }\n        cb(this._tooltip);\n        this._tooltip.style.visibility = 'hidden';\n        this._tooltip.style.left = this._tooltip.style.top = 0; // If tooltip is a the right/bottom of the page, its processed sized can be cut, before display\n        this._tooltip.style.maxHeight = 'none';\n        const tooltipHeight = this._tooltip.offsetHeight + this._arrowHeight;\n\n        var eltScreenPt = Gantt.utils.getScreenPoint(elt);\n\n        // Process the limit bounds in which to display the tooltip\n        let limits;\n        if (ctx && ctx.limitElt) {\n            var bounds = ctx.limitElt.getBoundingClientRect();\n            var scrollLeft = Gantt.utils.getWindowScrollLeft();\n            var scrollTop = Gantt.utils.getWindowScrollTop();\n            limits = {\n                x : Math.max(bounds.left + scrollLeft + (bounds.left < 0? bounds.lef : 0), 0),\n                y : Math.max(bounds.top + scrollTop + (bounds.left < 0? bounds.lef : 0), 0)\n            };\n            //limits = Gantt.utils.getScreenPoint(ctx.limitElt);\n            limits.width = Math.min(document.documentElement.clientWidth, bounds.right + scrollLeft) - Math.max(bounds.left, 0);\n            limits.height = Math.min(document.documentElement.clientHeight, bounds.bottom + scrollTop) - Math.max(bounds.top, 0);\n        }\n        else {\n            limits = { x: 0, y: 0, width: document.body.offsetWidth, height: document.body.offsetHeight };\n        }\n\n        // Display the tooltip at the top or the bottom of the specified element?\n        // Prefer top\n        let topAvailHeight, bottomAvailHeight, arrowStyle, arrowPos;\n        if ((eltScreenPt.y - tooltipHeight) >= limits.y) {\n            eltScreenPt.y-= tooltipHeight;\n            this._tooltip.style.maxHeight = 'none';\n            arrowStyle = BOTTOM_ARROW_STYLE;\n        }\n        // Otherwise, if displaying the tooltip at the bottom works, go for it\n        else if ((eltScreenPt.y + tooltipHeight + elt.offsetHeight) <= (limits.y + limits.height)) {\n            eltScreenPt.y+= elt.offsetHeight + this._arrowHeight;\n            this._tooltip.style.maxHeight = 'none';\n            arrowStyle = TOP_ARROW_STYLE;\n        }\n        // Otherwise, display on top if more space available on top\n        else if ((topAvailHeight = (eltScreenPt.y - limits.y)) >\n            (bottomAvailHeight = (limits.y + limits.height - eltScreenPt.y - elt.offsetHeight))) {\n            eltScreenPt.y = limits.y;\n            this._tooltip.style.maxHeight = (topAvailHeight - this._arrowHeight) + 'px';\n            arrowStyle = BOTTOM_ARROW_STYLE;\n        }\n        // Display at the bottom\n        else {\n            eltScreenPt.y+= elt.offsetHeight + this._arrowHeight;\n            this._tooltip.style.maxHeight = (bottomAvailHeight - this._arrowHeight) + 'px';\n            arrowStyle = TOP_ARROW_STYLE;\n        }\n\n        // Adjust horizontal position\n        function adjustHorizontally(x, limitLeft, limitRight) {\n            return Math.max(Math.min(x, limitRight), limitLeft);\n        }\n        const arrowMargin = 10; // Arrow cannot start at the left or right border of the tooltip because of the round border of the tooltip. Suggesting 10px as the minimum space from the tooltip border\n        arrowPos = eltScreenPt.x + (elt.offsetWidth / 2); // Ideal x screen position of the arrow\n        if (limits.width <= this._tooltip.offsetWidth) {\n            eltScreenPt.x = limits.x;\n            this._tooltip.style.maxWidth = limits.width + 'px';\n        }\n        else {\n            eltScreenPt.x = adjustHorizontally(eltScreenPt.x + (elt.offsetWidth / 2) - (this._tooltip.offsetWidth / 2), limits.x, limits.x + limits.width - this._tooltip.offsetWidth);\n            this._tooltip.style.maxWidth = 'none';\n        }\n        arrowPos = adjustHorizontally(arrowPos - eltScreenPt.x, arrowMargin, this._tooltip.offsetWidth - arrowMargin);\n        this.setArrowPosition(arrowStyle, arrowPos);\n        this._tooltip.appendChild(this._tooltipArrow); // Previously removed with innerHTML = '';\n        this._tooltip.style.top = eltScreenPt.y + 'px';\n        this._tooltip.style.left = eltScreenPt.x + 'px';\n        this._tooltipElt = elt;\n        if (ctx && ctx.showDelay) {\n            this._showTimer = setTimeout(() => {\n                delete this._showTimer;\n                this._tooltip.style.visibility = 'visible';\n            }, ctx.showDelay);\n        }\n        else {\n            this._tooltip.style.visibility = 'visible';\n        }\n    }\n\n    setArrowPosition(style, pos) {\n        this._tooltipArrow.className = ARROW_STYLE + ' ' + style;\n        if (style === TOP_ARROW_STYLE) {\n            //this._tooltipArrow.style.top = 0;\n            this._tooltipArrow.style.left = pos + 'px';\n        }\n        else if (style === BOTTOM_ARROW_STYLE) {\n            //this._tooltipArrow.style.top = '100%';\n            this._tooltipArrow.style.left = pos + 'px';\n        }\n    }\n\n    hideTooltip(millis, cb) {\n        if (this._showTimer !== undefined) {\n            clearTimeout(this._showTimer);\n            this._tooltipElt = null;\n            delete this._showTimer;\n            // If about to show a tooltip, no tooltip to hide.\n            return;\n        }\n        // If no tooltip shown, nothing to hide\n        if (!this._tooltipElt) return;\n        if (millis) {\n            if (this._hideTimer) {\n                return;\n            }\n            this._hideCB = cb;\n            this._hidingElt = this._tooltipElt;\n            this._hideTimer = setTimeout(() => {\n                this._hideTimer = null;\n                this._hidingElt = null;\n                this._tooltipElt = null;\n                if (this._hideCB) {\n                    this._hideCB();\n                }\n                this._hideCB = null;\n                this._tooltip.style.display = 'none';\n            }, millis);\n        }\n        else {\n            if (cb) {\n                cb();\n            }\n            this._tooltipElt = null;\n            this._tooltip.style.display = 'none';\n        }\n    }\n\n    installTooltip(config) {\n        const TOOLTIP_FADING_TIME = 1000;\n        const TOOLTIP_SHOWING_DELAY = 800;\n\n        Gantt.utils.addEventListener(config.container, 'mouseenter', (evt) => {\n            //console.log('Enter ' + printElement(evt.target) + ', relatedTarget: ' + (evt.relatedTarget && printElement(evt.relatedTarget) || 'none'));\n            const tooltipNode = config.getTooltipElement(evt.target);\n            if (tooltipNode) {\n                let tooltipData = config.getTooltipData && config.getTooltipData(tooltipNode);\n                if (config.enteringTooltipElement && (config.enteringTooltipElement(tooltipNode, tooltipData) === false)) {\n                    // During a drag n drop for example.\n                    return;\n                }\n                const ctx = {\n                    limitElt: config.getTooltipDisplayContainer && config.getTooltipDisplayContainer() || document.body,\n                    showDelay : TOOLTIP_SHOWING_DELAY\n                };\n                //console.log('   show tooltip: ' + tooltipNode);\n                this.showTooltip(tooltipNode, ctx, (parent) => {\n                    config.renderTooltip(tooltipNode, tooltipData, parent);\n                });\n            }\n            else {\n                this.hideTooltip(TOOLTIP_FADING_TIME);\n            }\n        }, true);\n        Gantt.utils.addEventListener(config.container, 'mouseleave', (evt) => {\n            //console.log('Leave ' + printElement(evt.target) + ', relatedTarget: ' + (evt.relatedTarget && printElement(evt.relatedTarget) || 'none'));\n            const tooltipNode = config.getTooltipElement(evt.target);\n            if (tooltipNode) {\n                if (this._tooltipElt === tooltipNode) {\n                    const tooltipData = config.getTooltipData && config.getTooltipData(tooltipNode);\n                    if (config.leavingTooltipElement && (config.leavingTooltipElement(tooltipNode, tooltipData) === false)) {\n                        // To leave displayed the tooltip after leaving the element we show the tooltip for.\n                        return;\n                    }\n                    if (evt.relatedTarget && (config.getTooltipElement(evt.relatedTarget) === tooltipNode)) {\n                        // If the element the mouse is moving in is still in the tooltip node, do nothing.\n                        return;\n                    }\n                }\n                // Otherwise hide the tooltip\n                this.hideTooltip(TOOLTIP_FADING_TIME);\n            }\n        }, true);\n    }\n}\n\nGantt.components.Tooltip.impl = Tooltip;\n\nfunction printElement(elt) {\n    return elt.tagName + (elt.id? ('#' + elt.id) : '') + (elt.className && elt.className.replace? ('.' + elt.className.replace(/ /g, '.')) : '');\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/tooltip.js","'use strict';\n\nimport Gantt from './core';\n\nconst AUTOMATIC_COLOR = 'automatic';\nconst TEXT_OVERFLOW_ELLIPSIS = 'ellipsis';\nconst TEXT_OVERFLOW_NO_DISPLAY = 'noDisplay';\nconst TEXT_OVERFLOW_CUT = 'cut';\n\nfunction createSelectorFunction(selector, fct, oldFct, fctCtx) {\n    return fct && function(object, ctx, ext) {\n            if (!selector || selector(object, ctx)) {\n                return fctCtx? fct.call(fctCtx, object, ctx, ext) : fct(object, ctx, ext);\n            }\n            return oldFct && oldFct(object, ctx, ext) || undefined;\n        };\n}\n\nexport default class Renderer extends Gantt.components.Renderer {\n    constructor(config, proto, paletteHandler) {\n        super(config, proto, paletteHandler);\n    }\n\n    draw(object, parentElt, ctx) {\n        var shapeElt = this.createShape && this.createShape(object, parentElt, ctx) || null;\n        if (this.getCSS) {\n            var css = this.getCSS(object, ctx);\n            if (css) {\n                this.setCSS(shapeElt || parentElt, css);\n            }\n        }\n        if ((this.getText || this.getIcon) && this.drawContent) {\n            var text = this.getText && this.getText(object, ctx);\n            var icon = this.getIcon && this.getIcon(object, ctx);\n            this.drawContent(shapeElt || parentElt, icon, text, object, ctx);\n        }\n        let bg;\n        if (this.background) {\n            this.setBackground(shapeElt, bg = this.background(object, ctx));\n        }\n        if (this.color) {\n            this.setColor(shapeElt, this.color(object, ctx, bg));\n        }\n        if (parentElt && (shapeElt != parentElt)) {\n            parentElt.appendChild(shapeElt);\n        }\n        return shapeElt;\n    }\n\n    setBackground(shapeElt, bg) {\n        shapeElt.style.backgroundColor = bg;\n    }\n\n    setColor(shapeElt, c) {\n        shapeElt.style.color = c;\n    }\n\n    setCSS(elt, classname) {\n        if (classname) {\n            elt.className = elt.className && (elt.className + ' ' + classname) || classname;\n        }\n    }\n\n    //noinspection JSUnusedLocalSymbols\n    createShape(object, parentElt, ctx) {\n        return null;\n    }\n\n    //noinspection JSUnusedLocalSymbols\n    drawContent(elt, icon, text, object, ctx) {\n        this.drawDefaultContent(elt, icon, text, object, ctx);\n    }\n\n    drawNoDisplayOverflowContent(elt, icon, text, object, ctx) {\n        const ctnt = document.createElement('div');\n        ctnt.className = 'content';\n        ctnt.style.overflow = 'hidden';\n        ctnt.style.display = 'flex';\n        /*ctnt.style.alignItems = 'center';*/ // Cannot used as issue with FF https://github.ibm.com/IBMDecisionOptimization/dd-gantt-component/issues/14\n        ctnt.style.justifyContent = 'center';\n        ctnt.style.left = '0';\n        ctnt.style.top = '0';\n        ctnt.style.bottom = '0';\n        ctnt.style.right = '0';\n        ctnt.style.position = 'absolute';\n        ctnt.style.flexWrap = 'wrap';\n\n        if (icon) {\n            const img = document.createElement('img');\n            img.className = 'image-content';\n            img.src = icon;\n            img.alt = '';\n            img.style.float = 'left';\n            ctnt.appendChild(img);\n        }\n\n        const separator = document.createElement('div');\n        separator.style.width = '1px';\n        separator.style.display = 'inline-block';\n        separator.style.height = '100%';\n        ctnt.appendChild(separator);\n\n        const t = document.createElement('div');\n        t.className = 'text-content';\n        t.innerHTML = text;\n        t.style.display = 'flex';\n        t.style.alignItems = 'center';\n        t.style.whiteSpace = 'nowrap';\n        t.style.height = '100%';\n        t.style.textAlign = 'center';\n        ctnt.appendChild(t);\n        elt.appendChild(ctnt);\n    }\n\n    drawCutContent(elt, icon, text, object, ctx) {\n        if (icon) {\n            const img = document.createElement('img');\n            img.className = 'image-content';\n            img.src = icon;\n            img.alt = '';\n            elt.appendChild(img);\n        }\n        elt.style.overflow = 'hidden';\n        var t = document.createElement('div');\n        t.className = 'text-content';\n        t.innerHTML = text;\n        elt.appendChild(t);\n        return t;\n    }\n\n    drawEllipsisContent(elt, icon, text, object, ctx) {\n        if (icon) {\n            const img = document.createElement('img');\n            img.className = 'image-content';\n            img.src = icon;\n            img.alt = '';\n            elt.appendChild(img);\n        }\n        var t = document.createElement('div');\n        t.className = 'text-content';\n        t.style.textOverflow = 'ellipsis';\n        t.style.overflow = 'hidden';\n        t.innerHTML = text;\n        elt.appendChild(t);\n        return t;\n    }\n\n    drawOverflowVisibleContent(elt, icon, text, object, ctx) {\n        if (icon) {\n            const img = document.createElement('img');\n            img.className = 'image-content';\n            img.src = icon;\n            img.alt = '';\n            img.style.float = 'left';\n            elt.appendChild(img);\n        }\n        var t = document.createElement('div');\n        t.className = 'text-content';\n        t.overflow = 'visible';\n        t.innerHTML = text;\n        elt.appendChild(t);\n        return t;\n    }\n\n    filter(object, row, search) {\n        if (this.getText && search) {\n            var text = this.getText(object, row);\n            return text && Gantt.utils.stringMatches(text, search)\n        }\n        return false;\n    }\n\n    createCSSGetter(selector, classOptions, ctx) {\n        if (typeof classOptions == \"function\") {\n            // Function is given the object to render in parameter and returns a set of CSS classes\n            return createSelectorFunction(selector, classOptions, null, ctx);\n        }\n        else if (typeof classOptions == \"string\") {\n            if (classOptions[0] == '@') {\n                // The string represents the accessor to the object property providing the CSS class\n                return createSelectorFunction(selector, Gantt.utils.propertyEvaluator(classOptions.substring(1)));\n            }\n            else {\n                return createSelectorFunction(selector, function () {\n                    return classOptions;\n                });\n            }\n        }\n        // Else the config is a descriptive object of the CSS setter\n        else if (!classOptions.property) {\n            console.warn('Missing \"property\" field in class setter description:');\n            console.warn(classOptions);\n            return null;\n        }\n        else {\n            var propGetter = Gantt.utils.propertyEvaluator(classOptions.property);\n            return createSelectorFunction(selector, function (obj) {\n                var prop = propGetter.call(obj, obj);\n                if (prop) {\n                    if (classOptions.prefix) {\n                        prop = classOptions.prefix + prop;\n                    }\n                    if (classOptions.suffix) {\n                        prop = classOptions.suffix + prop;\n                    }\n                }\n                return prop;\n            });\n        }\n    };\n\n    addCSSConfiguration(selector, classes, ctx) {\n        var i, getter;\n        if (!Gantt.utils.isArray(classes)) {\n            classes = [ classes ];\n        }\n        for (i = 0; i < classes.length; i++) {\n            getter = this.createCSSGetter(selector, classes[i], ctx);\n            if (getter) {\n                if (this.cssGetters) {\n                    this.cssGetters.push(getter);\n                }\n                else {\n                    this.cssGetters = [getter];\n                    this.getCSS = function (object, ctx) {\n                        var cssClasses = '', cssToAdd;\n                        for (var i = 0; i < this.cssGetters.length; i++) {\n                            cssToAdd = this.cssGetters[i](object, ctx);\n                            if (cssToAdd) {\n                                cssClasses = cssClasses && (cssClasses + ' ' + cssToAdd) || cssToAdd;\n                            }\n                        }\n                        return cssClasses;\n                    }\n                }\n            }\n        }\n    }\n\n    addFilterConfiguration(selector, config, ctx) {\n        var filter;\n        if (typeof config == \"function\") {\n            filter = (...params) => { return config.apply(ctx, params); };\n        }\n        else if (typeof config == \"string\") {\n            var getter = Gantt.utils.propertyEvaluator(config);\n            if (getter) {\n                filter = function (object, ctx, search) {\n                    if (search) {\n                        var value = getter(object, ctx);\n                        return value && Gantt.utils.stringMatches(value, search);\n                    }\n                    return true;\n                }\n            }\n        }\n        else {\n            console.warn('Cannot process filter config. Must be a string or a function.');\n            console.warn(config);\n        }\n        if (filter) {\n            var oldFilter = this.filter;\n            this.filter = function (object, ctx, search) {\n                if (!oldFilter(object, ctx, search)) {\n                    return false;\n                }\n                if (!selector || selector(object)) {\n                    if (!filter(object, ctx, search)) {\n                        return false;\n                    }\n                }\n                return true;\n            };\n        }\n    };\n\n    addTooltipPropertiesConfiguration(selector, config, ctx) {\n        var tooltipPropsGetter;\n        if (typeof config == \"function\") {\n            tooltipPropsGetter = config;\n        }\n        else {\n            console.warn('Cannot process tooltip properties config. Must be a a function.');\n            console.warn(config);\n        }\n        if (tooltipPropsGetter) {\n            if (selector) {\n                this.getTooltipProperties = createSelectorFunction(selector, tooltipPropsGetter, this.getTooltipProperties, ctx);\n            }\n            else this.getTooltipProperties = tooltipPropsGetter;\n        }\n    };\n\n    addTooltipConfiguration(selector, config, ctx) {\n        var tooltipGetter;\n        if (typeof config == \"function\") {\n            tooltipGetter = (...params) => { return config.apply(ctx, params); };\n        }\n        else {\n            console.warn('Cannot process tooltip config. Must be a function.');\n            console.warn(config);\n        }\n        if (tooltipGetter) {\n            if (selector) {\n                this.getTooltip = createSelectorFunction(selector, tooltipGetter, this.getTooltip);\n            }\n            else this.getTooltip = tooltipGetter;\n        }\n    };\n\n    addTextConfiguration(selector, config, ctx) {\n        var textGetter;\n        if (typeof config == \"function\") {\n            textGetter = (...params) => { return config.apply(ctx, params); };\n        }\n        else if (typeof config == \"string\") {\n            textGetter = Gantt.utils.propertyEvaluator(config);\n        }\n        else {\n            console.warn('Cannot process text config. Must be a string or a function.');\n            console.warn(config);\n        }\n        if (textGetter) {\n            if (selector) {\n                this.getText = createSelectorFunction(selector, textGetter, this.getText);\n            }\n            else this.getText = textGetter;\n        }\n    };\n\n    addIconConfiguration(selector, config, ctx) {\n        var iconGetter;\n        if (typeof config == \"function\") {\n            iconGetter = (...params)=> { return config.apply(ctx, params)};\n        }\n        else if (typeof config == \"string\") {\n            iconGetter = Gantt.utils.propertyEvaluator(config);\n        }\n        else {\n            console.warn('Cannot process icon config. Must be a string or a function.');\n            console.warn(config);\n        }\n        if (iconGetter) {\n            if (selector) {\n                this.getIcon = createSelectorFunction(selector, iconGetter, this.getIcon);\n            }\n            else this.getIcon = iconGetter;\n        }\n    };\n\n    addDrawConfiguration(selector, config) {\n        if (selector) {\n            var oldDraw = this.draw;\n            this.draw = function (object, elt, ctx) {\n                if (selector(object, ctx)) {\n                    config.draw(object, elt, ctx);\n                }\n                else {\n                    oldDraw(object, elt, ctx);\n                }\n            };\n        }\n        else {\n            this.draw = function (object, elt, ctx) {\n                config.draw(object, elt, ctx);\n            };\n        }\n    };\n\n    addDrawContentConfiguration(selector, config) {\n        if (selector) {\n            var oldDrawContent = this.drawContent;\n            this.drawContent = function (elt, text, object, ctx) {\n                if (selector(object, ctx)) {\n                    config.drawContent(elt, text, object, ctx);\n                }\n                else {\n                    oldDrawContent(elt, text, object, ctx);\n                }\n            };\n        }\n        else {\n            this.drawContent = function (elt, text, object, ctx) {\n                config.drawContent(elt, text, object, ctx);\n            }\n        }\n    }\n\n    addTextOverflowConfiguration(selector, config) {\n        let drawDefaultContent;\n        if (config === TEXT_OVERFLOW_ELLIPSIS) {\n            drawDefaultContent = this.drawEllipsisContent;\n        }\n        else if (config === TEXT_OVERFLOW_NO_DISPLAY) {\n            drawDefaultContent = this.drawNoDisplayOverflowContent;\n        }\n        else if (config === TEXT_OVERFLOW_CUT) {\n            drawDefaultContent = this.drawCutContent;\n        }\n        if (selector) {\n            var oldDrawDefaultContent = this.drawDefaultContent;\n            this.drawDefaultContent = function (elt, text, object, ctx) {\n                if (selector(object, ctx)) {\n                    drawDefaultContent.call(this, elt, text, object, ctx);\n                }\n                else {\n                    oldDrawDefaultContent.call(this, elt, text, object, ctx);\n                }\n            };\n        }\n        else {\n            this.drawDefaultContent = drawDefaultContent;\n        }\n    }\n\n    hexToRgb(hex) {\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        return result ? {\n            r: parseInt(result[1], 16),\n            g: parseInt(result[2], 16),\n            b: parseInt(result[3], 16)\n        } : null;\n    }\n\n    getTextColorFromBackgroundColor(hexColor) {\n        var rgb = this.hexToRgb(hexColor);\n        //http://www.w3.org/TR/AERT#color-contrast\n        var o = Math.round(((rgb.r * 299) + (rgb.g * 587) + (rgb.b * 114)) /1000);\n        return o > 125? '#383633' : 'white';\n    }\n\n    addColorConfiguration(selector, config, property, ctx) {\n        var colorGetter;\n        if (typeof config === \"function\") {\n            colorGetter = (...params) => { return config.apply(ctx, params); };\n        }\n        else if (typeof config === \"string\") {\n            if ((property === 'color') && (AUTOMATIC_COLOR === config)) {\n                colorGetter = (obj, ctx, bg) => {\n                    let index = this.colors && this.colors.indexOf(bg) || -1;\n                    if (index < 0) {\n                        let textColor;\n                        try {\n                            textColor =  this.getTextColorFromBackgroundColor(bg);\n                        }\n                        catch (err) {\n                            console.error('Invalid color format ' + bg);\n                            console.error(err);\n                            textColor = 'black';\n                        }\n                        if (!this.colors) {\n                            this.colors = [bg];\n                            this.textColors = [textColor];\n                        }\n                        else {\n                            this.colors.push(bg);\n                            this.textColors.push(textColor);\n                        }\n                        return textColor;\n                    }\n                    return this.textColors[index];\n                };\n            }\n            else {\n                colorGetter = Gantt.utils.propertyEvaluator(config);\n            }\n        }\n        else {\n            // Object describing how to get a color from a palette\n            const paletteConfig = config.palette;\n            const paletteRenderer = {\n                paletteHandler : this.paletteHandler,\n                colors : null,\n                value : Gantt.utils.propertyEvaluator(config.getValue),\n                getColor : function(obj, ctx) {\n                    const value = this.value(obj, ctx);\n                    const colors = this.colors || this.makeColors(obj, ctx); // makeColors leads to the creation of this.values\n                    let index = this.values.indexOf(value);\n                    if (index < 0) {\n                        index = this.values.length;\n                        this.values.push(value);\n                    }\n                    return index < 0? null : colors[index % colors.length];\n                },\n                getValues : config.values && (Gantt.utils.isFunction(config.values) && config.values || function() { return config.values; }),\n                makeColors : function(obj, ctx) {\n                    let palette;\n                    if (paletteConfig) {\n                        if (Gantt.utils.isString(paletteConfig)) {\n                            palette = this.paletteHandler.getPalette(paletteConfig);\n                        }\n                        else {\n                            palette = new (Gantt.components.Palette.impl || Gantt.components.Palette)(paletteConfig);\n                        }\n                    }\n                    else {\n                        palette = this.paletteHandler.getPalette();\n                    }\n                    if (!palette && !this.colors) {\n                        console.error('No palette found for ' + paletteConfig);\n                        palette = Gantt.defaultPalettes[Gantt.defaultPaletteName];\n                    }\n                    this.values = this.getValues && this.getValues(obj, ctx) || [];\n                    this.colors = palette && palette.getColors(this.values.length || -1); // -1 for the max number of colors handled by the palette.\n                    return this.colors;\n                }\n            };\n            colorGetter = (obj, ctx) => {\n                return paletteRenderer.getColor(obj, ctx);\n            };\n        }\n        if (colorGetter) {\n            if (selector) {\n                this[property] = createSelectorFunction(selector, colorGetter, this[property]);\n            }\n            else this[property] = colorGetter;\n        }\n    };\n\n    addConfiguration(config) {\n        var selector;\n        if (config.selector) {\n            if (typeof config.selector == \"function\") {\n                selector = (...params) => { return config.selector.apply(config, params) };\n            }\n            else if (typeof config.selector != \"object\" || !config.selector.property || !config.selector.value) {\n                console.warn('Renderer selector must be a function or an object with \"property\" and \"value\" fields.');\n                console.warn(config.selector);\n            }\n            else {\n                var prop = Gantt.utils.propertyEvaluator(this.config.selector.property);\n                var values = this.config.selector.value.split(',');\n                selector = function (object) {\n                    var value = prop(object);\n                    return value && (values.indexOf(value) >= 0);\n                }\n            }\n        }\n\n        this.processConfiguration(selector, config);\n    }\n\n    processConfiguration(selector, config) {\n        this.defaultProcessConfiguration(selector, config);\n    }\n\n    defaultProcessConfiguration(selector, config) {\n        if (config.classes || config.css) {\n            this.addCSSConfiguration(selector, config.classes || config.css, config);\n        }\n\n        if (config.text) {\n            this.addTextConfiguration(selector, config.text, config);\n        }\n        if (config.icon) {\n            this.addIconConfiguration(selector, config.icon, config);\n        }\n\n        if (config.filter) {\n            this.addFilterConfiguration(selector, config.filter, config);\n        }\n\n        if (config.tooltip) {\n            this.addTooltipConfiguration(selector, config.tooltip, config);\n        }\n\n        if (config.tooltipProperties) {\n            this.addTooltipPropertiesConfiguration(selector, config.tooltipProperties, config);\n        }\n\n        if (config.createShape) {\n            console.warn('config.createShape: Not implemented');\n        }\n\n        if (config.drawContent) {\n            this.addDrawContentConfiguration(selector, config);\n        }\n\n        if (config.textOverflow) {\n            this.addTextOverflowConfiguration(selector, config.textOverflow);\n        }\n\n        if (config.background) {\n            this.addColorConfiguration(selector, config.background, 'background', config);\n        }\n\n        if (config.color) {\n            this.addColorConfiguration(selector, config.color, 'color', config);\n        }\n\n        if (config.draw) {\n            this.addDrawConfiguration(selector, config);\n        }\n    }\n\n    setConfiguration(config) {\n        this.drawDefaultContent = this.drawNoDisplayOverflowContent;\n\n        if (Array.isArray(config)) {\n            for (var i = 0; i < config.length; i++) {\n                this.addConfiguration(config[i]);\n            }\n        }\n        else if (config) {\n            this.addConfiguration(config);\n        }\n        this.initialized(config);\n    }\n\n    initialized(config) {\n    }\n\n    //noinspection JSUnusedLocalSymbols\n    getTooltipProperties(obj, ctx) {\n        return [];\n    }\n\n    getTooltip(parentNode, obj, ctx) {\n        parentNode.style.display = 'flex';\n        parentNode.style.flexDirection = 'column';\n        /*const tooltipContent = document.createElement('div');\n        tooltipContent.className = 'gantt-tooltip-content';\n        tooltipContent.style.display = 'flex';\n        tooltipContent.style.flexFlow = 'column';*/\n        if (this.getText) {\n            var title = document.createElement('h2');\n            title.appendChild(document.createTextNode(this.getText(obj, ctx)));\n            title.style.display = 'block';\n            title.style.flex = '0 0 auto';\n            parentNode.appendChild(title);\n        }\n        var props = this.getTooltipProperties(obj, ctx);\n        var tableCtnr = document.createElement('div');\n        tableCtnr.style.overflow = 'auto';\n        tableCtnr.style.display = 'block';\n        tableCtnr.style.flexShrink = '1';\n        tableCtnr.style.flexGrow = '1';\n        var table = document.createElement('table');\n        var body = document.createElement('tbody'), tr, td;\n        for (var iProp = 0, count = props.length; iProp < count;) {\n            tr = document.createElement('tr');\n            td = document.createElement('td');\n            td.className = 'tooltip-key';\n            td.appendChild(document.createTextNode(props[iProp++]));\n            tr.appendChild(td);\n\n            td = document.createElement('td');\n            td.className = 'tooltip-table-separator';\n            tr.appendChild(td);\n\n            td = document.createElement('td');\n            td.className = 'tooltip-value';\n            td.appendChild(document.createTextNode(props[iProp++]));\n            tr.appendChild(td);\n            body.appendChild(tr);\n        }\n        table.appendChild(body);\n        tableCtnr.appendChild(table);\n        parentNode.appendChild(tableCtnr);\n        //tooltipContent.appendChild(tableCtnr);\n        //parentNode.appendChild(tooltipContent);\n    }\n}\n\nGantt.components.Renderer.impl = Renderer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/renderer.js","'use strict';\n\nimport Gantt from '../core/core';\n\nconst defaultOptions = {\n    cascadeOffset : 5,\n    topMargin : 1,\n    bottomMargin : 1,\n    subRowPadding : 1,\n    constantRowHeight : false,\n    compareBoundingBoxes : false,\n    miniWidth : 4\n};\n\nconst STRATEGY_LOGISTIC = 'logistic';\nconst STRATEGY_TILE = 'tile';\nconst STRATEGIES = {};\nconst MINI_ACTIVITY_CLASS = 'mini-activity';\nconst MILESTONE = 'milestone';\n\nSTRATEGIES[STRATEGY_LOGISTIC] = function(row) {\n    // this is the activity layout calling this function\n    ActivityLayout.sortTasksOnStart(row);\n    var subRowsCount = ActivityLayout.computeSubRows(row), offset;\n    var actHeight = row.height - this.topMargin - this.bottomMargin - 1;\n    if (subRowsCount > 1) {\n        offset = this.cascadeOffset;\n        actHeight = Math.max(actHeight - this.cascadeOffset*(subRowsCount-1), 0);\n        if (actHeight == 0) {\n            offset = 0;\n        }\n    }\n    const actCount = row.activities && row.activities.length || 0;\n    for(let iAct = 0, act; iAct < actCount; ++iAct) {\n        act = row.activities[iAct];\n        if (act.node) {\n            act.node.style.top = (this.topMargin + (offset * act.subRowIndex)) + 'px';\n            act.node.style.height = actHeight;\n        }\n    }\n};\n\nSTRATEGIES[STRATEGY_TILE] = function(row) {\n    var rowHeight = row.tableRowHeight;\n\n    var topMargin = this.topMargin;\n    var bottomMargin = this.bottomMargin;\n    var subRowHeight = rowHeight - topMargin - bottomMargin - 1;\n    if (subRowHeight <= 0) {\n        subRowHeight = 1;\n        var availMargin = rowHeight - subRowHeight;\n        topMargin = (availMargin * topMargin) / (topMargin + bottomMargin);\n        bottomMargin = availMargin - topMargin;\n    }\n\n    // Compute the overlap, tiling, and number of subrows required to accommodate the\n    // graphics. First, we associate each graphic with its the bounds in view coordinates.\n    // Then we sort the array by start time or x position, depending on the overlap\n    // detection strategy being used.\n    var activitiyComparator = this.compareBoundingBoxes\n        ? function(act1, act2) { return act1.left - act2.left; }\n        : function(act1, act2) { return act1.start - act2.start; };\n    row.activities.sort(activitiyComparator);\n\n    // Finally, assign graphics to subrows, increasing the number of subrows as\n    // necessary so that the graphics do not overlap.\n    var subRows = this.setTaskSubRows(row);\n\n    // For constant row height, we subdivide the row's current height into the required\n    // number of subrows. For constant subrow height, we expand the row to accommodate the\n    // required number of subrows\n    var subRowMargin = this.subRowPadding;\n    if (this.constantRowHeight) {\n        if (subRowMargin * (subRows.length - 1) >= subRowHeight) {\n            subRowMargin = subRowHeight / (subRows.length - 1);\n        }\n        subRowHeight = (subRowHeight - ((subRows.length - 1) * subRowMargin)) / subRows.length;\n    } else {\n        rowHeight = topMargin\n            + bottomMargin\n            + subRows.length * subRowHeight\n            + (subRows.length - 1) * subRowMargin;\n        // Set the row height so that each subrow has the chart's global row\n        // height.\n        row.setRowHeight(Math.round(rowHeight));\n    }\n\n    // Set the vertical bounds of the activities in each subrow.\n    var top = topMargin, subRowTasks,task;\n    for (var i = 0, iTask; i < subRows.length; i++) {\n        subRowTasks = subRows[i];\n        for(iTask = 0; iTask < subRowTasks.length; iTask++) {\n            task = subRowTasks[iTask];\n            task.node.style.top = top + 'px';\n            task.node.style.height = subRowHeight + 'px';\n        }\n        top+= subRowHeight + subRowMargin;\n    }\n};\n\nexport default class ActivityLayout extends Gantt.components.ActivityLayout {\n    constructor(config, proto, ctx) {\n        super(config);\n        Gantt.utils.mergeObjects(this, defaultOptions, config, proto);\n        this.ctx = ctx;\n\n        if (this.strategy) {\n            if (typeof config.strategy === 'string') {\n                this.getLayoutStrategy = () => { return this.strategy; };\n            }\n            else if (typeof this.strategy === 'function') {\n                this.getLayoutStrategy = ()=> {\n                    return this.strategy(this.ctx);\n                }\n            }\n        }\n    }\n\n    layout(row) {\n        if (row.activities && row.activities.length) {\n            const strategyKey = this.getLayoutStrategy();\n            let  vLayout;\n            this.layoutHorizontally(row);\n            if (strategyKey && (vLayout = STRATEGIES[strategyKey])) {\n                vLayout.call(this, row);\n            }\n            else {\n                let act, elt;\n                for(let iAct = 0; iAct < row.activities.length; iAct++) {\n                    act = row.activities[iAct];\n                    elt = act.node;\n                    if (elt) {\n                        elt.style.top = '' + this.topMargin + 'px';\n                        elt.style.height = '' + (row.height - this.topMargin - this.bottomMargin - 1) + 'px';\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * @return {string}\n     */\n    static get STRATEGY_LOGISTIC() { return STRATEGY_LOGISTIC; }\n\n    /**\n     * @return {string}\n     */\n    static get STRATEGY_TILE() { return STRATEGY_TILE; }\n    static get STRATEGIES() { return STRATEGIES; }\n\n\n    allowVariableRowHeight() {\n        var strategyKey = this.getLayoutStrategy();\n        if (strategyKey && (strategyKey === STRATEGY_TILE)) {\n            return !this.constantRowHeight;\n        }\n        return false;\n    }\n\n    layoutHorizontally(row) {\n        let act, elt, left;\n        const actCount = row.activities.length;\n        for(let iAct = 0; iAct < actCount; iAct++) {\n            act = row.activities[iAct];\n            elt = act.node;\n            if (elt) {\n                left = act.left = row.getX(act.start);\n                elt.style.left = '' + left + 'px';\n                elt.style.width = (act.width = row.getX(act.end) - left + 1) + 'px';\n                if ((act.width <= this.miniWidth) && !Gantt.utils.hasClass(elt, MILESTONE)) {\n                    act.width = this.miniWidth;\n                    elt.style.width = act.width + 'px';\n                    Gantt.utils.addClass(elt, MINI_ACTIVITY_CLASS);\n                }\n            }\n        }\n    }\n\n    static sortTasksOnStart(row) {\n        row.activities.sort(function(act1, act2) {\n            return act1.start - act2.start;\n        });\n    }\n\n    static computeSubRows(row) {\n        let endTimes = [], endTime, iAct, act, e, endTimesCount = 0;\n        const actCount = row.activities && row.activities.length || 0;\n        for (iAct = 0; iAct < actCount; ++iAct) {\n            act = row.activities[iAct];\n            if (act.node) {\n                for (e = 0; e < endTimesCount; e++) {\n                    endTime = endTimes[e];\n                    if ((act.start === endTime) || (act.start > endTime)) {\n                        break;\n                    }\n                }\n                act.subRowIndex = e;\n                if (e < endTimesCount) {\n                    endTimes[e] = act.end;\n                } else {\n                    endTimes.push(act.end);\n                    endTimesCount++;\n                }\n            }\n        }\n        return endTimesCount;\n    }\n\n    //noinspection JSMethodCanBeStatic\n    getLayoutStrategy() {\n        return null;\n    }\n\n    //noinspection JSMethodCanBeStatic\n    layoutVertically(row) {\n        row.subRows = [];\n    };\n\n    /*                                  */\n    /*      Tiling specific methods     */\n    /*                                  */\n    /**\n     * Creates as many subrows as needed to accommodate the given activity graphics and\n     * assigns the activity graphics to the subrows. The activity graphics are provided\n     * with their view bounding boxes as an array of {@link GraphicBounds}. This allows\n     * the tiling policy to take advantage of the precomputed activity bounding boxes when\n     * computing graphic overlap and assigning activity graphics to subrows. The result of\n     * this method is a list of subrows, where each subrow is a list of {@link\n        * GraphicBounds} representing the activities assigned to the subrow. All activity\n     * graphics provided as input to the tiling policy must be assigned to one and only\n     * one subrow.\n     *\n     * @param graphics             The activity graphics to be tiled into subrows, as an\n     *                             array of {@link GraphicBounds}. If <code>compareBoundingBoxes</code>\n     *                             is <code>true</code> then the array will be sorted by\n     *                             the x position of each activity graphic's bounding box.\n     *                             If <code>compareBoundingBoxes</code> is\n     *                             <code>false</code> then the array will be sorted by the\n     *                             start time of each activity. Note, that the bounding\n     *                             boxes are provided as input only. Modifying the\n     *                             bounding box of a {@link GraphicBounds} will not affect\n     *                             how an activity is positioned.\n     * @param compareBoundingBoxes Indicates whether the tiling policy should compute\n     *                             activity overlap by comparing the graphic bounding\n     *                             boxes. If <code>false</code>, activity overlap should\n     *                             be computed by comparing the activity time intervals.\n     * @return The list of subrows, where each subrow is a list of {@link GraphicBounds}\n     *         representing the activities assigned to the subrow.\n     */\n    setTaskSubRows(row) {\n        var subRows = [], act, iSubRow;\n        for(let iAct = 0, actCount = row.activities && row.activities.length || 0; iAct < actCount; ++iAct) {\n            act = row.activities[iAct];\n            if (act.node) {\n                for(iSubRow = 0; iSubRow < subRows.length; iSubRow++) {\n                    if (this.addGraphicToSubRowIfFits(act, subRows[iSubRow])) {\n                        break;\n                    }\n                }\n                if (iSubRow == subRows.length) {\n                    subRows.push( [ act ] );\n                }\n            }\n        }\n        return subRows;\n    };\n\n    /**\n     * Adds the specified task to the specified subRow if it fits. If the\n     * task is successfully added to the list of graphics for the subrow, this method\n     * returns true. If the graphic does not fit into the subrow, this method returns\n     * false. If the graphic does not fit into any of the existing subrows, the tiling\n     * policy will create a new subrow for the graphic. Note, that a graphic must always\n     * succeed in being added to an empty subrow.\n     *\n     * @param activity             The activity to add.\n     * @param subRow               The subRow, represented as a list of activities.\n     */\n    addGraphicToSubRowIfFits(activity, subRow) {\n        // Adding a graphic to an empty subrow must always succeed.\n        if (!subRow.length) {\n            subRow.push(activity);\n        }\n        // Otherwise, check whether the graphic fits at the end of the subRow.\n        else {\n            var lastRowTask = subRow[subRow.length - 1];\n            if (this.compareBoundingBoxes) {\n                if (activity.left < (lastRowTask.left + lastRowTask.width)) {\n                    return false;\n                }\n            } else if (activity.start < lastRowTask.end) {\n                return false;\n            }\n            subRow.push(activity);\n        }\n        return true;\n    };\n}\n\nGantt.components.ActivityLayout.impl = ActivityLayout;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/activitylayout.js","'use strict';\n\nimport Gantt from './core';\n\nconst defaultOptions = {\n    linkOutlineWidth : 2\n};\n\nconst ID_DELIM = '_';\nconst TOOLTIP_FADING_TIME = 1000;\nconst TOOLTIP_SHOWING_DELAY = 800;\n\nconst CONSTRAINT_LINK_CLASS = 'constraint-link';\nconst CONSTRAINT_LINK_CTNR_CLASS = 'constraint-link-ctnr';\nconst CONSTRAINT_ARROW = 'constraint-arrow';\n\nconst SELECTION_CLASS = 'selected';\n\nexport default class ConstraintsGraph extends Gantt.components.ConstraintsGraph {\n    constructor(gantt, node, config) {\n        super(gantt, node, Gantt.utils.mergeObjects({}, defaultOptions, config));\n    }\n\n    setConfiguration(config) {\n        this.destroy();\n\n        this.create();\n        this.ready = Promise.resolve([]);\n\n        if (config.layout && Gantt.utils.isFunction(config.layout)) {\n            this.layout = new config.layout(this.gantt);\n        }\n        else {\n            this.layout = new (Gantt.components.ConstraintLayout.impl || Gantt.components.ConstraintLayout)(this.gantt, config.layout);\n        }\n\n        this.linkRenderer = new (Gantt.components.Renderer.impl || Gantt.components.Renderer)(config.renderer, LinkRendererPrototype, this.gantt);\n        if (config.linkOutlineWidth)\n            this.linkRenderer.linkOutlineWidth = config.linkOutlineWidth;\n        // Ugly way for managing the exception of this view having several DOM nodes in its life\n        const node = this.node;\n        this.node = null;\n        this.setNode(node);\n\n        const selectionHandler = this.gantt.selection;\n        selectionHandler.on(Gantt.events.CONSTRAINT_SELECTION_CLEARED, (e, sels) => this.clearConstraintSelection(sels));\n        selectionHandler.on(Gantt.events.CONSTRAINT_SELECTED, (e, sels) =>  this.selectConstraints(sels));\n        selectionHandler.on(Gantt.events.CONSTRAINT_UNSELECTED, (e, sels) =>  this.unselectConstraints(sels));\n    }\n\n    setNode(node) {\n        if (this.node) {\n            this.gantt.errorHandler.removeGroup(this.node);\n            if (this.tooltipEnter) {\n                Gantt.utils.removeEventListener(this.node, 'mouseenter', this.tooltipEnter);\n                Gantt.utils.removeEventListener(this.node, 'mouseleave', this.tooltipLeave);\n                Gantt.utils.removeEventListener(this.node, 'click', this.clickHandler);\n            }\n            this.node.innerHTML = '';\n        }\n        this.node = node;\n        if (node) {\n            if (!this.tooltipEnter) {\n                this.tooltipEnter = (evt) => {\n                    const node = this.getConstraintNode(evt.target);\n                    if (node && (!this.gantt.timeTable.isDragAndDropping || !this.gantt.timeTable.isDragAndDropping())) {\n                        this.showTooltip(node);\n                    }\n                };\n                this.tooltipLeave = (evt) => {\n                    const node = this.getConstraintNode(evt.target);\n                    if (node && (this.tooltipElt == node)) {\n                        this.hideTooltip(TOOLTIP_FADING_TIME);\n                    }\n                };\n                this.clickHandler = (e) => this.processClick(e);\n            }\n            Gantt.utils.addEventListener(this.node, 'mouseenter', this.tooltipEnter, true);\n            Gantt.utils.addEventListener(this.node, 'mouseleave', this.tooltipLeave, true);\n            Gantt.utils.addEventListener(this.node, 'click', this.clickHandler, true);\n        }\n    }\n\n    create() {\n        if (this.config && this.config.classes) {\n            Gantt.utils.addClass(this.config.classes);\n        }\n    }\n\n    setConstraints(cts) {\n        this.cts = cts;\n        if (cts && cts.length) {\n            this.ready = new Promise((resolve) => {\n                setTimeout(()=> {\n                    this.processConstraints(cts);\n                    resolve();\n                }, 0);\n            });\n        }\n        else {\n            this.ready = Promise.resolve([]);\n        }\n    }\n\n    processConstraints(cts) {\n        const table = this.gantt.table;\n        const activityFilter = this.gantt.timeTable.getActivityFilter();\n        let row, count, acts, act, i;\n        this.layout.startInitialize();\n        try {\n            for (row = table.getFirstVisibleRow(); row; row = table.nextRow(row)) {\n                acts = row.activities;\n                count = acts && acts.length;\n                if (count) {\n                    for (i = 0; i < count; ++i) {\n                        act = acts[i];\n                        act = (!activityFilter || activityFilter.accept(act, row)) ? act : null;\n                        if (act) {\n                            act.consNode = this.layout.addNode(act, row.index);\n                        }\n                    }\n                }\n            }\n\n            let from, to, cons;\n            for (i = 0, count = cts.length; i < count; ++i) {\n                cons = cts[i];\n                cons.nodes = null; // Remove nodes from previous display\n                from = cons.from.consNode;\n                to = cons.to.consNode;\n                if (from && to) {\n                    this.layout.addConstraint(from, to, cons);\n                }\n            }\n        } catch (e) {\n            this.addError(e, \"Error processing constraints\");\n            this.layout.stopInitialize();\n            throw e;\n        }\n\n        this.layout.stopInitialize();\n    }\n\n    addError(e, msg) {\n        if (!this.errorNode) {\n            this.errorNode = document.createElement('div');\n            this.errorNode.style.opacity = '0.80';\n            this.gantt.timeTablePanel.appendChild(this.errorNode);\n        }\n        this.gantt.errorHandler.addError(e, msg, this.errorNode);\n    }\n\n    destroy() {\n        if (this.layout && this.layout.destroy) {\n            this.layout.destroy();\n        }\n        this.layout = null;\n        if (this.node && this.tooltipEnter) {\n            Gantt.utils.removeEventListener(this.node, 'mouseenter', this.tooltipEnter);\n            Gantt.utils.removeEventListener(this.node, 'mouseleave', this.tooltipLeave);\n            this.tooltipEnter = this.tooltipLeave = null;\n        }\n    }\n\n    clearCache() {\n        if (this.cts) {\n            for (let i = 0, count = this.cts.length; i < count; ++i) {\n                this.cts[i].fromNode = null;\n                this.cts[i].toNode = null;\n            }\n        }\n    }\n\n    clear() {\n        this.node.innerHTML = '';\n        this.clearCache();\n    }\n    \n    clearLinks() {\n        this.layout.clearLinks();\n    }\n\n    resetLayout() {\n        this.layout.resetLayout();\n    }\n\n    draw(rows, drawCB) {\n        if (!rows.length)  return this.ready;\n        return this.ready.then(()=> {\n            const table = this.gantt.table;\n            let firstRowIndex = rows[0].row.index, lastRowIndex = rows[rows.length - 1].row.index;\n\n            function getNodeRect(act, index) {\n                let row, y;\n                if (index < firstRowIndex) {\n                    row = rows[0].row;\n                    y = rows[0].y;\n                    while(index < firstRowIndex) {\n                        row = table.prevRow(row);\n                        drawCB(row);\n                        y-= row.activityRow.height;\n                        rows.splice(0, 0, { y : y, row : row, height : row.activityRow.height, index: --firstRowIndex });\n                    }\n                }\n                else if (index > lastRowIndex) {\n                    row = rows[lastRowIndex];\n                    y = row.y + row.height;\n                    row = row.row;\n                    while(index > lastRowIndex) {\n                        row = table.nextRow(row);\n                        drawCB(row);\n                        rows.push({ y : y, row : row, height : row.activityRow.height, index : ++lastRowIndex });\n                        y+= row.activityRow.height;\n                    }\n                }\n                row = rows[index - firstRowIndex];\n                return act.node?\n                { x : act.left, y : row.y, top : parseInt(act.node.style.top),\n                    width: act.node.offsetWidth, height: act.node.offsetHeight, rowHeight : row.height }\n                    : { x: 0, y : row.y, top : 0, width: 0, height: 0, rowHeight: row.height };\n            }\n\n            this.layout.getNodeRect = getNodeRect;\n            const ctx = { gantt: this.gantt,\n                nodeToLinkPadding : this.layout.horizLinkToNodeDist,\n                linkToLinkPadding : this.layout.horizLinkToLinkDist };\n\n            let i, rowIndex;\n            const count = rows.length;\n\n            try {\n                for (i = 0, rowIndex = firstRowIndex; i < count; i++, rowIndex++) {\n                    this.layout.layoutRowNodeLinks(rowIndex, this.linkRenderer, ctx);\n                }\n            } catch (e) {\n                this.addError(e);\n            }\n\n            try {\n                const fragment = document.createDocumentFragment();\n                for (i = 0, rowIndex = firstRowIndex; i < count; i++, rowIndex++) {\n                    this.layout.drawRowLinks(rowIndex, fragment, this.linkRenderer, ctx);\n                }\n\n                this.node.appendChild(fragment);\n            } catch (e) {\n                this.addError(e, \"Error drawing constraints\");\n            }\n        });\n    }\n    \n    getConstraint(node) {\n        let id = node.id;\n        let lastIndex = id.indexOf(ID_DELIM), index;\n        if (lastIndex >= 0) {\n            while((index = id.indexOf(ID_DELIM, lastIndex + 1)) > 0) {\n                lastIndex = index;\n            }\n            id = id.substring(0, lastIndex);\n        }\n        let cons;\n        if (this.cts.byIds && (cons = this.cts.byIds[id])) {\n            return cons;\n        }\n        return null;\n    }\n\n    getConstraintNode(elt) {\n        let node = null;\n        for(;elt && (elt !== this.node); elt = elt.parentNode) {\n            if (Gantt.utils.hasClass(elt, CONSTRAINT_LINK_CTNR_CLASS)\n                    || Gantt.utils.hasClass(elt, CONSTRAINT_ARROW)) return elt;\n            if (Gantt.utils.hasClass(elt, CONSTRAINT_LINK_CLASS)) node = elt;\n        }\n        return node;\n    }\n\n    /*                 */\n    /*     Tooltips    */\n    /*                 */\n    showTooltip(consNode) {\n        let cons;\n        if (consNode && (consNode != this.tooltipElt) && (cons = this.getConstraint(consNode))) {\n            this.tooltipElt = consNode;\n            const ctx = {\n                limitElt: this.gantt.getBody(),\n                showDelay : TOOLTIP_SHOWING_DELAY\n            };\n            this.gantt.tooltip.showTooltip(consNode, ctx,(parent) => {\n                const ctx = { gantt: this.gantt };\n                this.linkRenderer.getTooltip(parent, cons, ctx);\n            });\n        }\n    };\n\n    hideTooltip(fadingTime) {\n        this.tooltipElt = null;\n        this.gantt.tooltip.hideTooltip(fadingTime);\n    }\n\n    /**\n     * Selection management\n     */\n    processClick(e) {\n        this.hideTooltip();\n        const consNode = this.getConstraintNode(e.target);\n        let cons;\n        if (consNode && (cons = this.getConstraint(consNode))) {\n            this.gantt.selection.processClick(e, cons);\n        }\n    }\n\n    //noinspection JSMethodCanBeStatic\n    clearConstraintSelection(sels) {\n        for(let i = 0, nodes, count = sels.length, sel; i < count; ++i) {\n            sel = sels[i];\n            if (nodes = sel.nodes) {\n                for(let j = 0, count = nodes.length; j < count; j++) {\n                    Gantt.utils.removeClass(nodes[j], SELECTION_CLASS);\n                }\n            }\n        }\n    }\n\n    //noinspection JSMethodCanBeStatic\n    selectConstraints(sels) {\n        for(let i = 0, nodes; i < sels.length; i++) {\n            if (nodes = sels[i].nodes) {\n                for(let j = 0, count = nodes.length; j < count; j++) {\n                    Gantt.utils.addClass(nodes[j], SELECTION_CLASS);\n                }\n            }\n        }\n    }\n\n    //noinspection JSMethodCanBeStatic\n    unselectConstraints(sels) {\n        for(let i = 0, nodes; i < sels.length; i++) {\n            if (nodes = sels[i].nodes) {\n                for(let j = 0, count = nodes.length; j < count; j++) {\n                    Gantt.utils.removeClass(nodes[j], SELECTION_CLASS);\n                }\n            }\n        }\n    }\n};\n\nconst STYLE_ARROW = 1;\n\nclass NodeLabelLayout {\n    constructor() {\n    }\n\n    startLayout(act, ctx) {}\n    getNodeToLabelSpacing(act, bbox, textWidth, ctx) {}\n}\n\nclass DefaultNodeLabelLayout extends NodeLabelLayout {\n    constructor(left) {\n        super();\n        this.left = left;\n    }\n\n    getNodeToLabelSpacing(act, bbox, textWidth, ctx) {\n        return this.left? -ctx.nodeToLinkPadding : ctx.nodeToLinkPadding;\n    }\n}\n\nconst LinkRendererPrototype = {\n    drawLink(object, points, style, parentElt, ctx) {\n        if (points.length < 2) return null;\n        let lastX = points[0].x, lastY = points[0].y;\n        const nodes = [];\n        const color = this.color? this.color(object, ctx) : undefined;\n        var css = this.getCSS && this.getCSS(object, ctx);\n        const w = this.lineWidth && this.lineWidth(object, ctx);\n        let i = 0, line, pt, horiz;\n        while (true) {\n            line = document.createElement('div');\n            line.style.position = 'absolute';\n            line.style.pointerEvents = 'auto';\n            pt = points[++i];\n            if (object && object.id) line.id = object.id + ID_DELIM + i;\n            horiz = pt.y === lastY;\n            line.className = CONSTRAINT_LINK_CLASS + ' ' + (horiz? 'constraint-horiz-link' : 'constraint-vert-link');\n\n            if (this.linkOutlineWidth) {\n                line.className = CONSTRAINT_LINK_CTNR_CLASS + ' ' + (horiz? 'constraint-horiz-link' : 'constraint-vert-link');\n                if (horiz) {\n                    line.style.height = ((w || 1) + this.linkOutlineWidth + this.linkOutlineWidth) + 'px';\n                    line.style.paddingTop = line.style.paddingBottom = this.linkOutlineWidth + 'px';\n                    line.style.top = (lastY - this.linkOutlineWidth) + 'px';\n                    line.style.left = Math.min(lastX, pt.x) + 'px';\n                    line.style.width = (Math.abs(lastX - pt.x) + ((i && lastX > pt.x)? (w || 1) : 0)) + 'px';\n                    if (css) line.className+= ' ' + css;\n\n                    const link = document.createElement('div');\n                    link.className = CONSTRAINT_LINK_CLASS + ' constraint-horiz-link';\n                    if (w) link.style.height = w + 'px';\n                    link.style.width = '100%';\n                    line.appendChild(link);\n                }\n                else {\n                    line.style.width = ((w || 1) + this.linkOutlineWidth + this.linkOutlineWidth) + 'px';\n                    line.style.paddingLeft = line.style.paddingRight = this.linkOutlineWidth + 'px';\n                    line.style.left = (lastX - this.linkOutlineWidth) + 'px';\n                    line.style.top = Math.min(lastY, pt.y) + 'px';\n                    line.style.height = Math.abs(lastY - pt.y) + 'px';\n                    if (css) line.className+= ' ' + css;\n\n                    const link = document.createElement('div');\n                    link.className = CONSTRAINT_LINK_CLASS + ' constraint-vert-link';\n                    if (w) link.style.width = w + 'px';\n                    link.style.height = '100%';\n                    line.appendChild(link);\n                }\n            }\n            else if (horiz) {\n                if (w) line.style.height = w + 'px';\n                line.style.top = lastY + 'px';\n                line.style.left = Math.min(lastX, pt.x) + 'px';\n                line.style.width = (Math.abs(lastX - pt.x) + ((i && lastX > pt.x)? (w || 1) : 0)) + 'px';\n                if (css) line.className+= ' ' + css;\n            }\n            else {\n                if (w) line.style.width = w + 'px';\n                line.style.left = lastX + 'px';\n                line.style.top = Math.min(lastY, pt.y) + 'px';\n                line.style.height = Math.abs(lastY - pt.y) + 'px';\n                if (css) line.className+= ' ' + css;\n            }\n            nodes.push(line);\n            parentElt.appendChild(line);\n            if (i === (points.length - 1)) {\n                if (style === STYLE_ARROW) {\n                    if (horiz) {\n                        const arrowWidth = this.arrowWidth(object, ctx), arrowHeight = this.arrowHeight(object, ctx);\n                        if (lastX < pt.x) {\n                            line = this.drawRightArrow(pt.x, lastY, arrowWidth, arrowHeight, color);\n                        }\n                        else {\n                            line = this.drawLeftArrow(pt.x, lastY, arrowWidth, arrowHeight, color);\n                        }\n                        line.style.pointerEvents = 'auto';\n                        if (css) line.className+= ' ' + css;\n                        if (object && object.id) line.id = object.id + ID_DELIM + 'arrow';\n                        nodes.push(line);\n                        parentElt.appendChild(line);\n                    }\n                }\n                return nodes;\n            }\n            else {\n                lastX = pt.x;\n                lastY = pt.y;\n            }\n        }\n    },\n\n    drawLeftArrow(x, y, arrowWidth, arrowHeight, color) {\n        const node = document.createElement('div');\n        node.style.position = 'absolute';\n        node.className = CONSTRAINT_ARROW + ' constraint-left-arrow';\n        node.style.left = x + 'px';\n        node.style.top = (y - (arrowHeight - 1))+ 'px';\n        node.style.width = '0';\n        node.style.height = '0';\n        node.style.borderTop = arrowHeight + 'px solid transparent';\n        node.style.borderBottom = arrowHeight + 'px solid transparent';\n        node.style.borderRightWidth = arrowWidth + 'px';\n        node.style.borderRightStyle = 'solid';\n        if (color) node.style.borderRightColor = color;\n        return node;\n    },\n\n    drawRightArrow(x, y, arrowWidth, arrowHeight, color) {\n        const node = document.createElement('div');\n        node.style.position = 'absolute';\n        node.className = CONSTRAINT_ARROW + ' constraint-right-arrow';\n        node.style.left = (x - arrowWidth) + 'px';\n        node.style.top = (y - (arrowHeight - 1))+ 'px';\n        node.style.width = '0';\n        node.style.height = '0';\n        node.style.borderTop = arrowHeight + 'px solid transparent';\n        node.style.borderBottom = arrowHeight + 'px solid transparent';\n        node.style.borderLeftWidth = arrowWidth + 'px';\n        node.style.borderLeftStyle = 'solid';\n        if (color) node.style.borderLeftColor = color;\n        return node;\n    },\n\n    arrowWidth() {\n        return 5;\n    },\n\n    arrowHeight() {\n        return 5;\n    },\n\n    getTooltipProperties : function(cons, ctx) {\n        const getName = function(act) {\n            return act.name || act.id;\n        };\n        const props = [ Gantt.utils.getString('gantt.constraintChart.from'), getName(cons.from),\n            Gantt.utils.getString('gantt.constraintChart.to'), getName(cons.to), Gantt.utils.getString('gantt.constraintChart.type')];\n        let type;\n        if (cons.type === Gantt.constraintTypes.START_TO_START) type = Gantt.utils.getString('gantt.constraintChart.start.start');\n        else if (cons.type === Gantt.constraintTypes.START_TO_END) type = Gantt.utils.getString('gantt.constraintChart.start.end');\n        else if (cons.type === Gantt.constraintTypes.END_TO_END) type = Gantt.utils.getString('gantt.constraintChart.end.end');\n        else type = Gantt.utils.getString('gantt.constraintChart.end.start');\n        props.push(type);\n        return props;\n    },\n\n    processConfiguration : function(selector, config) {\n        this.defaultProcessConfiguration(selector, config);\n\n        if (config.lineWidth) {\n            this.addLineWidthConfiguration(selector, config.lineWidth);\n        }\n\n        if (config.arrowWidth) {\n            this.addArrowConfiguration(selector, config.arrowWidth, 'arrowWidth');\n        }\n\n        if (config.arrowHeight) {\n            this.addArrowConfiguration(selector, config.arrowWidth, 'arrowHeight');\n        }\n\n        if (config.nodeLabelLayout) {\n            this.addNodeLabelLayoutConfiguration(selector, config.nodeLabelLayout);\n        }\n    },\n\n    setColor(elt, color) {\n        elt.style.color = color;\n    },\n\n    destroy() {\n    },\n\n    addLineWidthConfiguration(selector, config) {\n        var lineWidth;\n        if (typeof config == \"function\") {\n            lineWidth = config;\n        }\n        else if (typeof config == \"string\") {\n            const getter = Gantt.utils.propertyEvaluator(config);\n            if (getter) {\n                lineWidth = (object, ctx) => {\n                    return getter(object, ctx);\n                }\n            }\n        }\n        else {\n            lineWidth = () => {\n                return config;\n            }\n        }\n        if (lineWidth) {\n            const oldLineWidth = this.lineWidth;\n            this.lineWidth = (object, ctx) => {\n                if (!selector || selector(object, ctx)) {\n                    return lineWidth(object, ctx);\n                }\n                return oldLineWidth && oldLineWidth(object, ctx);\n            };\n        }\n    },\n\n    addArrowConfiguration(selector, config, field) {\n        var arrowSize;\n        if (typeof config == \"function\") {\n            arrowSize = config;\n        }\n        else if (typeof config == \"string\") {\n            const getter = Gantt.utils.propertyEvaluator(config);\n            if (getter) {\n                arrowSize = (object, ctx) => {\n                    return getter(object, ctx);\n                }\n            }\n        }\n        else {\n            arrowSize = () => {\n                return config;\n            }\n        }\n        if (arrowSize) {\n            const oldArrowSize = this[field];\n            this[field] = (object, ctx) => {\n                if (!selector || selector(object, ctx)) {\n                    return arrowSize(object, ctx);\n                }\n                return oldArrowSize && oldArrowSize(object, ctx);\n            };\n        }\n    },\n\n    addNodeLabelLayoutConfiguration(selector, config) {\n        let labelLayout;\n        if (typeof config == \"string\") {\n            if ((config === 'left') || (config === 'LEFT')) {\n                labelLayout = new DefaultNodeLabelLayout(true);\n            }\n            else if ((config === 'right') || (config === 'RIGHT')) {\n                labelLayout = new DefaultNodeLabelLayout(false);\n            }\n        }\n        else if (Gantt.utils.isFunction(config)) {\n            labelLayout = new NodeLabelLayout();\n            labelLayout.getNodeToLabelSpacing = config;\n        }\n        else {\n            labelLayout = config;\n        }\n        if (labelLayout) {\n            const oldGetLabelLayout = this.getLabelLayout;\n            this.getLabelLayout = (object, ctx) => {\n                if (!selector || selector(object, ctx)) {\n                    return labelLayout;\n                }\n                return oldGetLabelLayout && oldGetLabelLayout(object, ctx);\n            };\n        }\n    }\n};\n\nGantt.components.ConstraintsGraph.impl = ConstraintsGraph;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/constraintgraph.js","'use strict';\n\nimport Gantt from './core';\n\nconst LOCKED = Number.MAX_VALUE;\n\nconst STYLE_ARROW = 1;\nconst LEFT = 0;\nconst RIGHT = 1;\nconst SIDE_COUNT = 2;\n\nconst CONNECTOR_COUNT = 4;\nconst INCOMINGS = new Array(4);\nINCOMINGS[Gantt.constraintTypes.START_TO_START] = 0;\nINCOMINGS[Gantt.constraintTypes.START_TO_END] = 2;\nINCOMINGS[Gantt.constraintTypes.END_TO_START] = 0;\nINCOMINGS[Gantt.constraintTypes.END_TO_END] = 2;\n\nconst OUTGINGS = new Array(4);\nOUTGINGS[Gantt.constraintTypes.START_TO_START] = 1;\nOUTGINGS[Gantt.constraintTypes.START_TO_END] = 1;\nOUTGINGS[Gantt.constraintTypes.END_TO_START] = 3;\nOUTGINGS[Gantt.constraintTypes.END_TO_END] = 3;\n\n\nclass Link {\n    constructor(cons) {\n        this.ar = [ cons ];\n        if (cons.from.consNode.index < cons.to.consNode.index) {\n            this.topNode = cons.from.consNode;\n            this.bottomNode = cons.to.consNode;\n        }\n        else {\n            this.topNode = cons.to.consNode;\n            this.bottomNode = cons.from.consNode;\n        }\n    }\n    addConstraint(cons) {\n        this.ar.push(cons);\n        const rowIndex = cons.from.consNode.index;\n        if (rowIndex < this.topNode.index) {\n            this.topNode = cons.from.consNode;\n        }\n        else if (rowIndex > this.bottomNode.index){\n            this.bottomNode = cons.from.consNode;\n        }\n    }\n    topIndex() {\n        return this.topNode.index;\n    }\n\n    bottomIndex() {\n        return this.bottomNode.index;\n    }\n\n    toNode() {\n        return this.ar[0].to.consNode;\n    }\n\n    switchSides() {\n        const type = this.ar[0].type;\n        return (type === Gantt.constraintTypes.END_TO_START) || (type === Gantt.constraintTypes.START_TO_END);\n    }\n\n    isDisplayed() {\n        for(let i = 0; i < this.ar.length; i++) {\n            if (!this.ar[i].nodes) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    toString() {\n        let s = 'Link[';\n        if (this.ar.length > 1) {\n            s+= '(' + this.ar.map(function(cons) { return cons.from.consNode.toString() }).join(',') + ')';\n        }\n        else s+= this.ar[0].from.consNode.toString();\n        s+= ' -> ';\n        s+= this.ar[0].to.consNode.toString();\n        return s + ']';\n    }\n\n    resetLayout() {\n        this.x = undefined;\n        for(let i = 0; i < this.ar.length; i++) {\n            this.ar[i].nodes = undefined;\n        }\n    }\n}\n\n\nfunction compareLinks(l1, l2) {\n    let i1 = l1.topIndex(), i2 = l2.topIndex();\n    if (i1 < i2) return 1;\n    if (i1 > i2) return -1;\n    i1 = l1.bottomIndex(); i2 = l2.bottomIndex();\n    return i1 < i2? 1 : (i1 > i2? -1 : 0);\n}\n\nclass Node {\n    constructor(act, index) {\n        this.act = act;\n        this.index = index;\n        this.links = [ [], [] ];\n        this.layoutLinks = 0;\n        this.linksDisplayed = 0;\n        this.bbox = null;\n        this.incomingLinks = new Array(4);\n        this.connectors = new Array(CONNECTOR_COUNT);\n        this.nodeLabelLayout = false;\n        for(let i = 0; i < CONNECTOR_COUNT; i++) {\n            this.connectors[i] = 0;\n        }\n    }\n\n    addLink(link, side) {\n        let ar = this.links[side];\n        for(let i = 0, count = ar.length, thisLink; i < count; i++) {\n            thisLink = ar[i];\n            if (compareLinks(ar[i], link) >= 0) {\n                ar.splice(i, 0, link);\n                return;\n            }\n        }\n        ar.push(link);\n    }\n\n    getLinks(side) {\n        return this.links[side];\n    }\n\n    getIncomingLink(type) {\n        return this.incomingLinks[type];\n    }\n\n    setIncomingLink(type, link) {\n        this.incomingLinks[type] = link;\n    }\n\n    incConnectionCount(type) {\n        this.connectors[type]++;\n    }\n\n    setBBox(bbox) {\n        this.bbox = bbox;\n    }\n\n    hasLinks() {\n        for(let side = 0; side < SIDE_COUNT; side++) {\n            if (this.links[side].length)\n                return true;\n        }\n        return false;\n    }\n\n    clearLinks() {\n        this.links = [ [], [] ];\n        this.connectors = new Array(CONNECTOR_COUNT);\n        this.bbox = null;\n    }\n\n    resetLayout() {\n        for(let side = 0; side < SIDE_COUNT; ++side) {\n            for(let iLink = 0, ar = this.links[side], link; iLink < ar.length; iLink++) {\n                if ((link = ar[iLink]).toNode() === this) {\n                    ar[iLink].resetLayout();\n                }\n            }\n        }\n        this.nodeLabelLayout = false;\n    }\n\n    topRight() {\n        let n = this;\n        while(n.next) {\n            n = n.next;\n        }\n        return n;\n    }\n\n    toString() {\n        return this.act.name || this.act.id;\n    }\n}\n\nconst defaultLayoutOptions = {\n    horizLinkToNodeDist : 11,\n    horizSwitchSideLinkToNodeDist : 8,\n    horizLinkToLinkDist : 10,\n    switchSideLinkVertMargin : 1 // Vertical space between the To node row and the link crossing over the node\n};\n\nexport default class ConstraintLayout extends Gantt.components.ConstraintLayout {\n    constructor(gantt, config) {\n        super(gantt, config);\n    }\n\n    setConfiguration(config) {\n        Gantt.utils.mergeObjects(this, defaultLayoutOptions, config);\n    }\n\n    startInitialize() {\n        this.nodes = [];\n    }\n\n    addNode(act, index) {\n        const node = new Node(act, index);\n        node.next = this.nodes[index];\n        this.nodes[index] = node;\n        return node;\n    }\n\n    addConstraint(from, to, cons) {\n        const type = cons.type, side = Gantt.constraintTypes.isFromStart(cons.type)? LEFT : RIGHT;\n        let link = to.getIncomingLink(INCOMINGS[type]), i;\n        from.incConnectionCount(OUTGINGS[type]);\n        to.incConnectionCount(INCOMINGS[type]);\n        if (link) {\n            const beforeTop = link.topIndex(), beforeBottom = link.bottomIndex();\n            link.addConstraint(cons);\n            for(i = link.topIndex(); i < beforeTop; i++) {\n                this.nodes[i].addLink(link, side);\n            }\n            for(i = beforeBottom + 1; i <= link.bottomIndex(); i++) {\n                this.nodes[i].addLink(link, side);\n            }\n        }\n        else {\n            to.setIncomingLink(INCOMINGS[type], link = new Link(cons));\n            for(i = link.topIndex(); i <= link.bottomIndex(); i++) {\n                this.nodes[i].addLink(link, side);\n            }\n        }\n    }\n\n    stopInitialize() {\n    }\n\n    layoutRowNodeLinks(rowIndex, renderer, ctx){\n        this.reinteringPath = null;\n        for(let consNode = this.nodes[rowIndex]; consNode; consNode = consNode.next) {\n            this.layoutOneSideNodeLinks(consNode, LEFT);\n            this.layoutOneSideNodeLinks(consNode, RIGHT);\n            this.layoutNodeLabel(consNode, renderer, ctx);\n        }\n    }\n\n    processConnectors(consNode, bbox) {\n        if (!consNode.links[LEFT].length && !consNode.links[RIGHT].length) return;\n        const parentAct = consNode.act.children && consNode.act.children.length;\n        const h = parentAct? bbox.height / 2 : bbox.height;\n\n        for(let side = 0, connectIndex = 0, incoming, outgoing; side < SIDE_COUNT; side++, connectIndex+= 2) {\n            incoming = consNode.connectors[connectIndex];\n            outgoing = consNode.connectors[connectIndex + 1];\n            if (incoming || outgoing) {\n                if (incoming) {\n                    consNode.connectors[connectIndex] = bbox.y + bbox.top + (h / (outgoing? 3 : 2));\n                }\n                if (outgoing) {\n                    consNode.connectors[connectIndex + 1] = bbox.y + bbox.top + h - (h / (incoming? 3 : 2));\n                }\n            }\n        }\n    }\n\n    layoutOneSideNodeLinks(consNode, side, beforeLink) {\n        if (!consNode.bbox) {\n            consNode.setBBox(this.getNodeRect(consNode.act, consNode.index));\n            this.processConnectors(consNode, consNode.bbox);\n        }\n        const left = side === LEFT;\n        let nodeLimit = consNode.bbox.x + (left? -this.horizLinkToNodeDist : (consNode.bbox.width + this.horizLinkToNodeDist));\n        let limit = nodeLimit;\n        for(let i = 0, links = consNode.getLinks(side), lastIndex = beforeLink? links.indexOf(beforeLink) : links.length, link; i < lastIndex; i++) {\n            link = links[i];\n            if (link.x === undefined) {\n                link.x = LOCKED;\n                let x = nodeLimit;\n                let skipIndex;\n                if (link.switchSides()) {\n                    // If node switch sides (goes from start to end or end to start), we don't need to layout the\n                    // 'to' node as its bounds are not taken into account into the current layout processing which\n                    // layouts the other side.\n                    const toNode = link.toNode();\n                    skipIndex = toNode.index;\n                    // However, it is still necessary to calc the 'to' node bounds for the link when it is to\n                    // be the drawn, in case the 'to' node is outside the layout processing row range.\n                    if (!toNode.bbox) {\n                        toNode.setBBox(this.getNodeRect(toNode.act, toNode.index));\n                        this.processConnectors(toNode, toNode.bbox);\n                    }\n                }\n                for(let index = link.topIndex(), last = link.bottomIndex(), value; index <= last; index++) {\n                    if ((index !== consNode.index) && (index !== skipIndex)) {\n                        value = this.layoutOneSideNodeLinks(this.nodes[index], side, link);\n                        if (this.reinteringPath) {\n                            this.reinteringPath = this.nodes[index].toString() + ' -> ' + link.toString()  + ' -> ' + this.reinteringPath;\n                            if (!beforeLink) {\n                                throw new Error('Re-entering layout on ' + (left? 'left side of ' : 'right side of ') + this.reinteringPath);\n                            }\n                            return left? Number.MAX_VALUE : Number.MIN_VALUE;\n                        }\n                        else {\n                            x = left? Math.min(x, value) : Math.max(x, value);\n                        }\n                    }\n                }\n                link.x = x;\n                consNode.layoutLinks++;\n            }\n            else if (link.x === LOCKED) {\n                // Re-entering on a same node, we are looping\n                this.reinteringPath = consNode.toString() + ' -> ' + link.toString();\n                return left? Number.MAX_VALUE : Number.MIN_VALUE;\n            }\n            limit = left? Math.min(limit, link.x - this.horizLinkToLinkDist) : Math.max(limit, link.x + this.horizLinkToLinkDist);\n        }\n        return limit;\n    }\n\n    layoutNodeLabel(consNode, renderer, ctx) {\n        const label = consNode.act.label;\n        if (!label) return;\n\n        const labelLayout = renderer.getLabelLayout && renderer.getLabelLayout(consNode.act, ctx);\n        if (labelLayout) {\n            const labelW = label.getTextWidth();\n\n            const iterLinks = (side) => {\n                const limit = consNode.bbox.x + (side === LEFT? 0 : consNode.bbox.width);\n                let links = consNode.links[side];\n                let lastX = limit, x, i = 0, link;\n                for(; i < links.length; i++) {\n                    link = links[i];\n                    if ((link.toNode() === consNode) && link.switchSides()) continue; // Switching side links are either on top or at the bottom of the row in the label area, cannot go over labels\n                    x = link.x; // Link margin not taken into account, compensated with applied padding\n                    if (labelLayout.nextLink(consNode.act, side === LEFT, link.x, lastX, limit, ctx))\n                        break;\n                    lastX = x;\n                }\n                return Math.abs(lastX + ((side === LEFT? -1 : 1) * (i? this.horizLinkToLinkDist : this.horizLinkToNodeDist)) - limit);\n            };\n\n            labelLayout.startLayout(consNode.act, labelW, ctx);\n            if (consNode.hasLinks() && labelLayout.nextLink) {\n                iterLinks(RIGHT);\n                iterLinks(LEFT);\n            }\n\n            let spacing = labelLayout.getNodeToLabelSpacing(consNode.act, consNode.bbox, labelW, ctx);\n            if (spacing < 0) {\n                label.move(true, -spacing + labelW);\n            }\n            else {\n                label.move(false, spacing);\n            }\n        }\n    }\n\n    drawLink(link, parentElt, renderer, ctx) {\n        let cons = link.ar[0];\n        const toNode = cons.to.consNode;\n\n        // If the link starts from one side (left/right) of the node and comes to the node on the otherside.\n        let startLeft = Gantt.constraintTypes.isFromStart(cons.type);\n        let endLeft = Gantt.constraintTypes.isToStart(cons.type);\n        let points = new Array(startLeft != endLeft? 6 : 4);\n\n        link.nodes = null;\n        for(let i = 0, count = link.ar.length, fromNode, x, y, iPoint; i < count; i++) {\n            cons = link.ar[i];\n            iPoint = 0;\n            fromNode = cons.from.consNode;\n            points[iPoint++] = {\n                x : startLeft? fromNode.bbox.x : (fromNode.bbox.x + fromNode.bbox.width),\n                y : y = fromNode.connectors[OUTGINGS[cons.type]]\n            };\n            points[iPoint++] = {\n                x : link.x,\n                y : y\n            };\n            if (startLeft !== endLeft) {\n                y = fromNode.index < toNode.index? (toNode.bbox.y + this.switchSideLinkVertMargin)\n                    : (toNode.bbox.y + toNode.bbox.rowHeight - this.switchSideLinkVertMargin);\n                points[iPoint++] = {\n                    x : link.x,\n                    y : y\n                };\n                x = endLeft? (toNode.bbox.x - this.horizSwitchSideLinkToNodeDist) :\n                    (toNode.bbox.x + toNode.bbox.width + this.horizSwitchSideLinkToNodeDist);\n                points[iPoint++] = {\n                    x : x,\n                    y : y\n                };\n                points[iPoint++] = {\n                    x : x,\n                    y : y = toNode.connectors[INCOMINGS[cons.type]]\n                };\n            }\n            else {\n                points[iPoint++] = {\n                    x : link.x,\n                    y : y = toNode.connectors[INCOMINGS[cons.type]]\n                };\n            }\n            points[iPoint++] = {\n                x : endLeft? toNode.bbox.x : (toNode.bbox.x + toNode.bbox.width),\n                y : y\n            };\n            cons.nodes = renderer.drawLink(cons, points, STYLE_ARROW, parentElt, ctx);\n        }\n    }\n\n    drawRowLinks(rowIndex, parentElt, renderer, ctx) {\n        let side, links, i, count;\n        for(let consNode = this.nodes[rowIndex]; consNode; consNode = consNode.next) {\n            if (consNode.linksDisplayed === consNode.links.length) continue;\n            for(side = 0; side < SIDE_COUNT; side++) {\n                links = consNode.getLinks(side);\n                for(i = 0, count = links.length; i < count; ++i) {\n                    if (!links[i].isDisplayed()) {\n                        consNode.linksDisplayed++;\n                        this.drawLink(links[i], parentElt, renderer, ctx);\n                    }\n                }\n            }\n        }\n    }\n\n    clearLinks() {\n        for(let i = 0, count = this.nodes? this.nodes.length : 0; i < count; i++) {\n            for(let node = this.nodes[i]; node; node = node.next) {\n                node.clearLinks();\n            }\n        }\n    }\n\n    resetLayout() {\n        for(let i = 0, count = this.nodes? this.nodes.length : 0; i < count; i++) {\n            for(let node = this.nodes[i]; node; node = node.next) {\n                node.resetLayout();\n            }\n        }\n    }\n\n    destroy() {\n        if (this.nodes) {\n            for(let i = 0, count = this.nodes.length; i < count; i++) {\n                if (this.nodes[i].act) {\n                    this.nodes[i].act.consNode = null;\n                }\n            }\n            this.nodes = null;\n        }\n    }\n}\n\nGantt.components.ConstraintLayout.impl = ConstraintLayout;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/constraintlayout.js","'use strict';\n\nimport Gantt from './core';\nimport DragDrop from './dragdrop';\n\nconst ROW_ID_PREFIX = 'timeTableRow_';\nconst ACTIVITY_ID_PREFIX = '';\nconst defaultOptions = {\n    bufferPageSize : 3\n};\n\nconst TIME_MARKER_DRAG_ITEM = 'dragg-item';\nconst TIME_TABLE_ACTIVITY_CLASSNAME = 'time-table-activity';\nconst TIME_TABLE_ROW = 'time-table-row';\nconst UNSELECTABLE_CLASSNAME = 'g-unselectable';\n\nconst DEFAULT_ACTIVITY_CLASSNAME = TIME_TABLE_ACTIVITY_CLASSNAME + ' ' + UNSELECTABLE_CLASSNAME;\nconst MILESTONE_CLASSNAME = DEFAULT_ACTIVITY_CLASSNAME + ' milestone';\nconst PARENT_ACTIVITY_CLASSNAME = DEFAULT_ACTIVITY_CLASSNAME + ' parent-activity';\nconst HIGHLIGHT_CLASS = 'highlight';\nconst SELECTION_CLASS = 'selected';\nconst SELECT_CONTENT_CLASSNAME = 'select-content';\n\nconst DECORATION_INVALID_TYPE = 'invalid';\nconst DECORATION_INVALID_CLASS = 'time-table-invalid';\nconst DECORATION_BREAK_TYPE = 'break';\nconst DECORATION_BREAK_CLASS = 'time-table-break';\n\nexport default class TimeTable extends Gantt.components.TimeTable {\n    constructor(gantt, node, config) {\n        super(gantt, node, Gantt.utils.mergeObjects({}, defaultOptions, config));\n\n        // Selection management\n        Gantt.utils.addEventListener(node, 'click', (e) => this.processClick(e), true);\n        Gantt.utils.addEventListener(node, 'dblclick', (e) => this.processDoubleClick(e), true);\n        Gantt.utils.addEventListener(node, 'contextmenu', (e) => this.processMouseDown(e), true);\n        const selectionHandler = gantt.selection;\n        selectionHandler.on(Gantt.events.ACTIVITY_SELECTION_CLEARED, (e, sels) => this.clearActivitySelection(sels));\n        selectionHandler.on(Gantt.events.ACTIVITY_SELECTED, (e, sels) =>  this.selectActvities(sels));\n        selectionHandler.on(Gantt.events.ACTIVITY_UNSELECTED, (e, sels) =>  this.unselectActvities(sels));\n        selectionHandler.on(Gantt.events.ROW_SELECTED, (e, sels) =>  this.selectRows(sels));\n        selectionHandler.on(Gantt.events.ROW_UNSELECTED, (e, sels) =>  this.unselectRows(sels));\n        selectionHandler.on(Gantt.events.ROW_SELECTION_CLEARED, (e, sels) =>  this.unselectRows(sels));\n    }\n\n    // Method called from super class\n    //noinspection JSUnusedGlobalSymbols\n    setConfiguration(config) {\n        this.destroy();\n\n        this.create();\n\n        this.bufferPageSize = config.bufferPageSize;\n\n        const rendererClass = Gantt.components.Renderer.impl || Gantt.components.Renderer;\n        this.activityRenderer = new rendererClass(config.renderer, ActivityRendererPrototype, this.gantt);\n\n        this.interactor = this.config.interactor;\n        this.moveInterator = this.interactor && this.interactor.move;\n        this.mouseHandler = this.interactor && this.interactor.click;\n\n        const onScroll = (e) => {\n            if (this.synchronizeTableTop(e.target.scrollTop)) {\n                e.preventDefault && e.preventDefault();\n            }\n        };\n        Gantt.utils.addEventListener(this.scroller, 'scroll', onScroll);\n        if (this.moveInterator) this.initDragAndDrop();\n        this.initTooltip();\n        this.events = {};\n\n        const layoutClass = Gantt.components.ActivityLayout.impl || Gantt.components.ActivityLayout;\n        this.layout = new layoutClass(config && config.layout, null /* proto */, { gantt : this.gantt });\n    }\n\n    create() {\n        this.scroller = document.createElement('div');\n        this.scroller.className = 'time-table-scroller';\n        // CSS layout\n        this.scroller.style.position = 'absolute';\n        this.scroller.style.height = '100%';\n        this.scroller.style.top = '0';\n        this.scroller.style.left = '0';\n        this.scroller.style.right = '0';\n        this.scroller.style.bottom = '0';\n        this.scroller.style.overflowX = 'scroll';\n        this.node.appendChild(this.scroller);\n\n        // Element used for getting the width of the visible time table area.\n        const timeTableWidthTester = document.createElement('div');\n        this.getVisibleWidth = function () {\n            return timeTableWidthTester.offsetWidth;\n        };\n        // CSS layout\n        timeTableWidthTester.style.width = '100%';\n        timeTableWidthTester.style.height = 0;\n        this.scroller.appendChild(timeTableWidthTester);\n\n        // Element used for getting the height of the visible time table area, excluding the horizontal scrollbar height\n        const timeTableHeightTester = document.createElement('div');\n        //noinspection JSUnusedGlobalSymbols\n        this.getVisibleHeight = function () {\n            return timeTableHeightTester.offsetHeight;\n        };\n        timeTableHeightTester.style.width = 0;\n        timeTableHeightTester.style.position = 'absolute';\n        timeTableHeightTester.style.top = 0;\n        timeTableHeightTester.style.height = '100%';\n        this.scroller.appendChild(timeTableHeightTester);\n\n        //noinspection JSUnresolvedVariable\n        this.body = document.createElement('div');\n        this.body.style.minHeight = '1px'; // Horizontal scroll position for this.scroll is set before the body is given a height. If this.scroll content (this.body) has no height, the h-scroll position does not apply\n        this.body.className = 'time-table-body';\n        //this.scroller.style.width = 0;\n\n        this.scroller.appendChild(this.body);\n\n        Gantt.utils.addEventListener(this.body, 'mouseenter', (e) => {\n            const row = this.getTimeTableRowNode(e.target);\n            if (row) {\n                this.gantt.highlightRow(row.id.substring(ROW_ID_PREFIX.length), true, true);\n            }\n        }, true);\n        Gantt.utils.addEventListener(this.body, 'mouseleave', (e) => {\n            const row = this.getTimeTableRowNode(e.target);\n            if (row) {\n                this.gantt.highlightRow(row.id.substring(ROW_ID_PREFIX.length), false, true);\n            }\n        }, true);\n    }\n\n    update() {\n        this.draw();\n    }\n\n    createUpdates(parent) {\n        return new (Gantt.components.GanttUpdates.impl || Gantt.components.GanttUpdates)(parent, {\n            applyReload : () => {\n                this.draw();\n            },\n\n            applyUpdates : () => {\n                const containsRowChanges = this.ctsGraph && parent.containsRowChanges();\n                if (containsRowChanges) {\n                    this.resetConstraints();\n                }\n                this.draw();\n            }\n        });\n    }\n\n    //noinspection JSUnusedLocalSymbols\n    renderRow(row, ctx) {\n        const timeLine = this.gantt.timeLine;\n        var actRow = {\n            row : row,\n            getX : function(date) {\n                return timeLine.getXFromMillis(date);\n            },\n            setRowHeight : function(h) {\n                this.height = h;\n            }\n        };\n        var node = document.createElement('div');\n        node.id = ROW_ID_PREFIX + row.id;\n        const table = this.gantt.table;\n        // In Firefox, the use of tr.offsetHeight leads to error.\n        // For a row of height 32.5px, tr.offsetHeight will return 33px where as the actual display of the row takes 32px.\n        // Gantt.utils.getHeight internally invokes the JQuery.height() function which is more reliable.\n        let oldRowHeight = table.getRowHeight(row);\n        const variableLayoutRowHeight = this.layout.allowVariableRowHeight();\n        actRow.tableRowHeight = actRow.height = !variableLayoutRowHeight && this.activityRenderer.rowHeight && this.activityRenderer.rowHeight(row) || oldRowHeight;\n        if (!variableLayoutRowHeight && (actRow.height != oldRowHeight)) {\n            table.setRowHeight(row, actRow.height);\n            // For example if actRow.height < minimum table row height\n            actRow.height = oldRowHeight = table.getRowHeight(row);\n        }\n\n        // See http://help.dottoro.com/lhwdpnva.php\n        // for making nodes unselectable\n        node.className = (ctx.odd? TIME_TABLE_ROW + ' odd' : TIME_TABLE_ROW) + ' ' + UNSELECTABLE_CLASSNAME;\n        //node.style.backgroundColor = row.tr.style.backgroundColor;\n\n        var rowSpan = document.createElement('div');\n        rowSpan.innerHTML = '' + (row.index + 1);\n        rowSpan.className = 'row-number';\n        node.appendChild(rowSpan);\n        actRow.rowNode = node;\n\n        if (this.activityRenderer.generateRowDecorations) {\n            this.generateRowDecorations(row, node, ctx);\n        }\n\n        this.renderActivities(actRow, ctx);\n\n        if (actRow.height != oldRowHeight) {\n            table.setRowHeight(row, actRow.height);\n            // For example if actRow.height < minimum table row height\n            actRow.height = table.getRowHeight(row);\n        }\n\n        node.style.height = actRow.height + 'px';\n        return actRow;\n    }\n\n    renderActivities(activityRow) {\n        const activityFilter = this.getActivityFilter(),\n            activities = activityRow.row.activities,\n            actCount = activities && activities.length || 0;\n        let actNodes, iAct, act, actNode;\n        activityRow.activities = actNodes = [];\n        if (actCount) {\n            for(iAct = 0; iAct < actCount; ++iAct) {\n                act = activities[iAct];\n\n                act.node = actNode = (!activityFilter || activityFilter.accept(act, activityRow.row))\n                    && this.renderActivity(act, activityRow.row, activityRow.rowNode) || null;\n                if (actNode) {\n                    if (act.id) {\n                        actNode.id = ACTIVITY_ID_PREFIX + (activityRow.rowNode.id) + act.id;\n                    }\n                    actNodes.push(act);\n                    activityRow.rowNode.appendChild(actNode);\n                }\n            }\n            this.layout.layout(activityRow);\n        }\n    }\n\n    getActivityFilter() {\n        const activityFilter = this.gantt.activityFilter;\n        return activityFilter && !activityFilter.isEmpty()? activityFilter : null;\n    }\n\n    renderActivity(act, row, timeTableRowNode) {\n        return this.activityRenderer.draw(act, timeTableRowNode, row);\n    };\n\n    getX(date) {\n        return this.gantt.timeLine.getXFromMillis(date);\n    }\n\n    draw(forceRedraw) {\n        if (this.container) {\n            this.body.removeChild(this.container);\n            this.container = null;\n        }\n        let ctsNode;\n        if (this.ctsGraph && forceRedraw) {\n            this.resetConstraints();\n        }\n\n        // Draw the height of several row pages\n        var top = this.scroller.scrollTop;\n        this.lastRepaintY = top;\n        if (top < 0) {\n            top = 0;\n        }\n        var table = this.gantt.table;\n        top-=  Math.abs(((this.bufferPageSize - 1) / 2) * this.scroller.clientHeight);\n        if (top < 0) {\n            top = 0;\n        }\n\n        const timeLine = this.gantt.timeLine;\n        const ctx = {\n            getX : function(millis) { timeLine.getXFromMillis(millis); },\n            horiz : this.gantt.timeLine.getScrollableHorizon(),\n            gantt : this.gantt\n        };\n        // Generate  global decorations\n        if (this.activityRenderer.generateDecorations && (forceRedraw || !this.backgroundCtnr)) {\n            this.generateGlobalDecorations(ctx);\n        }\n        var row = table.getRowAt(top);\n        if (row && row.getData()) { // If no rows are displayed, a row displaying 'No matching records found' is displayed instead: no activities to display\n            top = table.getRowTop(row);\n\n            const ctsRows = this.ctsGraph? [] : null, firstRowIndex = row.index;\n\n            var maxBufferHeight = top + (this.bufferPageSize * this.scroller.clientHeight);\n            var yFinal = Math.min(maxBufferHeight, table.getHeight());\n            var variableHeightLayout = this.layout.allowVariableRowHeight() || this.activityRenderer.rowHeight;\n            ctx.odd = (row.index % 2) == 0; // This is the way datatables work...\n\n            this.container = this.createContainer(top);\n\n            var activityRow;\n            while(row && (top < yFinal)) {\n                activityRow = row.activityRow;\n                if (forceRedraw || !activityRow || !activityRow.rowNode) {\n                    row.activityRow = activityRow = this.renderRow(row, ctx);\n                }\n                this.container.appendChild(activityRow.rowNode);\n\n                if (ctsRows) {\n                    ctsRows.push({ y: top, height : activityRow.height, row : row });\n                }\n\n                top+= activityRow.height;\n                if (variableHeightLayout) {\n                    // Row height can change so that the yFinal\n                    yFinal = Math.min(maxBufferHeight, table.getHeight());\n                }\n                ctx.odd = !ctx.odd;\n                row = table.nextRow(row);\n            }\n\n            if (this.ctsGraph && this.ctsGraph.node) {\n                this.body.insertBefore(this.container, this.ctsGraph.node);\n            }\n            else {\n                this.body.appendChild(this.container);\n            }\n            if (variableHeightLayout) {\n                this.gantt.updateScrollerHeight();\n            }\n\n            if (this.ctsGraph) {\n                let updateScrolls = false;\n                this.ctsGraph.draw(ctsRows, (row) => {\n                    // Draw callback to draw additional rows\n                    activityRow = row.activityRow;\n                    if (forceRedraw || !activityRow || !activityRow.rowNode) {\n                        row.activityRow = activityRow = this.renderRow(row, ctx);\n                    }\n                    if (row.index > firstRowIndex) {\n                        // We only add row nodes rendered after the last row node above.\n                        // The constraint draw algorithm ensures that additional rows to be rendered are drawn\n                        // in ascending order, from the lowest to the highest index.\n                        this.container.appendChild(activityRow.rowNode);\n                        updateScrolls = true;\n                    }\n                }).then(() => {\n                    if (forceRedraw) {\n                        this.body.appendChild(ctsNode);\n                    }\n                    if (updateScrolls) {\n                        this.gantt.updateScrollerHeight();\n                    }\n                });\n            }\n        }\n        this._ready = true;\n    };\n\n    createContainer(y) {\n        const c = document.createElement('div');\n        c.className = 'time-table-row-container';\n        //c.style.width = this.gantt.getTimeTableWidth() + 'px';\n        c.style.width = this.getBodyWidth() + 'px';\n        c.style.overflow = 'none';\n        c.style.position = 'absolute';\n        c.style.padding = 0;\n        c.style.border = 'none';\n        c.style.top = y + 'px';\n        c.style.left = 0;\n        return c;\n    }\n\n    on(event, handler) {\n        if (event == Gantt.events.TIME_TABLE_INIT) {\n            if (this._ready) {\n                handler.call(this)\n            }\n            else {\n                super.on(this, Gantt.events.TIME_TABLE_INIT, handler);\n            }\n        }\n    }\n\n    onResize() {\n        this.draw(false);\n    }\n\n    static isActivityNode(elt) {\n        return Gantt.utils.hasClass(elt, TIME_TABLE_ACTIVITY_CLASSNAME);\n    }\n\n    getActivityNode(elt) {\n        for(;elt && (elt !== this.body); elt = elt.parentNode) {\n            if (TimeTable.isActivityNode(elt)) {\n                return elt;\n            }\n        }\n        return null;\n    }\n\n    getActivity(activityElt) {\n        var tr = this.getTimeTableRowNode(activityElt);\n        if (tr) {\n            var row = this.getRow(tr.id.substring(ROW_ID_PREFIX.length));\n\n            var activities = row && row.activityRow && row.activityRow.activities;\n            if (activities) {\n                for (var iAct = 0; iAct < activities.length; iAct++) {\n                    if (activities[iAct].node == activityElt) {\n                        return activities[iAct];\n                    }\n                }\n            }\n        }\n        return null;\n    }\n\n    getTimeTableRowNode(activityNode) {\n        for(let tr = activityNode; tr !== this.body; tr = tr.parentNode) {\n            if (Gantt.utils.hasClass(tr, TIME_TABLE_ROW)) {\n                return tr;\n            }\n        }\n        return null;\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    getActivityRow(activity) {\n        var tr, actNode = activity.node && activity.start && activity.node || activity;\n        for(tr = actNode.parentNode; tr != this.body; tr = tr.parentNode) {\n            if (this.utils.hasClass(tr, TIME_TABLE_ROW)) {\n                break;\n            }\n        }\n        return tr && this.getRow(tr.id.substring(ROW_ID_PREFIX.length));\n    }\n\n    getRow(id) {\n        return this.gantt.table.getRow(id);\n    }\n\n    scrollToRow(row) {\n        const y = this.gantt.table.getRowTop(row);\n        var top = this.scroller.scrollTop;\n        // If row before or after visible area\n        if ((y < top) || (y > (top + this.getVisibleHeight()))) {\n            this.scrollToY(y);\n        }\n        // Check if row is fully visible\n        else {\n            // Draw of row has been called, we can access its height.\n            const rowHeight = this.gantt.getRowHeight(row);\n            if ((top + this.getVisibleHeight()) < (y + rowHeight)) {\n                this.scrollToY(y);\n            }\n        }\n    }\n\n    setFirstVisibleRow(row) {\n        const y = this.gantt.table.getRowTop(row);\n        this.scrollToY(y);\n    }\n\n    scrollToY(y) {\n        this.scroller.scrollTop = y;\n        // For unit test, we want both the time table and table have their top synchronised immediatly\n        this.synchronizeTableTop(y);\n    }\n\n    setScrollTop(y) {\n        this.scroller.scrollTop = y;\n    }\n\n    synchronizeTableTop(top) {\n        const table = this.gantt.table && this.gantt.table.getScrollableTable();\n        if (table) {\n            // Table may not be initialized yet.\n            table.scrollTop = top;\n\n            var scrollTop = table.scrollTop;\n            // No empty space below the table which impacts the default scrolling strategy of the element.\n            // When reaching the bottom of the table, last scroll down events won't impact table's display\n            // We need to reflect that on the time table scrollbar\n            //e.target.scrollTop = scrollTop;\n            if ((this.lastRepaintY == undefined) || Math.abs(scrollTop - this.lastRepaintY) > this.scroller.clientHeight) {\n                this.draw();\n            }\n            return true;\n        }\n        return false;\n    }\n\n    highlightActivity(act, highlight, deSelectAll) {\n        if (deSelectAll && (!act || !Gantt.utils.hasClass(act, HIGHLIGHT_CLASS))) {\n            const highlightActs = this.body.querySelectorAll('.' + TIME_TABLE_ACTIVITY_CLASSNAME + '.' + HIGHLIGHT_CLASS);\n            if (highlightActs && highlightActs.length) {\n                for(let i = 0; i < highlightActs.length; i++) {\n                    Gantt.utils.removeClass(highlightActs[i], HIGHLIGHT_CLASS);\n                }\n            }\n        }\n        if (act) {\n            Gantt.utils.toggleClass(act, HIGHLIGHT_CLASS, highlight);\n        }\n    }\n\n    highlightRow(row, highlight,deSelectAll) {\n        if (deSelectAll) {\n            var highlightRows = this.body.querySelectorAll('.' + TIME_TABLE_ROW + '.' + HIGHLIGHT_CLASS);\n            if (highlightRows && highlightRows.length) {\n                for(var i = 0; i < highlightRows.length; i++) {\n                    Gantt.utils.removeClass(highlightRows[i], HIGHLIGHT_CLASS);\n                }\n            }\n        }\n        if (row) {\n            if (row.activityRow && row.activityRow.rowNode) {\n                Gantt.utils.toggleClass(row.activityRow.rowNode, HIGHLIGHT_CLASS, highlight);\n            }\n        }\n    }\n\n    getDisplayedActivitiesTimeRange() {\n        var top = this.scroller.scrollTop;\n        if (top < 0) {\n            top = 0;\n        }\n        var table = this.gantt.table;\n\n        var row = table.getRowAt(top);\n        if (!row || !row.getData()) {\n            return null; // If no rows are displayed, a row displaying 'No matching records found' is displayed instead: no activities to display\n        }\n        top = table.getRowTop(row);\n        var yFinal = Math.min(top + this.scroller.clientHeight, table.getHeight());\n        const activityFilter = this.getActivityFilter();\n        var minDate, maxDate = 0, activities, act, iAct, start, end, actCount;\n        while(row && (top < yFinal)) {\n            top+= row.tr.offsetHeight;\n            activities = row.activityRow && row.activityRow.activities;\n            if (actCount = activities && activities.length) {\n                for(iAct = 0; iAct < actCount; ++iAct) {\n                    act = activities[iAct];\n                    if (!activityFilter || activityFilter.accept(act, row)) {\n                        start = act.start;\n                        end = act.end;\n                        if (minDate) {\n                            if (minDate > start) {\n                                minDate = start;\n                            }\n                            if (maxDate < end) {\n                                maxDate = end;\n                            }\n                        }\n                        else {\n                            minDate = start;\n                            maxDate = end;\n                        }\n                    }\n                }\n            }\n            row = table.nextRow(row);\n        }\n        return minDate && { start: minDate, end: maxDate };\n    };\n\n    getScrollLeft() {\n        return this.scroller.scrollLeft;\n    }\n\n    setScrollLeft(x) {\n        this.scroller.scrollLeft = x;\n    }\n\n    getScroller() {\n        return this.scroller;\n    }\n\n    getRightMargin() {\n        return this.scroller.offsetWidth - this.getVisibleWidth();\n    }\n\n    getBottomMargin() {\n        return this.scroller.offsetHeight - this.getVisibleHeight();\n    }\n\n    setBodyWidth(w) {\n        //this.timeScroller.style.width = this.timeLine.getWidth() + 'px';\n        this.body.style.width = w + 'px';\n    }\n\n    getBodyWidth() {\n        return this.body.offsetWidth;\n    }\n\n    setBodyHeight(h) {\n        this.body.style.height = h + 'px';\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    getBodyHeight() {\n        return Gantt.utils.getHeight(this.scroller);\n    }\n\n    /*                 */\n    /*     Tooltips    */\n    /*                 */\n    initTooltip() {\n        const timeTable = this;\n        const resGantt = this.gantt.isResourceGantt();\n        this.gantt.tooltip.installTooltip({\n            // The container that contains elements to display tooltip for.\n            container: this.body,\n            // The container inside which bounds the tooltip can be displayed\n            getTooltipDisplayContainer() { return timeTable.gantt.getBody(); },\n            // Returns an element in the node hierarchy for which a tooltip can be displayed\n            getTooltipElement(node) { return timeTable.getActivityNode(node); },\n            getTooltipData(actNode) { return timeTable.getActivity(actNode); },\n            renderTooltip(actNode /* The element returned by getTooltipElement */,\n                          act /* data returned by getTooltipData for the specified tooltipElt */,\n                          tooltipCtnr /* The container of the tooltip to fill with info. */) {\n                if (act && (resGantt && act.row || act)) {\n                    timeTable.activityRenderer.getTooltip(tooltipCtnr, act, act.row);\n                }\n            },\n            enteringTooltipElement(actNode, act) {\n                if (timeTable.isDragAndDropping()) return false;\n                if (actNode) {\n                    timeTable.highlightActivity(actNode, true, true);\n                }\n                return true;\n            },\n            leavingTooltipElement(actNode, act) {\n                if (actNode) {\n                    timeTable.highlightActivity(actNode, false, true);\n                }\n            }\n        });\n    }\n\n    hideTooltip() {\n        this.gantt.tooltip.hideTooltip(0);\n    }\n    /*                 */\n    /*      Search     */\n    /*                 */\n\n    //noinspection JSUnusedGlobalSymbols\n    searchActivities(row, filter) {\n        const activities = row.activities;\n        const actCount = activities && activities.length;\n        if (actCount) {\n            const filterFct = typeof filter === 'string'\n                && ((act, object, filter) => { return this.activityRenderer.filter(act, row, filter); })\n                || filter;\n            for(let iAct = 0; iAct < actCount; ++iAct) {\n                if (filterFct(activities[iAct], row, filter)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n\n    /*                   */\n    /*   Drag and drop   */\n    /*                   */\n\n    initDragAndDrop() {\n        const node = this.body, timeTable = this;\n        this.dragDropHandler = new DragDrop(node);\n        this.dragDropHandler.addHandler({\n            startMove : function(target, initOffsetX, initOffsetY) {\n                var actNode = timeTable.getActivityNode(target);\n                if (actNode) {\n                    this.activity = timeTable.getActivity(actNode);\n                    if (this.activity == null) {\n                        console.log('null activity!');\n                        return false;\n                    }\n                    this.initActivityRow = timeTable.getTimeTableRowNode(actNode);\n                    this.row = this.initRow = timeTable.getRow(this.initActivityRow.id.substring(ROW_ID_PREFIX.length));\n                    this.initTimeTablePos = timeTable.gantt.getTimeTableCoordinates(target, {x: initOffsetX, y: initOffsetY});\n                    this.initScrollLeft = node.scrollLeft;\n                    this.initScrollTop = node.scrollTop;\n                    this.timeLineItem = {\n                        start : new Date(this.activity.start),\n                        type : 'box'\n                    };\n                    this.timeLineItem.context = {\n                        start : this.timeLineItem.start.format(),\n                        startRow : this.initRow.name\n                    };\n                    timeTable.hideTooltip();\n                    timeTable.gantt.highlightRow(this.row, true, true);\n                    timeTable.startDraggingActivity(this);\n                    return actNode;\n                }\n                return false;\n            },\n            move : function(pos) {\n                pos.y = undefined; // We don't change the activity Y position\n                var scrollDiffX = node.scrollLeft - this.initScrollLeft;\n                if (scrollDiffX) {\n                    pos.dx+= scrollDiffX;\n                    pos.x+= scrollDiffX;\n                }\n                var scrollDiffY = node.scrollTop - this.initScrollTop;\n                if (scrollDiffY) {\n                    pos.dy+= scrollDiffY;\n                }\n                var preRow = this.row;\n                var newRow = timeTable.gantt.table.getRowAt(this.initTimeTablePos.y + pos.dy, preRow);\n                this.currentTime = new Date(timeTable.gantt.timeLine.getTimeAt(pos.x));\n                if (newRow) {\n                    this.row = newRow;\n                    if ((preRow.id !== newRow.id) && (this.initRow.id !== preRow.id)) { // Keep highlighting the init row\n                        timeTable.gantt.highlightRow(preRow, false);\n                    }\n                    if (preRow.id !== newRow.id) {\n                        if (this.initRow.id !== preRow.id) {\n                            timeTable.gantt.highlightRow(preRow, false);\n                        }\n                        if (this.initRow.id !== newRow.id) {\n                            timeTable.gantt.highlightRow(newRow, true);\n                        }\n                        if (newRow.activityRow) {\n                            newRow.activityRow.rowNode.appendChild(timeTable.dragDropHandler.draggedObject);\n                        }\n                    }\n                    return this.row.id !== this.initRow.id? timeTable.acceptActivityRowChange(this) : timeTable.acceptActivityMove(this);\n                }\n                else {\n                    return false;\n                }\n            },\n            moved : function() {\n                this.updateTimeLineItem();\n            },\n            restoreInitPosition : function() {\n                if (this.row && (this.initRow.id !== this.row.id)) {\n                    timeTable.gantt.highlightRow(this.row, false);\n                    this.row = this.initRow;\n                }\n                node.scrollTop = this.initTop;\n            },\n            stopMove : function() {\n                timeTable.stopDraggingActivity(this);\n                timeTable.gantt.timeLine.removeTimeLineItem(TIME_MARKER_DRAG_ITEM);\n                if (this.row) {\n                    timeTable.gantt.highlightRow(this.row, true, true);\n                }\n            },\n            applyMove : function() {\n                timeTable.applyActivityMove(this);\n            },\n            cancel : function() {\n                timeTable.abortActivityMove();\n            },\n            updateTimeLineItem : function() {\n                timeTable.gantt.timeLine.setTimeLineItem(TIME_MARKER_DRAG_ITEM, this.createDragTimeLineItem());\n            },\n            createDragTimeLineItem : function() {\n                var item = this.timeLineItem, changeRow = this.row.id !== this.initRow.id;\n                item.className = TIME_MARKER_DRAG_ITEM + ' ' + (timeTable.dragDropHandler.invalid? 'dragg-invalid' : 'dragg-valid');\n                //item.context.draggStatusClass = dragDropHandler.invalid? 'dragg-invalid' : 'dragg-valid';\n                item.context.current = this.currentTime.format();\n                item.start = this.currentTime;\n                item.context.title = Gantt.utils.formatString(changeRow? 'Gantt.ChangeActivityRow' : 'Gantt.MoveActivity', this.activity);\n                if (changeRow) {\n                    item.context.currentRow = this.row.name;\n                }\n                item.content = Gantt.utils.formatString(changeRow\n                    ? 'timeLine.changeRowItem.fmt' : 'timeLine.newTimeItem.fmt', item.context);\n                return item;\n            }\n        });\n        this.dragDropHandler.addEventListener(node, 'mousedown', this.dragDropHandler.startDragMouse, true); // Capturing!\n    };\n\n    startDraggingActivity(actParam) {\n        if (this.moveInterator && this.moveInterator.startMove) {\n            this.moveInterator.startMove(actParam);\n        }\n    }\n\n    acceptActivityRowChange(actParam) {\n        if (this.moveInterator && this.moveInterator.acceptRowChange) {\n            return this.moveInterator.acceptRowChange(actParam);\n        }\n        return true;\n    }\n\n    acceptActivityMove(actParam) {\n        if (this.moveInterator && this.moveInterator.acceptMove) {\n            return this.moveInterator.acceptMove(actParam);\n        }\n        return true;\n    }\n\n    abortActivityMove(actParam) {\n        if (this.moveInterator && this.moveInterator.abortMove) {\n            return this.moveInterator.abortMove(actParam);\n        }\n        return true;\n    }\n\n    applyActivityMove(actParam) {\n        if (this.moveInterator && this.moveInterator.applyMove) {\n            return this.moveInterator.applyMove(actParam);\n        }\n        return true;\n    }\n\n    stopDraggingActivity(actParam) {\n        if (this.moveInterator && this.moveInterator.stopMove) {\n            return this.moveInterator.stopMove(actParam);\n        }\n        return true;\n    }\n\n    isDragAndDropping() {\n        return this.dragDropHandler && this.dragDropHandler.draggedObject;\n    }\n\n    /*  Selection methods  */\n    processClick(e) {\n        this.hideTooltip();\n        this.processMouseEvent(e, (e, row, date) => {\n            this.gantt.highlightRow(row, true, true);\n            this.gantt.selection.processClick(e, row);\n            if (this.mouseHandler && this.mouseHandler.rowClicked) {\n                this.mouseHandler.rowClicked(e, row, date);\n            }\n        }, (e, activity, date, row) => {\n            this.gantt.selection.processClick(e, activity);\n            if (this.mouseHandler && this.mouseHandler.activityClicked) {\n                this.mouseHandler.activityClicked(e, activity, date, row);\n            }\n        });\n    }\n\n    processMouseEvent(e, rowCB, activityCB) {\n        //const date = new Date(this.gantt.timeLine.getTimeAt(pos.x));\n        const coord = this.gantt.getTimeTableCoordinates(e.target, { x: event.offsetX, y: event.offsetY});\n        const date = new Date(this.gantt.timeLine.getTimeAt(coord.x));\n        if (e.target && Gantt.utils.hasClass(e.target, TIME_TABLE_ROW)) {\n            const row = this.getRow(e.target.id.substring(ROW_ID_PREFIX.length));\n            if (row) {\n                this.gantt.highlightRow(row, true, true);\n                if (rowCB) {\n                    rowCB(e, row, date)\n                }\n                this.gantt.selection.processClick(e, row);\n            }\n        }\n        else {\n            const actNode = Gantt.utils.closest(e.target, '.' + TIME_TABLE_ACTIVITY_CLASSNAME);\n            const act = actNode && this.getActivity(actNode);\n            if (act) {\n                let row = act.row;\n                if (!row) {\n                    const rowNode = Gantt.utils.closest(e.target, '.' + TIME_TABLE_ROW);\n                    row = this.getRow(rowNode.id.substring(ROW_ID_PREFIX.length));\n                }\n                if (row) {\n                    this.gantt.highlightRow(row, true, true);\n                }\n                if (activityCB) {\n                    activityCB(e, act, date, row);\n                }\n            }\n        }\n    }\n\n    processDoubleClick(e) {\n        this.hideTooltip();\n        this.processMouseEvent(e, (e, row, date) => {\n            if (this.mouseHandler && this.mouseHandler.rowDoubleClicked && row) {\n                this.mouseHandler.rowDoubleClicked(e, row, date);\n            }\n        }, (e, activity, date, row) => {\n            if (this.mouseHandler && this.mouseHandler.activityDoubleClicked) {\n                this.mouseHandler.activityDoubleClicked(e, activity, date, row);\n            }\n        });\n    }\n\n    processMouseDown(e) {\n        this.hideTooltip();\n        if (e.which === 3) {\n            this.processMouseEvent(e, (e, row, date) => {\n                if (this.mouseHandler && this.mouseHandler.rowRightClicked && row) {\n                    this.mouseHandler.rowRightClicked(e, row, date);\n                }\n            }, (e, activity, date, row) => {\n                if (this.mouseHandler && this.mouseHandler.activityRightClicked) {\n                    this.mouseHandler.activityRightClicked(e, activity, date, row);\n                }\n            });\n            e && e.preventDefault && e.preventDefault();\n            e && e.stopPropagation && e.stopPropagation();\n            return false;\n        }\n    }\n\n    //noinspection JSMethodCanBeStatic\n    clearActivitySelection(sels) {\n        for(let i = 0, count = sels.length, sel; i < count; ++i) {\n            sel = sels[i];\n            if (sel.node) {\n                Gantt.utils.removeClass(sel.node, SELECTION_CLASS);\n            }\n        }\n    }\n\n    //noinspection JSMethodCanBeStatic\n    selectActvities(sels) {\n        for(let i = 0, node; i < sels.length; i++) {\n            if (node = sels[i].node) {\n                Gantt.utils.addClass(node, SELECTION_CLASS);\n            }\n        }\n    }\n\n    //noinspection JSMethodCanBeStatic\n    unselectActvities(sels) {\n        for(let i = 0, node; i < sels.length; i++) {\n            if (node = sels[i].node) {\n                Gantt.utils.removeClass(node, SELECTION_CLASS);\n            }\n        }\n    }\n\n    //noinspection JSMethodCanBeStatic\n    selectRows(rows) {\n        for(let i = 0, node; i < rows.length; i++) {\n            if ((node = rows[i].activityRow) && (node = node.rowNode)) {\n                Gantt.utils.addClass(node, SELECTION_CLASS);\n            }\n        }\n    }\n\n    //noinspection JSMethodCanBeStatic\n    unselectRows(rows) {\n        for(let i = 0, node; i < rows.length; i++) {\n            if ((node = rows[i].activityRow) && (node = node.rowNode)) {\n                Gantt.utils.removeClass(node, SELECTION_CLASS);\n            }\n        }\n    }\n\n    //\n    // Decoration management\n    //\n    generateGlobalDecorations(ctx) {\n        const decoContainer = this.gantt.timeLine.getDecorationContainer();\n        if (!decoContainer) {\n            console.warn('No decoration container found in time line');\n            return;\n        }\n        if (this.backgroundCtnr) {\n            decoContainer.removeChild(this.backgroundCtnr);\n            this.backgroundCtnr = null;\n        }\n        if (this.activityRenderer.generateDecorations) {\n            const ctnr = document.createElement('div');\n            ctnr.className = 'time-table-decoration-ctnr decoration-background-ctnr';\n            ctnr.style.position = 'absolute';\n            ctnr.style.left = 0;\n            ctnr.style.top = 0;\n            ctnr.style.bottom = 0;\n            ctnr.style.width = '100%';\n            ctnr.style.height = '100%';\n\n            const objs = this.activityRenderer.generateDecorations(ctx.horiz.start, ctx.horiz.end, ctx);\n            for(let i = 0, count = objs? objs.length : 0, obj; i < count; ++i) {\n                obj = objs[i];\n                //noinspection JSUnresolvedVariable\n                this.addDecoration(obj, ctnr);\n            }\n            if (ctnr.firstChild) {\n                decoContainer.appendChild(this.backgroundCtnr = ctnr);\n            }\n        }\n    }\n\n    generateRowDecorations(row, rowNode, ctx) {\n        const objs = this.activityRenderer.generateRowDecorations(row, ctx.horiz.start, ctx.horiz.end, ctx);\n        for(let i = 0, count = objs? objs.length : 0, obj, node; i < count; ++i) {\n            obj = objs[i];\n            node = this.addDecoration(obj, rowNode);\n            //noinspection JSUnresolvedVariable\n            node.style.zIndex = obj.foreground? 1 : -1;\n        }\n    }\n\n    addDecoration(obj, ctnr) {\n        let node;\n        if (obj.create) {\n            node = obj.create();\n        }\n        else {\n            node = document.createElement('div');\n            if (obj.type) {\n                if (obj.type === DECORATION_INVALID_TYPE) {\n                    node.className = DECORATION_INVALID_CLASS;\n                }\n                else if (obj.type === DECORATION_BREAK_TYPE) {\n                    node.className = DECORATION_BREAK_CLASS;\n                }\n            }\n            else {\n                node.className = DECORATION_BREAK_CLASS;\n            }\n            node.display = 'inline-block';\n        }\n\n        if (obj.className) {\n            Gantt.utils.addClass(node, obj.className);\n        }\n\n        node.style.position = 'absolute';\n        if (obj.background) {\n            node.style.background = obj.background;\n        }\n        //noinspection JSUnresolvedVariable\n        if (obj.color || obj.foreground) {\n            //noinspection JSUnresolvedVariable\n            node.style.color = obj.color || obj.foreground;\n        }\n        const left = this.gantt.timeLine.getXFromMillis(obj.start);\n        node.style.left = left + 'px';\n        node.style.width = this.gantt.timeLine.getXFromMillis(obj.end) - left;\n        node.style.top = '1px';\n        node.style.bottom = '1px';\n        ctnr.appendChild(node);\n        return node;\n    }\n\n    //\n    // Constraints\n    //\n\n    createConstraintGrapherNode() {\n        if (this.ctsGraph && this.ctsGraph.node) {\n            this.body.removeChild(this.ctsGraph.node);\n        }\n        const ctsNode = document.createElement('div');\n        ctsNode.className = 'constraints-grapher';\n        ctsNode.style.height = '100%';\n        ctsNode.style.width = '100%';\n        ctsNode.style.position = 'relative';\n        ctsNode.style.pointerEvents = 'none';\n        return ctsNode;\n    }\n\n    setConstraints(constraints) {\n        this.constraints = constraints;\n        if (constraints && constraints.length) {\n            if (!this.ctsGraph) {\n                const ctsNode = this.createConstraintGrapherNode();\n                this.ctsGraph = new (Gantt.components.ConstraintsGraph.impl || Gantt.components.ConstraintsGraph)(this.gantt, ctsNode, this.gantt.config && this.gantt.config.constraints);\n                this.body.appendChild(ctsNode);\n            }\n            this.ctsGraph.setConstraints(constraints);\n        }\n        else if (this.ctsGraph) {\n            if (this.ctsGraph.node) {\n                this.body.removeChild(this.ctsGraph.node);\n            }\n            if (this.ctsGraph.destroy) {\n                this.ctsGraph.destroy();\n            }\n            this.ctsGraph = null;\n        }\n    }\n\n    resetConstraints() {\n        const ctsNode = this.createConstraintGrapherNode();\n        this.ctsGraph.setNode(ctsNode); // Instead of removing all links, we change the link container\n        this.ctsGraph.setConstraints(this.constraints);\n        this.body.appendChild(ctsNode);\n    }\n\n    //\n    // Destroy\n    //\n    destroy() {\n        if (this.backgroundCtnr) {\n            this.node.removeChild(this.backgroundCtnr);\n            this.backgroundCtnr = null;\n        }\n        if (this.foregroundCtnr) {\n            this.node.removeChild(this.foregroundCtnr);\n            this.foregroundCtnr = null;\n        }\n        if (this.activityRenderer) {\n            this.activityRenderer.destroy();\n            this.activityRenderer = null;\n        }\n\n        if (this.ctsGraph) {\n            this.ctsGraph.destroy();\n            this.ctsGraph = null;\n        }\n    }\n}\n\n//noinspection JSUnusedLocalSymbols,JSUnusedGlobalSymbols\nconst ActivityRendererPrototype = {\n    createShape : function(activity, parentElt, ctx) {\n        const elt = document.createElement('div');\n        const start = activity.start;\n        const end = activity.end;\n        if (end === start) {\n            elt.className = MILESTONE_CLASSNAME;\n            elt.style.border = 'none';\n            elt.style.maxWidth = '0';\n\n            const diamond = document.createElement('div');\n            diamond.className = 'shape';\n            diamond.style.position = 'absolute';\n            diamond.style.top = '8px';\n            diamond.style.left = '0';\n            diamond.style.right = '0';\n            diamond.style.bottom = '-8px';\n            diamond.style.minWidth = '16px';\n            diamond.style.maxHeight = '16px';\n            diamond.style.background = 'inherit';\n            elt.appendChild(diamond);\n        }\n        else if (activity.children && activity.children.length) {\n            elt.className = PARENT_ACTIVITY_CLASSNAME;\n            elt.style.display = 'block';\n            elt.style.backgroundColor = 'transparent';\n            const bar = document.createElement('div');\n            bar.className = 'parent-activity-bar';\n            bar.style.width = '100%';\n            bar.style.height = '50%';\n            elt.appendChild(bar);\n\n            const triangleBar = document.createElement('div');\n            const triangleWidth = 7;\n            triangleBar.style.width = '100%';\n            triangleBar.style.height = '50%';\n            triangleBar.style.backgroundColor = 'transparent';\n\n            const leftTriangle = document.createElement('div');\n            leftTriangle.className = 'top-left-triangle activity-limit';\n            leftTriangle.style.display = 'inline-block';\n            leftTriangle.style.float = 'left';\n            leftTriangle.style.width = '0';\n            leftTriangle.style.height = '0';\n            leftTriangle.style.borderTopStyle ='solid';\n            leftTriangle.style.borderTopWidth = triangleWidth + 'px';\n            leftTriangle.style.borderRightStyle ='solid';\n            leftTriangle.style.borderRightWidth = triangleWidth + 'px';\n            leftTriangle.style.borderRightColor = 'transparent';\n            triangleBar.appendChild(leftTriangle);\n\n            const rightTriangle = document.createElement('div');\n            rightTriangle.className = 'top-right-triangle activity-limit';\n            triangleBar.appendChild(rightTriangle);\n            rightTriangle.style.display = 'inline-block';\n            rightTriangle.style.float = 'right';\n            rightTriangle.style.width = '0';\n            rightTriangle.style.height = '0';\n            rightTriangle.style.borderTopStyle ='solid';\n            rightTriangle.style.borderTopWidth = triangleWidth + 'px';\n            rightTriangle.style.borderLeftStyle ='solid';\n            rightTriangle.style.borderLeftWidth = triangleWidth + 'px';\n            rightTriangle.style.borderLeftColor = 'transparent';\n            elt.appendChild(triangleBar);\n        }\n        else {\n            elt.className = DEFAULT_ACTIVITY_CLASSNAME;\n        }\n        const selElt = document.createElement('div');\n        selElt.className = SELECT_CONTENT_CLASSNAME;\n        selElt.style.height = '100%';\n        selElt.style.display = 'flex';\n        selElt.style.justifyContent = 'space-between';\n        selElt.style.alignItems = 'center';\n        selElt.style.border = 'none';\n        elt.appendChild(selElt);\n        return elt;\n    },\n\n    drawRightContent(elt, icon, text, object, ctx) {\n        var textCtnr = document.createElement('div');\n        textCtnr.style.position = 'absolute';\n        textCtnr.className = 'text-container right';\n        textCtnr.style.left = '100%';\n        textCtnr.style.top = '0';\n        textCtnr.style.height = '100%';\n        if (icon) {\n            const img = document.createElement('img');\n            img.className = 'image-content';\n            img.src = icon;\n            img.alt = '';\n            textCtnr.appendChild(img);\n        }\n        elt.style.overflowX = 'visible';\n        var t = document.createElement('span');\n        t.className = 'text-content';\n        t.innerHTML = text;\n        textCtnr.appendChild(t);\n        elt.appendChild(textCtnr);\n        object.label = {\n            getTextWidth: function() {\n                return t.offsetWidth;\n            },\n            getTextHeight: function() {\n                return t.offsetHeight;\n            },\n            move(left, dist) {\n                Gantt.utils.toggleClass(textCtnr, 'left', left);\n                textCtnr.style.marginLeft = 0; // Default one is for margin on text without links\n                if (left) {\n                    textCtnr.style.left = -dist + 'px';\n                    textCtnr.style.paddingLeft = 0;\n                }\n                else {\n                    textCtnr.style.left = '100%';\n                    textCtnr.style.paddingLeft = dist + 'px';\n                }\n            }\n        };\n        return textCtnr;\n    },\n\n    getText : function(activity, ctx) {\n        return activity.name;\n    },\n\n    getTooltipProperties(act) {\n        const props = [ Gantt.utils.getString(\"gantt.start\"), new Date(act.start).format(),\n            Gantt.utils.getString(\"gantt.end\"), new Date(act.end).format()];\n        if (act.id !== undefined) {\n            props.push(Gantt.utils.getString(\"gantt.id\"));\n            props.push(act.id);\n        }\n        return props;\n    },\n\n    processConfiguration : function(selector, config) {\n        this.defaultProcessConfiguration(selector, config);\n\n        if (config.rowHeight) {\n            this.addRowHeightConfiguration(selector, config.rowHeight);\n        }\n\n        if (config.generateRowDecorations) {\n            this.addGenerateRowDecorations(selector, config.generateRowDecorations);\n        }\n\n        if (config.generateDecorations) {\n            this.addGenerateDecorations(selector, config.generateDecorations);\n        }\n    },\n\n    initialized(config) {\n        const gantt = this.paletteHandler;\n        this.defaultSetBackground = this.setBackground;\n        this.drawDefaultContentSet = this.drawDefaultContent;\n        this.ganttLoadListener = (e)=> {\n            if (gantt.isResourceGantt()) {\n                this.drawDefaultContent = this.drawNoDisplayOverflowContent;\n                this.setBackground = this.defaultSetBackground;\n                this.drawDefaultContent = this.drawDefaultContentSet;\n            }\n            else {\n                // TODO Don't put a setter in a get...\n                this.setBackground = function(shapeElt, bg) {\n                    if (Gantt.utils.hasClass('parent-activity')) {\n                        shapeElt.querySelectorAll('.activity-limit').map(function(elt) {\n                            elt.style.borderColor = bg;\n                        });\n                        shapeElt.querySelector('parent-activity-bar').style.backgroundColor = bg;\n                    }\n                    else {\n                        this.drawDefaultContentSet(shapeElt, bg);\n                    }\n                };\n                this.drawDefaultContent = this.drawRightContent;\n            }\n        };\n        gantt.on(Gantt.events.DATA_LOADED, this.ganttLoadListener);\n    },\n\n    destroy() {\n        if (this.ganttLoadListener) {\n            const gantt = this.paletteHandler;\n            gantt.off(Gantt.events.DATA_LOADED, this.ganttLoadListener);\n            this.ganttLoadListener = null;\n        }\n    },\n\n    addRowHeightConfiguration(selector, config) {\n        var rowHeight;\n        if (typeof config == \"function\") {\n            rowHeight = config;\n        }\n        else if (typeof config == \"string\") {\n            const getter = Gantt.utils.propertyEvaluator(config);\n            if (getter) {\n                rowHeight = (object, ctx) => {\n                    return getter(object, ctx);\n                }\n            }\n        }\n        else {\n            rowHeight = () => {\n                return config;\n            }\n        }\n        if (rowHeight) {\n            const oldRowHeight = this.rowHeight;\n            this.rowHeight = (object, ctx) => {\n                if (!selector || selector(object)) {\n                    return rowHeight(object, ctx,);\n                }\n                return oldRowHeight && oldRowHeight(object, ctx) ;\n            };\n        }\n    },\n\n    //\n    // Decoration management\n    //\n\n    addGenerateRowDecorations(selector, config) {\n        var generateRowDecorations;\n        if (typeof config == \"function\") {\n            generateRowDecorations = config;\n        }\n        else if (typeof config == \"string\") {\n            const getter = Gantt.utils.propertyEvaluator(config);\n            if (getter) {\n                generateRowDecorations = (row, start, end, ctx) => {\n                    return getter(row, start, end, ctx);\n                }\n            }\n        }\n        else {\n            throw new Error('generateRowDecorations must be a function or an accessor to a row method');\n        }\n        if (generateRowDecorations) {\n            const oldGenerateRowDecorations = this.generateRowDecorations;\n            this.generateRowDecorations = (row, start, end, ctx) => {\n                let decorations = oldGenerateRowDecorations && oldGenerateRowDecorations(row, start, end, ctx) || null;\n                if (!selector || selector(row)) {\n                    const newDecos = generateRowDecorations(row, start, end, ctx);\n                    if (newDecos && newDecos.length) {\n                        return (!decorations || !decorations.length)? newDecos : decorations.concat(newDecos);\n                    }\n                }\n                return decorations;\n            };\n        }\n    },\n\n    addGenerateDecorations(selector, config) {\n        var generateDecorations;\n        if (typeof config == \"function\") {\n            generateDecorations = config;\n        }\n        else {\n            throw new Error('generateDecorations must be a function');\n        }\n        if (generateDecorations) {\n            const oldGenerateDecorations = this.generateDecorations;\n            this.generateDecorations = (start, end, ctx) => {\n                let decorations = oldGenerateDecorations && oldGenerateDecorations(start, end, ctx) || null;\n                if (!selector || selector(ctx)) {\n                    const newDecos = generateDecorations(start, end, ctx);\n                    if (newDecos && newDecos.length) {\n                        return (!decorations || !decorations.length)? newDecos : decorations.concat(newDecos);\n                    }\n                }\n                return decorations;\n            };\n        }\n    }\n};\n\nGantt.components.TimeTable.impl = TimeTable;\n\nif (module.hot) {\n    module.hot.accept();\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/timetable.js","'use strict';\n\nimport Gantt from './core';\n\nconst defaultConfig = {\n    keySpeed: 10,\n    showMoveOnInvalid : true,\n    dragActivationThresoldWidth : 5,\n    dragActivationThresoldHeight : 5\n};\n\nexport default class DragDropHandler {\n    constructor(container, config) {\n        Gantt.utils.mergeObjects(this, defaultConfig, config);\n\n        this.container = container;\n\n        this.initialMouseX = undefined;\n        this.initialMouseY = undefined;\n        this.startX = undefined;\n        this.startY = undefined;\n        this.dXKeys = undefined;\n        this.dYKeys = undefined;\n        this.draggedObject = undefined;\n        this.clickedObject = undefined;\n        this.handlers = [];\n        this.methodsToHitch = [];\n        this.hitchedMethods = [];\n    }\n\n    addHandler(handler) {\n        this.handlers.push(handler);\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    removeHandler(handler) {\n        var index = this.handlers.indexOf(handler);\n        if (index > -1) {\n            this.handlers.splice(index , 1);\n            return true;\n        }\n        return false;\n    }\n    attach(element) {\n        element.onmousedown = (e) => this.startDragMouse(e);\n    }\n\n    startDragMouse(e) {\n        var evt = e || window.event;\n        if (evt.button == 2) {\n            // Right button, we cancel the drag if any\n            if (this.draggedObject) {\n                this.cancel(evt);\n            }\n        }\n        else if (!evt.button) {\n            this.initialMouseX = evt.clientX;\n            this.initialMouseY = evt.clientY;\n            evt.target.blur();\n            this.connectDragStarter(evt);\n            return false;\n        }\n    }\n\n    connectDragStarter(evt) {\n        // Drag will be triggered only if the mouse moves more than options.dragActivationThresoldWidth / options.dragActivationThresoldHeight\n        this.initOffsetX = evt.offsetX;\n        this.initOffsetY = evt.offsetY;\n        this.clickedObject = evt.target;\n        this.dXKeys = this.dYKeys = 0;\n        this.addEventListener(document, 'mousemove', this.checkStartDrag);\n        this.addEventListener(document, 'mouseup', this.cancelDragStarter);\n        this.addEventListener(document, 'keydown', this.dragStarterKeys);\n        this.addEventListener(document, 'keypress', this.dragStartSwitchKeyEvents);\n    }\n\n    checkStartDrag(e) {\n        var evt = e || window.event;\n        var dX = evt.clientX - this.initialMouseX;\n        var dY = evt.clientY - this.initialMouseY;\n        if ((Math.abs(dX) >= this.dragActivationThresoldWidth) || (Math.abs(dY) >= this.dragActivationThresoldHeight)) {\n            this.cancelDragStarter();\n            if (this.startDrag()) {\n                this.move(dX, dY);\n            }\n        }\n    }\n\n    dragStartSwitchKeyEvents() {\n        // for Opera and Safari 1.3\n        this.removeEventListener(document, 'keydown', this.dragStarterKeys);\n        this.removeEventListener(document, 'keypress', this.switchKeyEvents);\n        this.addEventListener(document, 'keypress', this.dragStarterKeys);\n    }\n\n    dragStarterKeys(e) {\n        var evt = e || window.event;\n        var key = evt.keyCode;\n        switch (key) {\n            case 37:\t// left\n            case 63234:\n                this.dXKeys -= this.keySpeed;\n                break;\n            case 38:\t// up\n            case 63232:\n                this.dYKeys -= this.keySpeed;\n                break;\n            case 39:\t// right\n            case 63235:\n                this.dXKeys += this.keySpeed;\n                break;\n            case 40:\t// down\n            case 63233:\n                this.dYKeys += this.keySpeed;\n                break;\n            case 13: \t// enter\n            case 27: \t// escape\n                if (evt.preventDefault)\n                    evt.preventDefault();\n                this.cancelDragStarter(evt);\n                return false;\n            default:\n                return true;\n        }\n        if (evt.preventDefault)\n            evt.preventDefault();\n        this.cancelDragStarter(); // Any movement key pressed triggers the start of the drag\n        if (this.startDrag()) {\n            this.move(this.dXKeys, this.dYKeys);\n        }\n        return false;\n    }\n\n    cancelDragStarter() {\n        this.removeEventListener(document, 'mousemove', this.checkStartDrag);\n        this.removeEventListener(document, 'mouseup', this.cancelDragStarter);\n        this.removeEventListener(document, 'keypress', this.dragStarterKeys);\n        this.removeEventListener(document, 'keypress', this.dragStartSwitchKeyEvents);\n        this.removeEventListener(document, 'keydown', this.dragStarterKeys);\n    }\n\n    startDrag() {\n        var obj = this.startMove(this.clickedObject, this.initOffsetX, this.initOffsetY);\n        if (!obj) {\n            return false;\n        }\n        if (this.draggedObject) {\n            this.releaseElement();\n        }\n        this.addEventListener(document, 'mousemove', this.dragMouse);\n        this.addEventListener(document, 'mouseup', this.dropped);\n        this.addEventListener(document, 'keydown', this.dragKeys);\n        this.addEventListener(document, 'keypress', this.switchKeyEvents);\n        this.startX = obj.offsetLeft;\n        this.startY = obj.offsetTop;\n        this.initLeft = obj.style.left;\n        this.initTop = obj.style.top;\n        this.initParentNode = obj.parentNode;\n        this.draggedObject = obj;\n        this.invalid = false;\n        obj.className += ' dragged';\n        return true;\n    }\n\n    callHandlers(meth, evt) {\n        let result, i, handler;\n        for(i = 0; i < this.handlers.length; i++) {\n            handler = this.handlers[i];\n            if (handler[meth]) {\n                result = handler[meth](evt);\n                if (result !== undefined && !result) {\n                    return false;\n                }\n            }\n        }\n        return result;\n    }\n\n    startMove(obj, offsetX, offsetY) {\n        var result = this.callHandlers('startMove', obj, offsetX, offsetY);\n        return result == undefined? obj : result;\n    }\n\n    dragMouse(e) {\n        var evt = e || window.event;\n        var dX = evt.clientX - this.initialMouseX;\n        var dY = evt.clientY - this.initialMouseY;\n        this.move(dX, dY);\n        return false;\n    }\n\n    move(dx, dy) {\n        var i, handler, result;\n        var pos = {\n            dx : dx,\n            dy : dy,\n            x : this.startX + dx,\n            y : this.startY + dy\n        };\n        // Check if move valid\n        this.invalid = false;\n        for(i = 0; i < this.handlers.length; i++) {\n            handler = this.handlers[i];\n            if (handler.move) {\n                result = handler.move(pos);\n                if (result !== undefined && !result) {\n                    this.invalid = true;\n                }\n            }\n        }\n        if (this.invalid && !this.showMoveOnInvalid) {\n            return false;\n        }\n        this.moved(dx, dy);\n        if (pos.x !== undefined) {\n            this.draggedObject.style.left = pos.x + 'px';\n        }\n        if (pos.y !== undefined) {\n            this.draggedObject.style.top = pos.y + 'px';\n        }\n        return true;\n    }\n\n    dragKeys(e) {\n        var evt = e || window.event;\n        var key = evt.keyCode;\n        switch (key) {\n            case 37:\t// left\n            case 63234:\n                this.dXKeys -= this.keySpeed;\n                break;\n            case 38:\t// up\n            case 63232:\n                this.dYKeys -= this.keySpeed;\n                break;\n            case 39:\t// right\n            case 63235:\n                this.dXKeys += this.keySpeed;\n                break;\n            case 40:\t// down\n            case 63233:\n                this.dYKeys += this.keySpeed;\n                break;\n            case 13: \t// enter\n            case 27: \t// escape\n                this.cancel(evt);\n                return false;\n            default:\n                return true;\n        }\n        this.move(this.dXKeys, this.dYKeys);\n        if (evt.preventDefault)\n            evt.preventDefault();\n        return false;\n    }\n\n    addEventListener(elt, event, method, capturing) {\n        const index = this.methodsToHitch.indexOf(method);\n        let hitched = index >= 0? this.hitchedMethods[index] : null;\n        if (index < 0) {\n            this.methodsToHitch.push(method);\n            this.hitchedMethods.push(hitched = (e) => method.call(this, e));\n        }\n        else {\n            hitched = this.hitchedMethods[index];\n        }\n        if (capturing) {\n            Gantt.utils.addEventListener(elt, event, hitched, true);\n        }\n        else {\n            Gantt.utils.addEventListener(elt, event, hitched);\n        }\n    }\n\n    removeEventListener(elt, event, method) {\n        const index = this.methodsToHitch.indexOf(method);\n        if (index >= 0) {\n            Gantt.utils.removeEventListener(elt, event, this.hitchedMethods[index]);\n        }\n    }\n\n\n    switchKeyEvents() {\n        // for Opera and Safari 1.3\n        this.removeEventListener(document, 'keydown', this.dragKeys);\n        this.removeEventListener(document, 'keypress', this.switchKeyEvents);\n        this.addEventListener(document, 'keypress', this.dragKeys);\n    }\n\n    //noinspection JSUnusedLocalSymbols\n    moved(dx, dy) {\n        this.callHandlers('moved');\n    }\n\n    stopDrag() {\n        this.callHandlers('stopMove');\n    }\n\n    cancel(evt) {\n        this.restoreInitPosition();\n        this.callHandlers('cancel');\n        this.releaseElement(evt);\n    }\n\n    restoreInitPosition() {\n        if (this.draggedObject) {\n            if (this.callHandlers('restoreInitPosition') !== false) {\n                this.draggedObject.style.left = this.initLeft;\n                this.draggedObject.style.top = this.initTop;\n                if (this.initParentNode != this.draggedObject.parentNode) {\n                    this.initParentNode.appendChild(this.draggedObject);\n                }\n            }\n        }\n    }\n\n    dropped(e) {\n        var evt = e || window.event;\n        if (!evt.button && this.draggedObject) { // Drag and drop may have been cancelled through a right click or pressing the Esc key\n            var dX = evt.clientX - this.initialMouseX;\n            var dY = evt.clientY - this.initialMouseY;\n            this.move(dX, dY, true);\n            this.applyMove();\n            this.releaseElement(evt);\n        }\n    }\n\n    applyMove() {\n        this.callHandlers('applyMove');\n    }\n\n    releaseElement(evt) {\n        this.stopDrag(evt);\n        this.removeEventListener(document, 'mousemove', this.dragMouse);\n        this.removeEventListener(document, 'mouseup', this.dropped);\n        this.removeEventListener(document, 'keypress', this.dragKeys);\n        this.removeEventListener(document, 'keypress', this.switchKeyEvents);\n        this.removeEventListener(document, 'keydown', this.dragKeys);\n        Gantt.utils.removeClass(this.draggedObject, 'dragged');\n        this.draggedObject = null;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/dragdrop.js","'use strict';\n\nimport Gantt from './core';\nimport vis from 'vis';\n\nconst LOAD_RESOURCE_BAR_CLASS = 'load-resource-bar';\nconst RESOURCE_LOAD_CLASS = 'resource-load';\nconst CHART_TOP_MARGIN = 8;\n\nfunction ResNode(resource, activity, load, maxLoad) {\n    this.resource = resource;\n    this.activity = activity;\n    this.load = load;\n    this.maxLoad = maxLoad;\n}\n\nResNode.prototype.toString = function() {\n    return this.resource.name + \" - \" + this.activity.name;\n};\n\nclass Block {\n    constructor(start, end, prev, next) {\n        this.start = start;\n        this.end = end;\n        this.prev = prev;\n        this.next = next;\n        this.resNodes = [];\n    }\n\n    addResource(resNode) {\n        this.resNodes.push( resNode ); \n    }\n    \n    insertBefore(start, end, resNode) {\n        let block = new Block(start, end, this.prev, this);\n        this.prev.next = block; // Always a previous as firstBlock initialized with a minimal date.\n        this.prev = block;\n        if (resNode) block.addResource(resNode);\n        return block;\n    }\n\n    insertAfter(start, end, resNode) {\n        if (this.next) {\n            return this.next.insert(start, end, resNode);\n        }\n        let block = new Block(start, end, this, null);\n        this.next = block;\n        if (resNode) block.addResource(resNode);\n        return block;\n    }\n\n    insert(start, end, resNode) {\n        let block;\n        if (start >= this.end) {\n            return this.insertAfter(start, end, resNode);\n        }\n        if (start < this.start) {\n            this.insertBefore(start, Math.min(this.start, end), resNode);\n            if (end <= this.start) return;\n            start = this.start;\n        }\n        if (start > this.start) {\n            this.insertBefore(this.start, start).resNodes = [].concat(this.resNodes);\n            this.start = start;\n        }\n        if (end < this.end) {\n            block = this.insertBefore(this.start, end);\n            block.resNodes = this.resNodes.concat([resNode]);\n            this.start = end;\n            return block;\n        }\n        else {\n            this.resNodes.push(resNode);\n        }\n        if (end > this.end) {\n            return this.insertAfter(this.end, end, resNode);\n        }\n        return this;\n    }\n\n    computeMax(useMaxLoad) {\n        let max = 0;\n        var usedRes = [];\n        this.resNodes.map((node) => {\n            if (useMaxLoad) {\n                if (usedRes.indexOf(node.resource) < 0) {\n                    usedRes.push(node.resource);\n                    max+= node.maxLoad;\n                }\n            }\n            else  max+= node.load;\n        });\n        this.max = max;\n        return Math.max(max, this.next? this.next.computeMax(useMaxLoad) : 0);\n    }\n\n    createVisItem(ctx) {\n        //max, verticalPercentage, renderer\n        if (!this.resNodes.length) return null;\n        let tpl = '<div style=\"display: flex; flex-direction: column-reverse; height: 100%\" class=\"' + LOAD_RESOURCE_BAR_CLASS + '\">';\n        let closing = '</div>';\n        let max = ctx.max;\n        let height = ctx.plotAreaHeight;\n        if (ctx.useMaxLoad && this.max) { // Only true if one resource selected => this.resNodes is always of size 1\n            tpl+= '<div style=\"display: flex; flex-direction: column-reverse; height: ' + Math.round(height = (height * this.max / max)) + 'px;\" class=\"max-load\">';\n            max = this.max; // activities height are now proportional to their max load container height\n            closing = '</div>' + closing;\n        }\n        for(let i = 0, res; i < this.resNodes.length; i++) {\n            res = this.resNodes[i];\n            tpl+= '<div style=\"background-color: ' + ctx.chartRenderer.background(res.resource, res.activity)\n                + '; height: ' + Math.round(height * res.load / max)\n                + 'px;\" data-res-name=\"' + res.resource.name + '\" data-act-name=\"' + (res.activity.name || '')\n                + '\" data-res-load=\"' + res.load + '\"' + (res.maxLoad? ' data-max-load=\"' + res.maxLoad + '\"' : '')\n                + ' class=\"' + RESOURCE_LOAD_CLASS + '\"></div>';\n        }\n        tpl+= closing;\n        return {\n            start: this.start,\n            end: this.end,\n            type: 'background',\n            content: tpl\n        }\n    }\n\n    toString() {\n        let s;\n        if (this.start) {\n            s = \"[ start: \" + new Date(this.start).toLocaleDateString() + \" - end: \" + new Date(this.end).toLocaleDateString() + \"(\";\n            s += this.resNodes.join(', ');\n            s += \")]\"\n        }\n        else {\n            s = '';\n        }\n        return s + (this.next? (\"\\n     \" + this.next.toString()) : '');\n    }\n}\n\nclass LoadResourceChart extends Gantt.components.LoadResourceChart {\n    constructor(gantt, node, config) {\n        super(gantt, node, config);\n\n        const loadChart = this;\n        gantt.selection.addObserver({\n            rowSelectionChanged(selections) {\n                // Selections array is sorted from the last selected object to the first.\n                // To keep the same colors associated with the resources when changing the selection (Ctrl + Click),\n                // we need to reverse this order so that the first selected object remains always at the same array index.\n                loadChart.setResources(selections.concat([]).reverse());\n            }\n        });\n    }\n\n    addChildResources(resources, a) {\n        for(let i = 0,res; i < resources.length; i++) {\n            res = resources[i];\n            a.push(res);\n            if (res.children) {\n                this.addChildResources(res.children, a);\n            }\n        }\n        return a;\n    }\n\n    setConfiguration(config) {\n        if (this.layoutSynch) {\n            this.destroy();\n        }\n        if (config.classes) {\n            Gantt.utils.addClass(this.node, config.classes);\n        }\n\n        this.header = document.createElement('div');\n        this.header.className = 'load-resource-chart-header';\n        if (config.header) {\n            let headerContent;\n            if (Gantt.utils.isFunction(config.header)) {\n                headerContent = config.header(this.header);\n            }\n            else if (Gantt.utils.isDomElement(config.header)) {\n                headerContent = config.header;\n            }\n            else {\n                headerContent = document.createElement('h3');\n                headerContent.appendChild(document.createTextNode(config.header));\n            }\n            if (headerContent) {\n                this.header.appendChild(headerContent);\n            }\n        }\n        this.node.appendChild(this.header);\n        this.body = document.createElement('div');\n        this.body.className = 'load-resource-chart-body';\n        this.body.style.position = 'relative';\n        if (config.height) {\n            if (Gantt.utils.isFunction(config.height)) {\n                this.body.style.height = config.height() + 'px';\n            }\n            else if (Gantt.utils.isString(config.height)) {\n                this.body.style.height = config.height;\n            }\n            else {\n                this.body.style.height = config.height + 'px';\n            }\n        }\n        else {\n            this.body.style.height = '100%';\n        }\n        this.node.appendChild(this.body);\n\n        this.leftPanel = document.createElement('div');\n        this.leftPanel.className = 'load-resource-chart-left';\n        this.leftPanel.style.position = 'absolute';\n        this.leftPanel.style.left = '0';\n        this.leftPanel.style.top = '0';\n        this.leftPanel.style.bottom = '0';\n        this.legendPanel = document.createElement('div');\n        this.legendPanel.className = 'legend-panel empty-legend';\n        this.legendPanel.style.position = 'absolute';\n        this.legendPanel.style.bottom = '0';\n        this.legendPanel.style.overflowY = 'auto';\n        this.leftPanel.appendChild(this.legendPanel);\n\n        // Create Y-Axis panel\n        this.yAxisPanel = document.createElement('div');\n        this.yAxisPanel.className = 'y-axis-ctnr';\n        this.yAxisPanel.style.position = 'absolute';\n        this.yAxisPanel.style.right = 0;\n        this.yAxisPanel.style.top = '0';\n        this.yAxis = document.createElement('div');\n        this.yAxis.className = 'y-axis' + (config && config.yAxis && config.yAxis.className? (' ' + config.yAxis.className) : '');\n        this.yAxis.style.position = 'absolute';\n        this.yAxis.style.overflow = 'visible';\n        this.yAxis.style.right = 0;\n        this.yAxis.style.top = '0';\n        this.yAxisPanel.appendChild(this.yAxis);\n        this.leftPanel.appendChild(this.yAxisPanel);\n\n        this.body.appendChild(this.leftPanel);\n\n        this.timeLineScrollerElt = document.createElement('div');\n        this.timeLineScrollerElt.className = 'load-resource-chart-scroller';\n        this.timeLineScrollerElt.style.position = 'absolute';\n        this.timeLineScrollerElt.style.top = '0';\n        this.timeLineScrollerElt.style.bottom = '0';\n        this.timeLineScrollerElt.style.right = '0';\n        this.timeLineScrollerElt.style.overflow = 'hidden';\n        this.body.appendChild(this.timeLineScrollerElt);\n\n        this.noSelectionElt = document.createElement('div');\n        this.noSelectionElt.className = 'no-selection';\n        this.noSelectionElt.style.position = 'absolute';\n        this.noSelectionElt.style.left = '0';\n        this.noSelectionElt.style.top = '0';\n        this.noSelectionElt.style.bottom = '0';\n        this.noSelectionElt.style.right = '0';\n        this.noSelectionElt.style.overflow = 'hidden';\n        this.noSelectionElt.style.display = 'flex';\n        this.noSelectionElt.style.alignItems = 'center';\n        this.noSelectionElt.style.justifyContent = 'center';\n        this.noSelectionElt.style.zIndex = '1';\n        const noSelMsg = document.createElement('div');\n        noSelMsg.className = 'no-selection-message';\n        noSelMsg.appendChild(document.createTextNode(Gantt.utils.getString('gantt.loadResourceChart.noSelection.title')));\n        this.noSelectionElt.appendChild(noSelMsg);\n        this.body.appendChild(this.noSelectionElt);\n\n        const loadChart = this;\n        this.layoutSynch = this.gantt.synchLayout({\n            timeTableBoundsChanged : function(bounds) {\n                bounds = this.convertBounds(bounds, loadChart.timeLineScrollerElt);\n                loadChart.timeLineScrollerElt.style.left = bounds.x + 'px';\n                loadChart.timeLineScrollerElt.style.width = bounds.width + 'px';\n                loadChart.leftPanel.style.width = bounds.x + 'px';\n\n                if (loadChart.timeLineElt) {\n                  loadChart.updatePlottingArea();\n                  loadChart.drawCharts();\n                }\n            },\n            timeWindowChanged(start, end) {\n                loadChart.setTimeWindow(start, end);\n            },\n            timeLineSizeChanged(width, height) {\n                if (loadChart.timeLineElt) {\n                    loadChart.timeLineElt.style.width = width + 'px';\n                }\n            },\n            timeLineInitialized() {\n            },\n            timeLineScrolled(x) {\n                loadChart.timeLineScrollerElt.scrollLeft = x;\n            }\n        });\n\n        function createGetter(config) {\n            if (Gantt.utils.isFunction(config)) {\n                return config;\n            }\n            else if (Gantt.utils.isString(config)) {\n                return Gantt.utils.propertyEvaluator(config);\n            }\n            return function() { return config};\n        }\n\n        this.resourceMaxLoad = config.maxLoad && createGetter(config.maxLoad);\n        this.resourceActivityLoad = config.load && createGetter(config.load) || function () { return 1; };\n\n        const rendererClass = Gantt.components.Renderer.impl || Gantt.components.Renderer;\n        this.chartRenderer = new rendererClass(\n            Gantt.utils.mergeObjects({\n                background : {\n                    getValue : (res) => { return this.resources.indexOf(res); }\n                }}, config.renderer),\n            {\n                getTooltipProperties : function(info, ctx) {\n                    const props = [ 'Resource', info.resourceName, 'Activity', info.activityName,\n                        'Load', info.resourceLoad ];\n                    if (info.resourceMaxLoad) {\n                        props.push('Maximum load', info.resourceMaxLoad);\n                    }\n                    return props;\n                }\n            }, this.gantt);\n\n        this.initTooltips();\n    }\n\n    setTimeWindow(start, end) {\n        if (this.timeLineElt) {\n            this.timeLineScrollerElt.removeChild(this.timeLineElt);\n        }\n        this.timeLineElt = document.createElement('div');\n        this.timeLineElt.style.width = this.gantt.timeLine.getWidth() + 'px';\n        this.timeLineElt.style.height = '100%';\n\n        try {\n            // See https://github.com/almende/vis/issues/24 for time zone hack\n            this.visTimeline = new vis.Timeline(this.timeLineElt, {}, {\n                // 'millisecond', 'second', 'minute', 'hour', 'weekday', 'day', 'month', 'year'\n                orientation: {axis: 'bottom', item: 'bottom'},\n                height: '100%',\n                start: this.gantt.timeLine.scrollableHorizon.start,\n                end: this.gantt.timeLine.scrollableHorizon.end\n            });\n            this.visTimeline.range.body.emitter.off('mousewheel');\n            const fireReady = () => {\n                this._init = true;\n                const wnd = this.visTimeline.getWindow();\n                this.visTimeline.off('changed', fireReady);\n                this.timeScaleElt = this.timeLineElt.getElementsByClassName(\"vis-panel vis-bottom\")[0];\n                const style = window.getComputedStyle(this.timeScaleElt);\n                let bottom = style.bottom;\n                bottom = bottom? parseInt(bottom) : 0;\n                if (isNaN(bottom)) {\n                  bottom = 0;\n                }\n                let topBorder = style.borderTopWidth;\n                topBorder = topBorder? parseInt(topBorder) : 0;\n                this.timeScaleHeight = $(this.timeScaleElt).outerHeight() + bottom - topBorder; // visjs set a -2px bottom\n                this.updatePlottingArea();\n                this.triggerEvent(Gantt.events.TIME_LINE_INIT);\n            };\n            this.visTimeline.on('changed', fireReady);\n        } catch (e) {\n            console.error(e);\n            throw e;\n        }\n        this.timeLineScrollerElt.appendChild(this.timeLineElt);\n    }\n\n    setResources(resources) {\n        const allRes = this.addChildResources(resources, []);\n        this.resources = allRes;\n        for(let i = 0, count = allRes.length, res; i < count; i++) {\n            res = allRes[i];\n            res.color = this.chartRenderer.background(res);\n        }\n        this.gantt.rowsChanged(Gantt.events.ROWS_MODIFIED, this.resources);\n        this.selectionChanged();\n        this.drawCharts();\n    }\n\n    destroy() {\n        if (this.layoutSynch) {\n            this.layoutSynch.disconnect();\n            this.layoutSynch = null;\n        }\n    }\n\n    selectionChanged() {\n        this.noSelectionElt.style.display = this.resources && this.resources.length? 'none' : 'flex';\n        this.updateLegend();\n        this.drawCharts();\n    }\n\n    drawCharts() {\n        let firstBlock = new Block(0, 0);\n        let maxLoad, load;\n        (this.resources || []).map((res)=> {\n            (res.activities || []).map((act) => {\n                load = this.resourceActivityLoad(res, act);\n                maxLoad = this.resourceMaxLoad && this.resourceMaxLoad(res, act);\n                firstBlock.insert(act.start, act.end, new ResNode(res, act, load, maxLoad));\n            });\n        });\n        const max = firstBlock.computeMax(this.resourceMaxLoad && (this.resources.length === 1));\n        this.setYAxisMax(max);\n        let items = [], item;\n        const ctx = {\n            max: max,\n            useMaxLoad: this.resourceMaxLoad && (this.resources.length === 1),\n            chartRenderer: this.chartRenderer,\n            plotAreaHeight: this.plotAreaHeight - CHART_TOP_MARGIN,\n            yRatio: this.yRatio\n        };\n        for(let block = firstBlock.next; block; block = block.next) {\n            item = block.createVisItem(ctx);\n            if (item) {\n                items.push(item);\n            }\n        }\n        this.visTimeline.setItems(items);\n    }\n\n    updateLegend() {\n        if (this.legend) {\n            this.legendPanel.removeChild(this.legend);\n        }\n        const hasRes = this.resources && this.resources.length;\n        Gantt.utils.toggleClass(this.legendPanel, 'empty-legend', !hasRes);\n        this.legendPanel.style.overflowY = 'auto';\n        if (this.resources) {\n            this.legend = document.createElement('ul');\n            this.legend.className = 'legend';\n            let li, colorBox, name, res;\n            for (let i = 0, count = this.resources.length; i < count; i++) {\n                res = this.resources[i];\n                li = document.createElement('li');\n                li.className = 'legend-item';\n                li.style.display = 'table';\n                colorBox = document.createElement('div');\n                colorBox.className = 'legend-item-color';\n                colorBox.style.display = 'table-cell';\n                colorBox.style.verticalAlign = 'middle';\n                colorBox.style.backgroundColor = res.color;\n                li.appendChild(colorBox);\n\n                name = document.createElement('div');\n                name.className = 'legend-item-name';\n                name.style.display = 'table-cell';\n                name.style.verticalAlign = 'middle';\n                name.innerHTML = res.name;\n                li.appendChild(name);\n                this.legend.appendChild(li);\n            }\n            this.legendPanel.appendChild(this.legend);\n        }\n    }\n\n    setYAxisMax(max) {\n      let tickCount;\n      let tickUnit;\n      this.yAxis.innerHTML = '';\n\n      if (!max) return;\n      // Calc the best tick units\n      function closest10Factor(n) {\n        let f = 10;\n        while (n > f) { f*= 10; }\n        return f;\n      }\n\n      const MAX_TICK_COUNT = 5;\n      if (max <= MAX_TICK_COUNT) {\n        tickUnit = 1;\n        tickCount = max;\n      }\n      else {\n        // Due to the small height of the axis, we can draw a maximum of 5 axis labels\n        // Determine the best unit to use for a number of labels from 2 to 5\n        max = closest10Factor(max);\n        tickCount = MAX_TICK_COUNT;\n        tickUnit = Math.round(max / tickCount);\n      }\n      const totalHeight = this.plotAreaHeight - CHART_TOP_MARGIN;\n      this.yRatio = Math.round(totalHeight / max);\n\n      // Create the Y Axis labels\n      for(let iTick = 0, v = 0, h = tickUnit * this.yRatio; iTick <= tickCount; iTick++, v+= tickUnit) { // <= MAX_TICK_COUNT because first tick is zero\n        let label = this.createLabelledTick('' + v, h);\n        label.style.top = (this.plotAreaHeight - (v * this.yRatio) - (h / 2) -2) + 'px';// -2 for the height of the tick border\n        label.style.right = '0';\n        this.yAxis.appendChild(label);\n      }\n    }\n\n    createLabelledTick(label, height) {\n      const labelDiv = document.createElement('div');\n      labelDiv.className = 'y-axis-label';\n      labelDiv.style.position = 'absolute';\n      labelDiv.style.height = height + 'px';\n      labelDiv.style.lineHeight = height + 'px';\n      labelDiv.style.textAlign = 'center';\n      labelDiv.style.whiteSpace = 'nowrap';\n      labelDiv.appendChild(document.createTextNode(label));\n      const tick = document.createElement('div');\n      tick.style.display = 'inline-block';\n      tick.style.position = 'absolute';\n      tick.style.top = (height / 2) + 'px';\n      tick.style.right = '0';\n      tick.className = 'y-axis-tick';\n      labelDiv.appendChild(tick);\n      return labelDiv;\n    }\n\n    updatePlottingArea() {\n        // Cannot use native offsetHeight as it is rounding dimensions\n        // See warning at https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetHeight\n        this.setPlottingAreaHeight($(this.body).outerHeight() - this.timeScaleHeight);\n    }\n\n    setPlottingAreaHeight(h) {\n        this.yAxis.style.height = h + 'px';\n        this.plotAreaHeight = h;\n    }\n\n    getScroller() {\n        return this.timeLineScrollerElt;\n    }\n\n    //\n    // Tooltips\n    //\n    initTooltips() {\n        const isResourceLoadNode = (elt) => {\n            return Gantt.utils.hasClass(elt, RESOURCE_LOAD_CLASS);\n        };\n        const getResourceLoadNode = (elt) => {\n            for(;elt && (elt !== this.body); elt = elt.parentNode) {\n                if (isResourceLoadNode(elt)) {\n                    return elt;\n                }\n            }\n            return null;\n        };\n        const getResource = (id) => {\n            return id && this.gantt.table.getRow(id)\n        };\n        const gantt = this.gantt;\n        const loadchart = this;\n        this.gantt.tooltip.installTooltip({\n            // The container that contains elements to display tooltip for.\n            container: this.body,\n            // The container inside which bounds the tooltip can be displayed\n            getTooltipDisplayContainer() { return gantt.getBody(); },\n            // Returns an element in the node hierarchy for which a tooltip can be displayed\n            getTooltipElement(node) { return getResourceLoadNode(node); },\n            getTooltipData(node) { return { resourceName: node.dataset.resName, resourceLoad: node.dataset.resLoad,\n                    resourceMaxLoad: node.dataset.resMaxLoad, activityName: node.dataset.actName}; },\n            renderTooltip(node/* The element returned by getTooltipElement */,\n                          info /* data returned by getTooltipData for the specified tooltipElt */,\n                          tooltipCtnr /* The container of the tooltip to fill with info. */) {\n                if (info) {\n                    loadchart.chartRenderer.getTooltip(tooltipCtnr, info);\n                }\n            }\n        });\n    }\n}\n\nGantt.components.LoadResourceChart.impl = LoadResourceChart;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/loadchart.js","module.exports = __WEBPACK_EXTERNAL_MODULE_58__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 58\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_59__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vis\"\n// module id = 59\n// module chunks = 0","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){\"use strict\";function t(t){var e=typeof t;return null!==t&&(\"object\"===e||\"function\"===e)}function e(t){return\"function\"==typeof t}function n(t){I=t}function r(t){J=t}function o(){return function(){return process.nextTick(a)}}function i(){return\"undefined\"!=typeof H?function(){H(a)}:c()}function s(){var t=0,e=new V(a),n=document.createTextNode(\"\");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<G;t+=2){var e=$[t],n=$[t+1];e(n),$[t]=void 0,$[t+1]=void 0}G=0}function f(){try{var t=require,e=t(\"vertx\");return H=e.runOnLoop||e.runOnContext,i()}catch(n){return c()}}function l(t,e){var n=arguments,r=this,o=new this.constructor(p);void 0===o[et]&&k(o);var i=r._state;return i?!function(){var t=n[i-1];J(function(){return x(i,o,t,r._result)})}():E(r,o,t,e),o}function h(t){var e=this;if(t&&\"object\"==typeof t&&t.constructor===e)return t;var n=new e(p);return g(n,t),n}function p(){}function v(){return new TypeError(\"You cannot resolve a promise with itself\")}function d(){return new TypeError(\"A promises callback cannot return that same promise.\")}function _(t){try{return t.then}catch(e){return it.error=e,it}}function y(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function m(t,e,n){J(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?g(t,n):S(t,n))},function(e){r||(r=!0,j(t,e))},\"Settle: \"+(t._label||\" unknown promise\"));!r&&o&&(r=!0,j(t,o))},t)}function b(t,e){e._state===rt?S(t,e._result):e._state===ot?j(t,e._result):E(e,void 0,function(e){return g(t,e)},function(e){return j(t,e)})}function w(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===h?b(t,n):r===it?(j(t,it.error),it.error=null):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function g(e,n){e===n?j(e,v()):t(n)?w(e,n,_(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),T(t)}function S(t,e){t._state===nt&&(t._result=e,t._state=rt,0!==t._subscribers.length&&J(T,t))}function j(t,e){t._state===nt&&(t._state=ot,t._result=e,J(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+rt]=n,o[i+ot]=r,0===i&&t._state&&J(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?x(n,r,o,i):o(i);t._subscribers.length=0}}function M(){this.error=null}function P(t,e){try{return t(e)}catch(n){return st.error=n,st}}function x(t,n,r,o){var i=e(r),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if(s=P(r,o),s===st?(a=!0,u=s.error,s.error=null):c=!0,n===s)return void j(n,d())}else s=o,c=!0;n._state!==nt||(i&&c?g(n,s):a?j(n,u):t===rt?S(n,s):t===ot&&j(n,s))}function C(t,e){try{e(function(e){g(t,e)},function(e){j(t,e)})}catch(n){j(t,n)}}function O(){return ut++}function k(t){t[et]=ut++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[et]||k(this.promise),B(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&S(this.promise,this._result))):j(this.promise,q())}function q(){return new Error(\"Array Methods must be provided an Array\")}function F(t){return new Y(this,t).promise}function D(t){var e=this;return new e(B(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError(\"You must pass an array to race.\"))})}function K(t){var e=this,n=new e(p);return j(n,t),n}function L(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}function N(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}function U(t){this[et]=O(),this._result=this._state=void 0,this._subscribers=[],p!==t&&(\"function\"!=typeof t&&L(),this instanceof U?C(this,t):N())}function W(){var t=void 0;if(\"undefined\"!=typeof global)t=global;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(e){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if(\"[object Promise]\"===r&&!n.cast)return}t.Promise=U}var z=void 0;z=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)};var B=z,G=0,H=void 0,I=void 0,J=function(t,e){$[G]=t,$[G+1]=e,G+=2,2===G&&(I?I(a):tt())},Q=\"undefined\"!=typeof window?window:void 0,R=Q||{},V=R.MutationObserver||R.WebKitMutationObserver,X=\"undefined\"==typeof self&&\"undefined\"!=typeof process&&\"[object process]\"==={}.toString.call(process),Z=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel,$=new Array(1e3),tt=void 0;tt=X?o():V?s():Z?u():void 0===Q&&\"function\"==typeof require?f():c();var et=Math.random().toString(36).substring(16),nt=void 0,rt=1,ot=2,it=new M,st=new M,ut=0;return Y.prototype._enumerate=function(t){for(var e=0;this._state===nt&&e<t.length;e++)this._eachEntry(t[e],e)},Y.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=_(t);if(o===l&&t._state!==nt)this._settledAt(t._state,e,t._result);else if(\"function\"!=typeof o)this._remaining--,this._result[e]=t;else if(n===U){var i=new n(p);w(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},Y.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===nt&&(this._remaining--,t===ot?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},Y.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(rt,e,t)},function(t){return n._settledAt(ot,e,t)})},U.all=F,U.race=D,U.resolve=h,U.reject=K,U._setScheduler=n,U._setAsap=r,U._asap=J,U.prototype={constructor:U,then:l,\"catch\":function(t){return this.then(null,t)}},U.polyfill=W,U.Promise=U,U});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/es6-promise/dist/es6-promise.min.js\n// module id = 60\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 61\n// module chunks = 0","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// vertx (ignored)\n// module id = 62\n// module chunks = 0","\"use strict\";\n\nimport $ from 'jquery';\nimport Gantt from '../core/core';\n\nconst allGantts = [];\n\nconst getGantt = (node) => {\n  for(let i = 0, count = allGantts.length; i < count; ++i) {\n    if (allGantts[i].node == node) {\n      return allGantts[i];\n    }\n  }\n  return null;\n};\n\nconst removeGantt = (gantt) => {\n  const index = allGantts.indexOf(gantt);\n  if (index > -1) {\n    allGantts.splice(index, 1);\n  }\n  return gantt;\n};\n\nGantt.envReady = function() {\n  return new Promise(function(resolve, reject) {\n    $(document).ready(resolve);\n  });\n};\n\ntry {\n\n\n  $.fn.Gantt = function (options) {\n\n    const gantts = [];\n    this.each(function () {\n      let gantt = getGantt(this);\n      if (gantt) {\n        if (options) {\n          gantt.destroy();\n          removeGantt(gantt);\n        }\n        else {\n          // Use the current gantt associated with this node as no configuration change has been specified.\n          return;\n        }\n      }\n      gantt = new Gantt(this, options);\n      gantt.disconnect = () => {\n        removeGantt(this);\n      };\n      gantts.push(gantt);\n    });\n\n    var ganttRef = gantts.length && gantts[0];\n    var apiRef = ganttRef && ganttRef.api && ganttRef.api() || {};\n    if (gantts.length == 1) {\n      this.api = function () {\n        return apiRef;\n      }\n    }\n    else if (gantts.length > 0) {\n      //TODO\n    }\n    else {\n      this.api = function () {\n        return {};\n      }\n    }\n    $.extend(this, apiRef);\n    return gantts.length && gantts[0];\n  };\n\n}catch (e){\n    console.error(e);\n  }\n\n\n// WEBPACK FOOTER //\n// ./src/jquery/jquery-core.js","import Gantt from '../core/core';\nimport $ from 'jquery';\n\nGantt.utils = $.extend({}, Gantt.utils, {\n    closest : function(elt, selector) {\n        var res = $( elt ).closest( selector );\n        return res && res.length && res[0] || null;\n    },\n\n    mergeObjects : function() {\n        var args = [];\n        for(var i = 0; i < arguments.length; i++) {\n            args.push(arguments[i]);\n        }\n        return $.extend.apply($, args);\n    },\n\n    html(node, htmlText) {\n        $(node).html(htmlText);\n    },\n\n    offsetParent(elt) {\n        const $parent = $(elt).offsetParent();\n        return $parent.length && $parent[0] || null;\n    },\n\n    ajax : function(url, params) {\n        var $params = {\n            url : url || params.url,\n            dataType : params && params.dataType || \"json\"\n        };\n        if (params && params.method) {\n            $params.method = params.method;\n        }\n        if (params && params.params) {\n            $params.data = params.params;\n        }\n        if (params && params.customizeRequest) {\n            $params.beforeSend = params.customizeRequest;\n        }\n        const settings = params.settings;\n        if (params && params.success) {\n            return $.ajax($params).then(function(data, statusText, req) {\n                if (params.settings) {\n                    params.settings.statusText = statusText;\n                    params.settings.request = req;\n                }\n                if (params.context) {\n                    return params.success.call(params.context, data, params.settings);\n                }\n                return params.success(data, params.settings);\n            });\n        }\n        return $.ajax($params);\n    },\n\n    getHeight(elt) {\n        return $(elt).height();\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/jquery/utils.js","/*!\n\n Split Pane v0.7.1\n\n Copyright (c) 2014 Simon HagstrÃ¶m\n\n Released under the MIT license\n https://raw.github.com/shagstrom/split-pane/master/LICENSE\n\n */\n'use strict';\n\nimport Gantt from '../core/core';\nimport $ from 'jquery';\n\n/* ONO: Gantt malfunctions with latter versions of this plugin! */\n(function(Gantt, $) {\n\n  var methods = {};\n\n  methods.init = function() {\n    var $splitPanes = this;\n    $splitPanes.each(setMinHeightAndMinWidth);\n    $splitPanes.append('<div class=\"split-pane-resize-shim\">');\n    $splitPanes.children('.split-pane-divider').html('<div class=\"split-pane-divider-inner\"></div>');\n    $splitPanes.children('.split-pane-divider').on('touchstart mousedown', mousedownHandler);\n    setTimeout(function() {\n      // Doing this later because of an issue with Chrome (v23.0.1271.64) returning split-pane width = 0\n      // and triggering multiple resize events when page is being opened from an <a target=\"_blank\"> .\n      $splitPanes.each(function() {\n        $(this).on('_splitpaneparentresize', createParentresizeHandler($(this)));\n      });\n      $(window).trigger('resize');\n    }, 100);\n  };\n\n  methods.firstComponentSize = function(value) {\n    this.each(function() {\n      var $splitPane = $(this),\n        components = getComponents($splitPane);\n      if ($splitPane.is('.fixed-top')) {\n        fixedTopHandler(components, components.divider.offsetTop)({pageY: value});\n      } else if ($splitPane.is('.fixed-bottom')) {\n        value = components.splitPane.offsetHeight -components.divider.offsetHeight - value;\n        fixedBottomHandler(components, -components.last.offsetHeight)({pageY: -value});\n      } else if ($splitPane.is('.horizontal-percent')) {\n        value = components.splitPane.offsetHeight -components.divider.offsetHeight - value;\n        horizontalPercentHandler(components, -components.last.offsetHeight)({pageY: -value});\n      } else if ($splitPane.is('.fixed-left')) {\n        fixedLeftHandler(components, components.divider.offsetLeft)({pageX: value});\n      } else if ($splitPane.is('.fixed-right')) {\n        value = components.splitPane.offsetWidth -components.divider.offsetWidth - value;\n        fixedRightHandler(components, -components.last.offsetWidth)({pageX: -value});\n      } else if ($splitPane.is('.vertical-percent')) {\n        value = components.splitPane.offsetWidth -components.divider.offsetWidth - value;\n        verticalPercentHandler(components, -components.last.offsetWidth)({pageX: -value});\n      }\n    });\n  };\n\n  methods.lastComponentSize = function(value) {\n    this.each(function() {\n      var $splitPane = $(this),\n        components = getComponents($splitPane);\n      if ($splitPane.is('.fixed-top')) {\n        value = components.splitPane.offsetHeight -components.divider.offsetHeight - value;\n        fixedTopHandler(components, components.divider.offsetTop)({pageY: value});\n      } else if ($splitPane.is('.fixed-bottom')) {\n        fixedBottomHandler(components, -components.last.offsetHeight)({pageY: -value});\n      } else if ($splitPane.is('.horizontal-percent')) {\n        horizontalPercentHandler(components, -components.last.offsetHeight)({pageY: -value});\n      } else if ($splitPane.is('.fixed-left')) {\n        value = components.splitPane.offsetWidth -components.divider.offsetWidth - value;\n        fixedLeftHandler(components, components.divider.offsetLeft)({pageX: value});\n      } else if ($splitPane.is('.fixed-right')) {\n        fixedRightHandler(components, -components.last.offsetWidth)({pageX: -value});\n      } else if ($splitPane.is('.vertical-percent')) {\n        verticalPercentHandler(components, -components.last.offsetWidth)({pageX: -value});\n      }\n    });\n  };\n\n  methods.setLeftComponentVisible = function(visible) {\n    this.each(function() {\n      var $splitPane = $(this);\n      var components = getComponents($splitPane);\n\n      components.divider.style.display = visible? '' : 'none';\n      components.first.style.display = visible? '' : 'none';\n    });\n  };\n\n  methods.setRightComponentVisible = function(visible) {\n    this.each(function() {\n      var $splitPane = $(this);\n      var components = getComponents($splitPane);\n\n      const first = components.first;\n      first.style.position = visible? 'absolute' : 'relative';\n      first.style[$(first).hasClass('top-pane')? 'height' : 'width'] = visible? '' : '100%';\n      components.divider.style.display = visible? '' : 'none';\n      components.last.style.display = visible? '' : 'none';\n    });\n  };\n\n  $.fn.splitPane = function(method) {\n    if (!method) {\n      method = 'init';\n    }\n    methods[method].apply(this, $.grep(arguments, function(it, i) { return i > 0; }));\n  };\n\n  var SPLITPANERESIZE_HANDLER = '_splitpaneparentresizeHandler';\n\n  /**\n   * A special event that will \"capture\" a resize event from the parent split-pane or window.\n   * The event will NOT propagate to grandchildren.\n   */\n  $.event.special._splitpaneparentresize = {\n    setup: function(data, namespaces) {\n      var element = this,\n        parent = $(this).parent().closest('.split-pane')[0] || window;\n      $(this).data(SPLITPANERESIZE_HANDLER, function(event) {\n        var target = event.target === document ? window : event.target;\n        if (target === parent) {\n          event.type = \"_splitpaneparentresize\";\n          $.event.dispatch.apply(element, arguments);\n        } else {\n          event.stopPropagation();\n        }\n      });\n      $(parent).on('resize', $(this).data(SPLITPANERESIZE_HANDLER));\n    },\n    teardown: function(namespaces) {\n      var parent = $(this).parent().closest('.split-pane')[0] || window;\n      $(parent).off('resize', $(this).data(SPLITPANERESIZE_HANDLER));\n      $(this).removeData(SPLITPANERESIZE_HANDLER);\n    }\n  };\n\n  function setMinHeightAndMinWidth() {\n    var $splitPane = $(this),\n      components = getComponents($splitPane);\n    if ($splitPane.is('.fixed-top, .fixed-bottom, .horizontal-percent')) {\n      $splitPane.css('min-height', (minHeight(components.first) + minHeight(components.last) + $(components.divider).height()) + 'px');\n    } else {\n      $splitPane.css('min-width', (minWidth(components.first) + minWidth(components.last) + $(components.divider).width()) + 'px');\n    }\n  }\n\n  function mousedownHandler(event) {\n    var $divider = $(this),\n      $splitPane = $divider.parent(),\n      $resizeShim = $divider.siblings('.split-pane-resize-shim');\n    $resizeShim.show();\n    $divider.addClass('dragged');\n    if (event.type.match(/^touch/)) {\n      $divider.addClass('touch');\n    }\n    var moveEventHandler = createMousemove($splitPane, pageXof(event), pageYof(event));\n    $(document).on('touchmove mousemove', moveEventHandler);\n    $(document).one('touchend mouseup', function(event) {\n      $(document).off('touchmove mousemove', moveEventHandler);\n      $divider.removeClass('dragged touch');\n      $resizeShim.hide();\n      $splitPane.trigger('dividerdragend', [ getComponentsSizes($splitPane) ]);\n    });\n    $splitPane.trigger('dividerdragstart', [ getComponentsSizes($splitPane) ]);\n  }\n\n  function getComponentsSizes($splitPane) {\n    var property = $splitPane.is('.fixed-top, .fixed-bottom, .horizontal-percent') ?\n      'height' : 'width';\n    return {\n      firstComponentSize: $splitPane.find('.split-pane-component:first')[property](),\n      lastComponentSize: $splitPane.find('.split-pane-component:last')[property]()\n    };\n  }\n\n  function createParentresizeHandler($splitPane) {\n    var components = getComponents($splitPane);\n    if ($splitPane.is('.fixed-top')) {\n      return function(event) {\n        var lastComponentMinHeight = minHeight(components.last),\n          maxfirstComponentHeight = components.splitPane.offsetHeight - lastComponentMinHeight -  components.divider.offsetHeight;\n        if (components.first.offsetHeight > maxfirstComponentHeight) {\n          setTop(components, maxfirstComponentHeight + 'px');\n        }\n        $splitPane.resize();\n      };\n    } else if ($splitPane.is('.fixed-bottom')) {\n      return function(event) {\n        var firstComponentMinHeight = minHeight(components.first),\n          maxLastComponentHeight = components.splitPane.offsetHeight - firstComponentMinHeight -  components.divider.offsetHeight;\n        if (components.last.offsetHeight > maxLastComponentHeight) {\n          setBottom(components, maxLastComponentHeight + 'px')\n        }\n        $splitPane.resize();\n      };\n    } else if ($splitPane.is('.horizontal-percent')) {\n      return function(event) {\n        var lastComponentMinHeight = minHeight(components.last),\n          firstComponentMinHeight = minHeight(components.first),\n          maxLastComponentHeight = components.splitPane.offsetHeight - firstComponentMinHeight -  components.divider.offsetHeight;\n        if (components.last.offsetHeight > maxLastComponentHeight) {\n          setBottom(components, (maxLastComponentHeight / components.splitPane.offsetHeight * 100) + '%');\n        } else {\n          if (components.splitPane.offsetHeight - components.first.offsetHeight -  components.divider.offsetHeight < lastComponentMinHeight) {\n            setBottom(components, (lastComponentMinHeight / components.splitPane.offsetHeight * 100) + '%');\n          }\n        }\n        $splitPane.resize();\n      };\n    } else if ($splitPane.is('.fixed-left')) {\n      return function(event) {\n        var lastComponentMinWidth = minWidth(components.last),\n          maxFirstComponentWidth = components.splitPane.offsetWidth - lastComponentMinWidth -  components.divider.offsetWidth;\n        if (components.first.offsetWidth > maxFirstComponentWidth) {\n          setLeft(components, maxFirstComponentWidth + 'px');\n        }\n        $splitPane.resize();\n      };\n    } else if ($splitPane.is('.fixed-right')) {\n      return function(event) {\n        var firstComponentMinWidth = minWidth(components.first),\n          maxLastComponentWidth = components.splitPane.offsetWidth - firstComponentMinWidth -  components.divider.offsetWidth;\n        if (components.last.offsetWidth > maxLastComponentWidth) {\n          setRight(components, maxLastComponentWidth + 'px');\n        }\n        $splitPane.resize();\n      };\n    } else if ($splitPane.is('.vertical-percent')) {\n      return function(event) {\n        var lastComponentMinWidth = minWidth(components.last),\n          firstComponentMinWidth = minWidth(components.first),\n          maxLastComponentWidth = components.splitPane.offsetWidth - firstComponentMinWidth -  components.divider.offsetWidth;\n        if (components.last.offsetWidth > maxLastComponentWidth) {\n          setRight(components, (maxLastComponentWidth / components.splitPane.offsetWidth * 100) + '%');\n        } else {\n          if (components.splitPane.offsetWidth - components.first.offsetWidth -  components.divider.offsetWidth < lastComponentMinWidth) {\n            setRight(components, (lastComponentMinWidth / components.splitPane.offsetWidth * 100) + '%');\n          }\n        }\n        $splitPane.resize();\n      };\n    }\n  }\n\n  function createMousemove($splitPane, pageX, pageY) {\n    var components = getComponents($splitPane);\n    if ($splitPane.is('.fixed-top')) {\n      return fixedTopHandler(components, pageY);\n    } else if ($splitPane.is('.fixed-bottom')) {\n      return fixedBottomHandler(components, pageY);\n    } else if ($splitPane.is('.horizontal-percent')) {\n      return horizontalPercentHandler(components, pageY);\n    } else if ($splitPane.is('.fixed-left')) {\n      return fixedLeftHandler(components, pageX);\n    } else if ($splitPane.is('.fixed-right')) {\n      return fixedRightHandler(components, pageX);\n    } else if ($splitPane.is('.vertical-percent')) {\n      return verticalPercentHandler(components, pageX);\n    }\n  }\n\n  function fixedTopHandler(components, pageY) {\n    var firstComponentMinHeight =  minHeight(components.first),\n      maxFirstComponentHeight = components.splitPane.offsetHeight - minHeight(components.last) - components.divider.offsetHeight,\n      topOffset = components.divider.offsetTop - pageY;\n    return function(event) {\n      var top = newTop(firstComponentMinHeight, maxFirstComponentHeight, topOffset + pageYof(event));\n      setTop(components, top + 'px');\n      $(components.splitPane).resize();\n    };\n  }\n\n  function fixedBottomHandler(components, pageY) {\n    var lastComponentMinHeight = minHeight(components.last),\n      maxLastComponentHeight = components.splitPane.offsetHeight - minHeight(components.first) - components.divider.offsetHeight,\n      bottomOffset = components.last.offsetHeight + pageY;\n    return function(event) {\n      event.preventDefault && event.preventDefault();\n      var bottom = Math.min(Math.max(lastComponentMinHeight, bottomOffset - pageYof(event)), maxLastComponentHeight);\n      setBottom(components, bottom + 'px');\n      $(components.splitPane).resize();\n    };\n  }\n\n  function horizontalPercentHandler(components, pageY) {\n    var splitPaneHeight = components.splitPane.offsetHeight,\n      lastComponentMinHeight = minHeight(components.last),\n      maxLastComponentHeight = splitPaneHeight - minHeight(components.first) - components.divider.offsetHeight,\n      bottomOffset = components.last.offsetHeight + pageY;\n    return function(event) {\n      event.preventDefault && event.preventDefault();\n      var bottom = Math.min(Math.max(lastComponentMinHeight, bottomOffset - pageYof(event)), maxLastComponentHeight);\n      setBottom(components, (bottom / splitPaneHeight * 100) + '%');\n      $(components.splitPane).resize();\n    };\n  }\n\n  function fixedLeftHandler(components, pageX) {\n    var firstComponentMinWidth = minWidth(components.first),\n      maxFirstComponentWidth = components.splitPane.offsetWidth - minWidth(components.last) - components.divider.offsetWidth,\n      leftOffset = components.divider.offsetLeft - pageX;\n    return function(event) {\n      event.preventDefault && event.preventDefault();\n      var left = newLeft(firstComponentMinWidth, maxFirstComponentWidth, leftOffset + pageXof(event));\n      setLeft(components, left + 'px');\n      $(components.splitPane).resize();\n    };\n  }\n\n  function fixedRightHandler(components, pageX) {\n    var lastComponentMinWidth = minWidth(components.last),\n      maxLastComponentWidth = components.splitPane.offsetWidth - minWidth(components.first) - components.divider.offsetWidth,\n      rightOffset = components.last.offsetWidth + pageX;\n    return function(event) {\n      event.preventDefault && event.preventDefault();\n      var right = Math.min(Math.max(lastComponentMinWidth, rightOffset - pageXof(event)), maxLastComponentWidth);\n      setRight(components, right + 'px');\n      $(components.splitPane).resize();\n    };\n  }\n\n  function verticalPercentHandler(components, pageX) {\n    var splitPaneWidth = components.splitPane.offsetWidth,\n      lastComponentMinWidth = minWidth(components.last),\n      maxLastComponentWidth = splitPaneWidth - minWidth(components.first) - components.divider.offsetWidth,\n      rightOffset = components.last.offsetWidth + pageX;\n    return function(event) {\n      event.preventDefault && event.preventDefault();\n      var right = Math.min(Math.max(lastComponentMinWidth, rightOffset - pageXof(event)), maxLastComponentWidth);\n      setRight(components, (right / splitPaneWidth * 100) + '%');\n      $(components.splitPane).resize();\n    };\n  }\n\n  function getComponents($splitPane) {\n    return {\n      splitPane: $splitPane[0],\n      first: $splitPane.children('.split-pane-component:first')[0],\n      divider: $splitPane.children('.split-pane-divider')[0],\n      last: $splitPane.children('.split-pane-component:last')[0]\n    };\n  }\n\n  function pageXof(event) {\n    if (event.pageX !== undefined) {\n      return event.pageX;\n    } else if (event.originalEvent.pageX !== undefined) {\n      return event.originalEvent.pageX;\n    } else if (event.originalEvent.touches) {\n      return event.originalEvent.touches[0].pageX;\n    }\n  }\n\n  function pageYof(event) {\n    if (event.pageY !== undefined) {\n      return event.pageY;\n    } else if (event.originalEvent.pageY !== undefined) {\n      return event.originalEvent.pageY;\n    } else if (event.originalEvent.touches) {\n      return event.originalEvent.touches[0].pageY;\n    }\n  }\n\n  function minHeight(element) {\n    return parseInt($(element).css('min-height')) || 0;\n  }\n\n  function minWidth(element) {\n    return parseInt($(element).css('min-width')) || 0;\n  }\n\n  function newTop(firstComponentMinHeight, maxFirstComponentHeight, value) {\n    return Math.min(Math.max(firstComponentMinHeight, value), maxFirstComponentHeight);\n  }\n\n  function newLeft(firstComponentMinWidth, maxFirstComponentWidth, value) {\n    return Math.min(Math.max(firstComponentMinWidth, value), maxFirstComponentWidth);\n  }\n  function setTop(components, top) {\n    components.first.style.height = top;\n    components.divider.style.top = top;\n    components.last.style.top = top;\n  }\n\n  function setBottom(components, bottom) {\n    components.first.style.bottom = bottom;\n    components.divider.style.bottom = bottom;\n    components.last.style.height = bottom;\n  }\n\n  function setLeft(components, left) {\n    components.first.style.width = left;\n    components.divider.style.left = left;\n    components.last.style.left = left;\n  }\n\n  function setRight(components, right) {\n    components.first.style.right = right;\n    components.divider.style.left = right;\n    components.last.style.width = right;\n  }\n\n  class Split {\n    constructor(elt, options) {\n      this.options = options;\n      this.horiz = !this.options || (this.options.horizontal === undefined) || this.options.horizontal;\n      const fixedFirst = !this.options || (this.options.fixedFirst === undefined) || this.options.fixedFirst;\n      const hideFirst = options && options.hideFirst;\n      const hideSecond = options && options.hideSecond;\n      this.splitPaneElt = document.createElement('div');\n      this.splitPaneElt.className = 'split-pane docloud-splitpane ' +\n        (this.horiz? (fixedFirst?'fixed-left' : 'fixed-right') : (fixedFirst? 'fixed-top' : 'fixed-bottom'));\n\n      this.leftComponent = document.createElement('div');\n      this.leftComponent.className = 'split-pane-component ' + (this.horiz? 'left-pane split-pane-left' : 'top-pane split-pane-top');\n      this.splitPaneElt.appendChild(this.leftComponent);\n\n      var divider = document.createElement('div');\n      divider.className = 'split-pane-divider ' + (this.horiz? 'h-split-pane-divider' : 'v-split-pane-divider');\n      this.splitPaneElt.appendChild(divider);\n      if (hideFirst || hideSecond) {\n        divider.style.display = 'none';\n      }\n\n      this.rightComponent = document.createElement('div');\n      this.rightComponent.className = 'split-pane-component ' + (this.horiz? 'right-pane split-pane-right' : 'bottom-pane split-pane-bottom');\n      this.splitPaneElt.appendChild(this.rightComponent);\n      \n      if (hideSecond) {\n        this.leftComponent.style.position = 'relative';\n        this.leftComponent.style[!this.horiz? 'height' : 'width'] = '100%';\n        this.rightComponent.style.display = 'none';\n      }\n      else if (hideFirst) {\n        this.rightComponent.style.position = 'relative';\n        this.rightComponent.style[!this.horiz? 'height' : 'width'] = '100%';\n        this.leftComponent.style.display = 'none';\n      }\n\n      elt.appendChild(this.splitPaneElt);\n      this.$splitPaneElt = $(this.splitPaneElt).splitPane();\n\n      $(this.splitPaneElt).on('resize', (e)=> {\n        this.onresized();\n      });\n      $(this.splitPaneElt).on('dividerdragend', (e)=> {\n        this.onDividerDragEnd();\n      });\n    }\n\n    getLeftComponent() {\n      return this.leftComponent;\n    }\n\n    getRightComponent() {\n      return this.rightComponent;\n    }\n\n    leftComponentCreated() {\n      let pos = this.options && this.options.pos || 200;\n      if (pos >= 0) {\n        $(this.splitPaneElt).splitPane('firstComponentSize', pos);\n      }\n    }\n\n    rightComponentCreated() {\n      let pos = this.options && this.options.pos;\n      if (pos < 0) {\n        $(this.splitPaneElt).splitPane('lastComponentSize', -pos);\n      }\n    }\n\n    onresized() {\n    }\n\n    onDividerDragEnd() {\n    }\n\n    setLeftComponentVisible(visible) {\n      $(this.splitPaneElt).splitPane('setLeftComponentVisible', visible);\n    }\n\n    setRightComponentVisible(visible) {\n      $(this.splitPaneElt).splitPane('setRightComponentVisible', visible);\n    }\n  }\n\n  Gantt.components.Split.impl = Split;\n})(Gantt, $);\n\n\n\n// WEBPACK FOOTER //\n// ./src/jquery/split.js","import Gantt from '../core/core';\nimport $ from 'jquery';\nimport vis from 'vis';\n//import vis from '../../node_modules/vis/dist/vis';\n\nconst defaultConfig = {\n  scrollableHorizonFactor : 3,\n  margin : 20\n};\n\nexport default class TimeLine extends Gantt.components.TimeLine {\n  constructor(gantt, elt, config) {\n    super(gantt, elt, Gantt.utils.mergeObjects({}, defaultConfig, config));\n    this.create();\n  }\n\n  create() {\n    this.scrollableHorizonFactor = Math.max(this.config && this.config.scrollableHorizonFactor || 3, 1);\n    this.items = [];\n    this.itemsByIds = {};\n    this._init = false;\n  }\n\n  setTimeWindow(start, end) {\n    if (this.timeLineElt) {\n      this.node.removeChild(this.timeLineElt);\n    }\n    this.timeLineElt = document.createElement('div');\n    this.timeLineElt.style.width = (this.node.offsetWidth * this.scrollableHorizonFactor) + 'px';\n    this.timeLineElt.style.height = '100%';\n\n    var data = [];\n    var span = end - start;\n    this.scrollableHorizon = {\n      start: Math.round(start - ((this.scrollableHorizonFactor - 1) / 2 ) * span),\n      end: Math.round(end + ((this.scrollableHorizonFactor - 1) / 2 ) * span)\n    };\n    try {\n      // See https://github.com/almende/vis/issues/24 for time zone hack\n      this.visTimeline = new vis.Timeline(this.timeLineElt, data, {\n        // 'millisecond', 'second', 'minute', 'hour', 'weekday', 'day', 'month', 'year'\n        orientation: {axis: 'top', item: 'top'},\n        height: '100%',\n        start: this.scrollableHorizon.start,\n        end: this.scrollableHorizon.end\n      });\n    } catch (e) {\n      console.error(e);\n      throw e;\n    }\n    this.horizon = {start: start, end: end};\n    this.node.appendChild(this.timeLineElt);\n    this.zoomFactor = 1;\n\n    var initPromise = new Promise((resolve, reject) => {\n      this.initResolve = resolve;\n    });\n    this.visTimeline.on('rangechanged', () => {\n      this.updateRatio();\n    });\n    this._init = false;\n    var fireReady = () => {\n      this._init = true;\n      var window = this.visTimeline.getWindow();\n      window.startMillis = window.start.getTime();\n      window.endMillis = window.end.getTime();\n      this.updateRatio();\n      const wnd = { start : start, end : end };\n      this.initResolve(wnd);\n      this.visTimeline.off('changed', fireReady);\n      this.triggerEvent(Gantt.events.TIME_LINE_INIT, wnd);\n    };\n    this.visTimeline.on('changed', fireReady);\n    this.visTimeline.on('rangechange', () => {\n      this.updateRatio();\n      this.triggerEvent(Gantt.events.TIME_LINE_RANGE_CHANGE);\n    });\n    this.visTimeline.on('rangechanged', () => {\n      this.updateRatio();\n      this.triggerEvent(Gantt.events.TIME_LINE_RANGE_CHANGED);\n    });\n    this.visTimeline.on('pan', () => {\n      this.triggerEvent(Gantt.events.TIME_LINE_PAN_MOVE);\n    });\n    this.visTimeline.on('panend', () => {\n      this.triggerEvent(Gantt.events.TIME_LINE_PAN_MOVED);\n    });\n    return initPromise;\n  }\n\n  getWidth() {\n    return this.timeLineElt.offsetWidth;\n  }\n\n  getHorizon() {\n    return this.horizon;\n  }\n\n  getScrollableHorizon() {\n    return this.scrollableHorizon;\n  }\n\n  updateRatio() {\n    this.window = this.visTimeline.getWindow();\n    this.window.startMillis = this.window.start.getTime();\n    this.window.endMillis = this.window.end.getTime();\n    this.scrollableHorizon.start = this.window.startMillis;\n    this.scrollableHorizon.end = this.window.endMillis;\n    this.ratio = this.getWidth() / (this.window.endMillis - this.window.startMillis);\n  }\n\n  getXFromMillis(time) {\n    return Math.round((time - this.scrollableHorizon.start) * this.ratio);\n    //return (time - this.window.startMillis) * this.ratio;\n  }\n\n  getX(time) {\n    return Math.round((time - this.scrollableHorizon.start) * this.ratio);\n  }\n\n  getTimeAt(x) {\n    return this.scrollableHorizon.start + Math.round(x / this.getWidth() * (this.scrollableHorizon.end - this.scrollableHorizon.start));\n  }\n\n  getTimeAxisHeight(defaultValue) {\n    const visTimeAxis = this.timeLineElt && this.timeLineElt.getElementsByClassName(\"vis-panel vis-top\");\n    // Cannot use native offsetHeight as it is rounding dimensions\n    // See warning at https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetHeight\n    return visTimeAxis && visTimeAxis.length && $(visTimeAxis[0]).outerHeight() || defaultValue;\n  }\n\n  getTimeWindow() {\n    return this.visTimeline && this.visTimeline.getWindow();\n  }\n\n  draw() {\n  }\n\n  onResize() {\n    if (this._init) {\n      this.updateRatio();\n    }\n  }\n\n  validateZoomFactor(zoomFactor) {\n    if ((this.zoomFactor + zoomFactor) < 1) {\n      return 0;\n    }\n    return zoomFactor;\n  }\n\n  zoom(zoomFactor, xCenter) {\n    this.zoomFactor += zoomFactor;\n    const w = (this.getWidth() + zoomFactor * this.getWidth());\n    this.timeLineElt.style.width = w + 'px';\n    this.updateRatio();\n\n    this.triggerEvent(Gantt.events.TIME_LINE_SIZE_CHANGED, w, this.getTimeAxisHeight());\n  }\n\n  resetZoom() {\n    this.zoomFactor = 1;\n    const w = (this.node.offsetWidth * this.scrollableHorizonFactor);\n    this.timeLineElt.style.width = w + 'px';\n    this.updateRatio();\n    this.triggerEvent(Gantt.events.TIME_LINE_SIZE_CHANGED, w, this.getTimeAxisHeight());\n  }\n\n  setVisibleTimeWindow(window) {\n    if (!window || !window.start || !window.end) {\n      this.resetZoom();\n    }\n    else {\n      var horizPageCount = (this.scrollableHorizon.end - this.scrollableHorizon.start) / (window.end - window.start);\n      this.zoomFactor = horizPageCount / this.scrollableHorizonFactor;\n      const w = (horizPageCount * this.node.offsetWidth);\n      this.timeLineElt.style.width = w + 'px';\n      this.updateRatio();\n      this.triggerEvent(Gantt.events.TIME_LINE_SIZE_CHANGED, w, this.getTimeAxisHeight());\n    }\n  }\n\n  getVisibleTimes() {\n    return {start: this.window.startMillis, end: this.window.endMillis};\n  }\n\n  scrollTo(time, animate) {\n    var range = this.visTimeline.getWindow();\n    var interval = range.end - range.start;\n\n    this.visTimeline.setWindow(time, time + interval, animate === undefined ? undefined : {animation: animate});\n  }\n\n  /*           Markers        */\n  addTimeMarker(id, time, classes) {\n    var ar = this.visTimeline.customTimes, l = ar && ar.length;\n    this.visTimeline.addCustomTime(time, id);\n\n    // Retrieve the node associate with the time marker\n    if (ar && ar.length && (ar.length != l)) {\n      var markerObj = this.visTimeline.customTimes[l];\n      if (markerObj && markerObj.bar) {\n        $(markerObj.bar).css('top', (this.getTimeAxisHeight() - 3) + 'px');\n      }\n    }\n  }\n\n  removeTimeMarker(id, time, classes) {\n    this.visTimeline.removeCustomTime(id);\n  }\n\n  createVisItem(item) {\n    return {\n      start: item.start || (item.type == 'background' ? this.window.startMillis : undefined),\n      end: item.end || (item.type == 'background' ? this.window.endMillis : undefined),\n      title: item.title,\n      type: item.type == 'background' ? 'background' : (item.type == 'box' ? 'box' : (item.type == 'point' ? 'point' : 'background')),\n      className: item.className,\n      content: item.content\n    }\n  }\n\n  setTimeLineItem(id, item) {\n    this.removeTimeLineItem(id, false);\n    this.addTimeLineItem(id, item);\n  }\n\n  addTimeLineItem(id, item, update) {\n    item = this.createVisItem(item);\n    this.items.push(item);\n    this.itemsByIds[id] = item;\n    if ((update === undefined) || update) {\n      this.visTimeline.setItems(this.items);\n    }\n  }\n\n  removeTimeLineItem(id, update) {\n    var item = this.itemsByIds[id];\n    if (item) {\n      delete this.itemsByIds[id];\n      var index = this.items.indexOf(item);\n      if (index > -1) {\n        this.items.splice(index, 1);\n      }\n      if ((update === undefined) || update) {\n        this.visTimeline.setItems(this.items);\n      }\n    }\n  }\n\n  //\n  // Decorations\n  getDecorationContainer() {\n    const $panel = $(this.timeLineElt).find('.vis-panel.vis-background.vis-horizontal');\n    return $panel.length && $panel[0] || null;\n  }\n}\n\nGantt.components.TimeLine.impl = TimeLine;\n\n\n// WEBPACK FOOTER //\n// ./src/jquery/timeline.js","'use strict';\n\nimport Gantt from '../core/core';\nimport TreeTableController from './treetablecontroller';\nimport $ from 'jquery';\n\nimport dataTable from 'datatables.net';\nif (dataTable) {\n    dataTable(window, $); // https://github.com/aurelia/skeleton-navigation/issues/473\n} //attaches to global jquery object only if datatables are included in the same bundle as Gantt source.\n\n\nconst HIGHLIGHT_CLASS = 'highlight';\nconst SELECTION_CLASS = 'selected';\nconst FLAT_CLASS = 'tree-table-flat';\n\nconst NUMBER_COLUMN_NAME = 'rowNumbers';\nconst HIERARCHY_COLUMN_NAME = 'hierarchy';\n\nconst TREE_NODE_TYPE = 'tree-node';\n\nconst defaultDataTableOptions = {\n    /*serverSide: true,*/\n    /*\n     searching: false,*/\n    bInfo : false,\n    paging:         false,\n    \"scrollY\":      \"100%\",\n    \"scrollX\": true,\n    rowId: \"id\"\n};\n\nfunction getDefaultTableColumns () {\n    return [\n        {\n            name : NUMBER_COLUMN_NAME,\n            data : null,\n            title : \"\",\n            render: (data, type, full, meta) => {\n                return '<div class=\"row-number\">' + (meta.row + 1) + '</div>';\n            },\n            /*\"width\": \"40px\",*/\n            className : \"row-number-col\",\n            orderable: false,\n            searchable : false\n        },\n        {\n            name : HIERARCHY_COLUMN_NAME,\n            data: null,\n            title : \"Name\"\n        }\n    ];\n}\n\nconst findColumn = (columns, name) => {\n    for(let iCol = 0, count = columns? columns.length : 0; iCol < count; iCol++) {\n        if (columns[iCol].name === name) {\n            return columns[iCol];\n        }\n    }\n    return null;\n};\n\nexport default class GanttDataTable extends Gantt.components.TreeTable {\n    constructor(gantt, node, config) {\n        super(gantt, node, config);\n        this.gantt = gantt;\n        const selectionHandler = this.gantt.selection;\n        selectionHandler.on(Gantt.events.ROW_SELECTION_CLEARED, () => this.clearSelection());\n        selectionHandler.on(Gantt.events.ROW_SELECTED, (e, sels) =>  this.selectRows(sels));\n        selectionHandler.on(Gantt.events.ROW_UNSELECTED, (e, sels) =>  this.unselectRows(sels));\n        this.setConfiguration(config);\n    }\n\n    setConfiguration(config) {\n        this.config = config;\n\n        if (this.$dataTable) {\n            this.destroy();\n        }\n\n        const defaultConfig = Gantt.utils.mergeObjects({}, defaultDataTableOptions);\n        defaultConfig.columns = getDefaultTableColumns(); // Instead of doing a deep copy of the defaultDataTableOptions\n        this.dataTableOptions = Gantt.utils.mergeObjects(defaultConfig, config && config.dataTables);\n\n        if (config && config.columns && config.columns.length) {\n            const defaultColumns = {};\n            this.dataTableOptions.columns = this.dataTableOptions.columns.filter((col) => {\n                // Remove default columns if defined - maybe with a different order - in config.columns\n                if (col.name) {\n                    defaultColumns[col.name] = col;\n                }\n                return !col.name || !findColumn(config.columns, col.name);\n            });\n\n            for(let iCol = 0, configCol, col; iCol < config.columns.length; iCol++) {\n                configCol = config.columns[iCol];\n                col = this.customizeDataColumn(configCol.name && defaultColumns[configCol.name] || {}, configCol);\n                if (col) {\n                    this.dataTableOptions.columns.push(col);\n                }\n            }\n\n            // if default columns not in the specified config.columns, add them back in the columns unless explicitely removed\n            const removedCols = {};\n            this.dataTableOptions.columns = this.dataTableOptions.columns.filter((col) => {\n                if (col.remove && col.name) {\n                    removedCols[col.name] = true;\n                    return false;\n                }\n                return true;\n            });\n\n            if (!findColumn(this.dataTableOptions.columns, HIERARCHY_COLUMN_NAME) && !removedCols[HIERARCHY_COLUMN_NAME]) {\n                this.dataTableOptions.columns.splice(0, 0, findColumn(defaultColumns[HIERARCHY_COLUMN_NAME]));\n            }\n            if (!findColumn(this.dataTableOptions.columns, NUMBER_COLUMN_NAME) && !removedCols[NUMBER_COLUMN_NAME]) {\n                this.dataTableOptions.columns.splice(0, 0, findColumn(defaultColumns[NUMBER_COLUMN_NAME]));\n            }\n        }\n\n        if (config && (config.sorting !== undefined) && !config.sorting) {\n            this.dataTableOptions.columns.bSort = false;\n        }\n        else if (!config || !config.initialSorting) {\n            this.dataTableOptions.order = [];\n        }\n\n        this.controller = new TreeTableController();\n        this.controller.rowsVisibilityChanged = (visible, rows, rowRef) => {\n            this.gantt.startUpdating();\n            this.triggerEvent(visible ? Gantt.events.ROWS_ADDED : Gantt.events.ROWS_REMOVED, rows, rowRef);\n            this.gantt.updates.rowsChanged(visible ? Gantt.events.ROWS_ADDED : Gantt.events.ROWS_REMOVED, rows, rowRef);\n            this.gantt.stopUpdating();\n        };\n        this.controller.customizeOptions(this.dataTableOptions, findColumn(this.dataTableOptions.columns, HIERARCHY_COLUMN_NAME));\n\n        this.dataTableOptions.rowId = 'id';\n\n        const oldInitComplete = this.dataTableOptions.initComplete;\n        this.dataTableOptions.initComplete = (oSettings, json) => {\n            if (oldInitComplete) {\n                oldInitComplete(oSettings, json);\n            }\n        };\n        const oldDrawCallback = this.dataTableOptions.drawCallback;\n        this._drawCallbacks = [];\n        this.dataTableOptions.drawCallback = (settings) => {\n            if (oldDrawCallback) {\n                oldDrawCallback.call(this, settings);\n            }\n            for (let i = 0; i < this._drawCallbacks.length; i++) {\n                this._drawCallbacks[i](settings);\n            }\n            this._drawCallbacks = [];\n        };\n        this.create();\n    }\n\n    customizeDataColumn(col, config) {\n        if (config.name) {\n            col.name = config.name;\n        }\n        if (config.title) {\n            col.title = config.title;\n        }\n        if (config.width) {\n            col.width = config.width;\n        }\n        if (config.visible) {\n            col.visible = config.visible;\n        }\n        if (config.className) {\n            col.className = config.className;\n        }\n        if (config.remove) {\n            // Not a dataTables field but pre-processed by this class\n            col.remove = config.remove;\n        }\n        if (config.data || config.text) {\n            const c = config.data || config.text;\n            if (typeof c == \"function\") {\n                col.data = c;\n            }\n            else if (typeof c == \"string\") {\n                var getter = Gantt.utils.propertyEvaluator(c);\n                if (getter) {\n                    col.data = function (object) {\n                        return getter(object);\n                    }\n                }\n            }\n        }\n\n        if (config.renderer || config.sortComparator || config.sortValue || config.filterValue) {\n            const colRenderer  = config.renderer? new (Gantt.components.Renderer.impl || Gantt.components.Renderer)(\n                                    config.renderer, ColumnRendererPrototype, this.gantt) : null;\n            if (config.sortValue || config.sortComparator || (colRenderer && colRenderer.getText)) {\n                col.type = TREE_NODE_TYPE;\n                let sortValue;\n                if (config.sortValue) {\n                    if (Gantt.utils.isFunction(config.sortValue)) {\n                        sortValue = function(obj) { return config.sortValue.call(config, obj); };\n                    }\n                    else if (Gantt.utils.isString(config.sortValue)) {\n                        sortValue = Gantt.utils.propertyEvaluator(config.sortValue);\n                    }\n                    else {\n                        console.warn('sortValue column config should be a function or a string');\n                    }\n                }\n                if (!sortValue && !config.sortComparator && colRenderer && colRenderer.getText) {\n                    sortValue = function(obj) { return colRenderer.getText(obj); };\n                }\n                col.render = {};\n                col.render.sort = (node, type, full, meta) => {\n                    const obj = Object.create(full);\n                    if (sortValue) {\n                        obj.getSortValue = sortValue;\n                    }\n                    if (config.sortComparator) {\n                        obj.comparator = function(a, b) {\n                            return config.sortComparator.call(config, a, b);\n                        };\n                    }\n                    return obj;\n                };\n            }\n            else {\n                col.orderable = false;\n            }\n            if (config.filterValue) {\n                if (!col.render) {\n                    col.render = {};\n                }\n                if (Gantt.utils.isFunction(config.filterValue)) {\n                    col.render.filter = function(node, type, full, meta) { return config.filterValue.call(config, full); };\n                }\n                else if (Gantt.utils.isString(config.filterValue)) {\n                    let filterValue = Gantt.utils.propertyEvaluator(config.filterValue);\n                    col.render.filter = function(node, type, full, meta) { return filterValue(full); };\n                }\n                else {\n                    console.warn('filterValue column config should be a function or a string');\n                }\n            }\n            if (colRenderer) {\n                if (!col.render) {\n                    col.render = {};\n                }\n                if (colRenderer.getText) {\n                    // Value used for sorting or filtering if not sort/filter config specified.\n                    col.render._ = function(node, type, full, meta) {\n                        return colRenderer.getText(full);\n                    }\n                }\n                col.render.display = (node, type, full, meta) => {\n                    let result = '';\n                    var icon = colRenderer.getIcon && colRenderer.getIcon(node, meta);\n                    if (icon) {\n                        icon = Gantt.utils.isArray(icon)? icon : [icon];\n                        for(let iIcon = 0; iIcon < icon.length; iIcon++) {\n                            result+= \"<img src='\" + icon[iIcon] + \"' alt='' class='text-icon'>\";\n                        }\n                    }\n                    var text = colRenderer.getText && colRenderer.getText(node, meta);\n                    if (text) {\n                        result+= \"<span>\" + text + \"</span>\";\n                    }\n                    return result;\n                };\n            }\n            // https://datatables.net/reference/option/columns.createdCell\n            const ctx = {};\n            col.createdCell = ( cell, cellData, rowData, rowIndex, colIndex ) => {\n                colRenderer.draw(rowData, cell, ctx);\n            };\n        }\n        if (!col.data) {\n            col.data = null;\n        }\n        return col;\n    }\n\n    setRowFilter(filter) {\n        this.filter = filter;\n    }\n\n    create() {\n\n    }\n\n    setRows(rows) {\n        this.rows = rows;\n        if (this.tableElt) {\n            this.destroy();\n        }\n\n        this.tableElt = document.createElement('table');\n        this.tableElt.className = Gantt.components.TreeTable.defaultClass;\n        this.tableElt.cellSpacing = 0;\n        //this.tableElt.style.width = '100%';\n\n        const thead = document.createElement('thead');\n        let tr = document.createElement('tr');\n\n        // Scan columns definitions\n        const columns = this.dataTableOptions.columns;\n        for (let i = 0, th; i < columns.length; i++) {\n            th = document.createElement('th');\n            th.innerHTML = columns[i].title && Gantt.utils.getString(columns[i].title) || columns[i].data || ('Col' + (i + 1));\n            tr.appendChild(th);\n        }\n\n        thead.appendChild(tr);\n        this.tableElt.appendChild(thead);\n\n        this.node.appendChild(this.tableElt);\n\n        let initResolver;\n        const initPms = new Promise(function(resolver, reject) {\n            initResolver = resolver;\n        });\n\n        const $tableElt = $(this.tableElt);\n        this.tableBody = null;\n        if (this.headerHeight > 0) {\n            this.headerHeight = -this.headerHeight;\n        }\n        this.$dataTable = $tableElt.on('init.dt', () => {\n            this.tableInitialized();\n\n            if (this.headerHeight < 0) {\n                this.setHeaderHeight(-this.headerHeight)\n            }\n            this.triggerEvent(Gantt.events.TABLE_INIT);\n            initResolver(rows);\n            this.dataTableOptions.data = null;\n        }).DataTable(Gantt.utils.mergeObjects({}, this.dataTableOptions, { data : rows }));\n        // https://datatables.net/examples/api/counter_columns.html\n        const hasNumberColumn = findColumn(this.dataTableOptions.columns, NUMBER_COLUMN_NAME);\n        this.$dataTable.on( 'order.dt search.dt', (e) => {\n            if (hasNumberColumn) {\n                this.$dataTable.column(NUMBER_COLUMN_NAME + ':name', {search:'applied', order:'applied'}).nodes().each( function (cell, i) {\n                    cell.innerHTML = i+1;\n                } );\n            }\n        } ).draw('full-hold');\n\n        const allSettings = this.$dataTable.settings();\n        for (let i = 0; i < allSettings.length; i++) {\n            // Retrieve the GanttDataTable from the global search function\n            allSettings[i].ganttDataTable = this;\n        }\n        const body = this.getScrollableBody(this.tableElt);\n        this.controller.install(this.$dataTable, body);\n        /* Impossilbe to use the code below as an alternative of re-creating the table for each setRows\n            The code below does not set ids to tr rows and the workaround for doing that is too costly.\n            this.$dataTable.rows.add(rows).draw();\n            **/\n\n        /*  Manage selection  */\n        $(body).on('click', 'tr', (e) => {\n            const tr = $(e.target).closest('tr');\n            const row = tr && tr.length && this.getRow(tr[0]);\n            if (row) {\n                this.gantt.highlightRow(row, true, true);\n                this.gantt.selection.processClick(e, row);\n            }\n        });\n        $(body).on('mouseenter', 'tr', (e) => {\n            const tr = $(e.target).closest('tr');\n            const row = tr && tr.length && this.getRow(tr[0]);\n            if (row) {\n                this.gantt.highlightRow(row, true, true);\n            }\n        });\n        $(body).on('mouseleave', 'tr', (e) => {\n            const tr = $(e.target).closest('tr');\n            const row = tr && tr.length && this.getRow(tr[0]);\n            this.gantt.highlightRow(null, true, true);\n        });\n        return initPms;\n    }\n\n    tableInitialized() {\n        $(this.node).toggleClass(FLAT_CLASS, this.gantt.isFlat());\n        this.$scrollableBody = $(this.node).find('div.dataTables_scrollBody');\n        this.scrollableBody = this.$scrollableBody[0];\n        this.tableBody = this.$scrollableBody.find('TBODY')[0];\n\n        this.scrollableBody.overflowX = 'scroll';\n        this.scrollableBody.overflowY = 'hidden';\n        this.scrollableBody.style.position = 'absolute';\n        this.scrollableBody.style.right = 0;\n        this.scrollableBody.style.left = 0;\n        this.scrollableBody.style.bottom = 0;\n        this.scrollableBody.style.width = null;\n        this.scrollableBody.style.height = null;\n\n        const $scrollableHead = $(this.node).find('div.dataTables_scrollHead THEAD');\n        this.tableHeader = $scrollableHead[0];\n        const table = this;\n        $scrollableHead.find('th').click(function() {\n            if (Gantt.utils.hasClass(this, 'sorting') || Gantt.utils.hasClass(this, 'sorting_asc')\n                            || Gantt.utils.hasClass(this, 'sorting_desc')) {\n                table.gantt.startUpdating();\n                table.gantt.updates.rowsChanged(Gantt.events.ROWS_SORTED);\n                table.gantt.updates.tableScrollYChanged(); // When sorting, datatable automatically restore scrolly position to 0\n                table.triggerEvent(Gantt.events.ROWS_SORTED);\n                table.gantt.stopUpdating();\n            }\n        } );\n    }\n\n    onDraw(fct) {\n        this._drawCallbacks.push(fct);\n    }\n\n    createUpdates(parent) {\n        const updates = new (Gantt.components.GanttUpdates.impl || Gantt.components.GanttUpdates)(parent, {\n            doApplyUpdates : () => {\n                if (updates.isReload()) {\n                    this.$dataTable.draw();\n                }\n                else if (updates.containsRowChanges) {\n                    this.$dataTable.draw('full-hold');\n                }\n            }\n        });\n        return updates;\n    }\n\n    getScrollableBody() {\n        return this.getTableBody();\n    }\n\n    setHeaderHeight(height) {\n        if (this.tableHeader) {\n            this.headerHeight = height;\n            let scrollHeadHeight;\n            if (!height) {\n                scrollHeadHeight = $(this.tableHeader).height();\n            }\n            else {\n                scrollHeadHeight = height;\n                const tds = Gantt.utils.getChild(this.tableHeader, 'TR').childNodes;\n                for(let i = 0, count = tds.length; i < count; ++i) {\n                    $(tds.item(i)).css({height: height + 'px'});\n                }\n            }\n            // Horrible hack to Datatable issue for fitting its parent div\n            // https://datatables.net/forums/discussion/12187/datatable-fixed-height\n            this.scrollableBody.style.top = scrollHeadHeight + 'px';\n            const panelHeight = $(this.node).height();\n            this.$scrollableBody.height(panelHeight - scrollHeadHeight);\n            //this.getScrollableBody().style.top = scrollHeadHeight + 'px';\n        }\n        // Table not initialized yet\n        else {\n            // Store it for when the table is initialized\n            this.headerHeight = -height;\n        }\n    }\n\n    getScrollableTable() {\n        return this.scrollableBody;\n    }\n\n    getTableBody() {\n        return this.tableBody;\n    }\n\n    getHeight() {\n        return this.tableBody? this.tableBody.offsetHeight : 0;\n    }\n\n    getRowCount() {\n        return this.$dataTable.data().length;\n    }\n\n    createRowResult(tr, index) {\n        const id = tr.id;\n        const node = (id || (id === 0)) && this.rows && this.rows.byIds[id] || null;\n        if (node) {\n            node.tr = tr;\n            if (index !== undefined) {\n                node.index = index;\n            }\n        }\n        return node;\n    }\n\n    getRow(param) {\n        let id, row;\n        if (param && param.isGanttRow) {\n            row = param;\n            id = param.id;\n        }\n        else if ((typeof param === 'string') || (param && param.id)) {\n            id = param.id || param;\n            row = this.rows && this.rows.byIds && id && this.rows.byIds[id]\n        }\n        else if (Gantt.utils.isInteger(param)) {\n            row = this.rows && this.rows[param];\n            id = row && row.id;\n        }\n        if (row && !row.tr && id) {\n            row.tr = param.nodeType ? param : document.getElementById(id);\n        }\n        return row;\n    }\n\n    getVisibleRows() {\n        const trs = this.$dataTable.$('tr', {\"filter\":\"applied\"});\n        const count = trs.length, result = new Array(count);\n        for(let i = 0, row; i < count; ++i) {\n            row = trs[i];\n            row = row.length? row[0] : row;\n            row = this.rows && this.rows.byIds[row.id];\n            result[i] = row;\n        }\n        return result;\n    }\n\n    getRowAt(y, startingRow) {\n        //TODO code below seems to be quicker but does not work as is as getBoundingClientRect().top does not\n        // return the coordinate relative to the direct parent\n        /*var rowHeight = this.getRowHeight();\n         var rowNum = y / rowHeight;\n         var row = this.getRowAtIndex(Math.floor(y / rowHeight));\n\n         if (!row && !(row = this.nextRow(null))) {\n         return null;\n         }\n         var rect = row.tr.getBoundingClientRect();\n         if (y >= rect.top) {\n         while (y >= rect.bottom) {\n         row = this.nextRow(row);\n         if (!row) {\n         return null;\n         }\n         rect = row.tr.getBoundingClientRect()\n         }\n         }\n         else {\n         while (y < rect.top) {\n         row = this.prevRow(row);\n         if (!row) {\n         return null;\n         }\n         rect = row.tr.getBoundingClientRect();\n         }\n         }\n         return row;*/\n        // Alternative slower option, only using element.offsetHeight\n        let tr, index;\n        if (startingRow && startingRow.getData() && (tr = startingRow.tr)) {\n            index = startingRow.index;\n            let top = this.getRowTop(startingRow);\n            if (top <= y) {\n                y -= top;\n                while (tr && (y > tr.offsetHeight)) {\n                    y -= tr.offsetHeight;\n                    tr = tr.nextSibling;\n                    index++;\n                }\n            }\n            else {\n                do {\n                    tr = tr.previousSibling;\n                    --index;\n                }\n                while (tr && (y < (top -= tr.offsetHeight)));\n            }\n            if (tr && startingRow.tr == tr) {\n                return startingRow;\n            }\n        }\n        else {\n            index = 0;\n            const row = this.nextRow(null);\n            tr = row && row.tr;\n            while (tr && (y >= tr.offsetHeight)) {\n                y -= tr.offsetHeight;\n                tr = tr.nextSibling;\n                ++index;\n            }\n        }\n        return tr && this.createRowResult(tr, index);\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    getRowAtIndex(index) {\n        const body = this.getTableBody();\n        if (body) {\n            let tr = Gantt.utils.getChild(body, 'TR');\n            const origIndex = index;\n            while (index-- && tr) {\n                tr = tr.nextSibling;\n            }\n            return tr && this.createRowResult(tr, origIndex) || null;\n        }\n        return null;\n    }\n\n    getRowTop(row) {\n        return (row.tr || (row.tr = document.getElementById(row.id))) && (row.tr.offsetTop - this.getTableBody().offsetTop) || 0;\n    }\n\n    nextRow(row) {\n        if (!row) {\n            const tr = this.getTableBody() && this.getTableBody().firstChild;\n            return tr && this.createRowResult(tr, 0) || null;\n        }\n        const nextTr = row.tr.nextSibling;\n        return nextTr && this.createRowResult(nextTr, row.index + 1) || null;\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    prevRow(row) {\n        if (!row) {\n            const tr = this.getTableBody() && this.getTableBody().lastChild;\n            return tr && this.createRowResult(tr, this.getTableBody().childElementCount) || null;\n        }\n        const prevTr = row.tr.previousSibling;\n        return prevTr && this.createRowResult(prevTr, row.index - 1) || null;\n    }\n\n    setRowHeight(row, height) {\n        if (!row.defaultHeight) {\n            row.defaultHeight = row.tr.offsetHeight;\n        }\n        if (height != row.defaultHeight) {\n            $(row.tr).css({height: height + 'px'}).addClass('variable-row-height');\n        }\n        else {\n            $(row.tr).css({height: 'inherit'});\n        }\n    }\n\n    getRowHeight(row, height) {\n        //return $(row.tr).offsetHeight;\n        return $(row.tr || (row.tr = document.getElementById(row.id))).height();\n    }\n\n    deleteDrawCache() {\n        if (this.rows) {\n            for(let i = 0, count = this.rows.length; i < count; ++i) {\n                delete this.rows[i].activityRow;\n            }\n        }\n        this.$dataTable.$('tr.variable-row-height').css({height: 'inherit'}).removeClass('variable-row-height');\n    }\n\n    expandParents(row) {\n        row = this.getRow(row);\n        if (row) {\n            this.controller.expandParents('' + row.id); // In case row.id is a num\n        }\n    }\n\n    getFirstVisibleRow() {\n        const yTop = this.getScrollableTable().scrollTop;\n        return this.getRowAt(yTop);\n    }\n\n    isRowVisible(param) {\n        const row = this.getRow(param);\n        if (this.isRowFiltered(row)) {\n            return false;\n        }\n        let parent = row.parent;\n        while(parent) {\n            if (this.controller.isCollapsedNode(parent.id)) {\n                return false;\n            }\n            parent = parent.parent;\n        }\n        return true;\n    }\n\n    toggleCollapseRow(param, collapse) {\n        const row = this.getRow(param);\n        if (!row || this.isRowFiltered(row)) {\n            return false;\n        }\n        if (collapse === undefined) {\n            collapse = !this.controller.isCollapsedNode(row.id);\n        }\n        this.controller.collapseNode(row.id, collapse);\n    }\n\n\n    highlightRow(row, highlight, deselectAll) {\n        const utils = Gantt.utils;\n        if (deselectAll) {\n            const result = this.getTableBody().querySelectorAll('tr.' + HIGHLIGHT_CLASS);\n            for (let i = 0; i < result.length; i++) {\n                utils.removeClass(result[i], HIGHLIGHT_CLASS);\n            }\n        }\n        if (row && row.tr) {\n            utils.toggleClass(row.tr, HIGHLIGHT_CLASS, (highlight === undefined) || highlight);\n        }\n        else if (row) {\n            $(this.getTableBody()).find('#' + (row.id || row)).toggleClass(HIGHLIGHT_CLASS, (highlight === undefined) || highlight);\n        }\n    }\n\n    draw(forceTableReload) {\n        if (forceTableReload) {\n            this.$dataTable.draw();\n        }\n        else {\n            this.$dataTable.draw('full-hold');\n        }\n    }\n\n    onResize() {\n        if (this.$dataTable) this.$dataTable.draw('full-hold');\n    }\n\n    filterChanged() {\n        if (this.$dataTable) this.$dataTable.draw('full-hold');\n    }\n\n    isRowFiltered(row) {\n        return (row.__filterMatched !== undefined) && !row.__filterMatched;\n    }\n\n    setRowColor(row, color) {\n\n    }\n\n    destroy() {\n        if (this.$dataTable) {\n            this.$dataTable.destroy(); // https://datatables.net/reference/api/destroy()\n            if (this.tableElt.parentNode === this.node) {\n                this.node.removeChild(this.tableElt);\n            }\n            this.$dataTable = null;\n            this.tableElt = null;\n            this.tableBody = null;\n            this.$scrollableBody = null;\n            this.tableHeader = null;\n        }\n    }\n\n    /*  Selection methods  */\n    clearSelection() {\n        if (this.$dataTable) {\n            this.$dataTable.$('tr.' + SELECTION_CLASS).removeClass(SELECTION_CLASS);\n        }\n    }\n\n    selectRows(rows) {\n        for(let i = 0, tr; i < rows.length; i++) {\n            tr = rows[i].tr || this.getRow(rows[i]).tr;\n            if (tr) {\n                Gantt.utils.addClass(tr, SELECTION_CLASS);\n                /*const tds = tr.querySelectorAll('td');\n                 for (let i = 0; i < tds.length; i++) {\n                 Gantt.utils.addClass(tds[i], SELECTION_CLASS);\n                 }*/\n            }\n        }\n    }\n\n    unselectRows(rows) {\n        for(let i = 0, tr; i < rows.length; i++) {\n            tr = rows[i].tr || this.getRow(rows[i]).tr;\n            if (tr) {\n                Gantt.utils.removeClass(tr, SELECTION_CLASS);\n            }\n        }\n    }\n}\n\nGantt.components.TreeTable.defaultClass = 'gantt-tree-table display nowrap';\n\nconst ColumnRendererPrototype = {\n    createShape : function(activity, parentElt, ctx) {\n        return parentElt\n    },\n\n    getText : function(row) {\n        return row.name;\n    },\n\n    drawContent(elt, icon, text, object, ctx) {\n        // Done through the render method\n        /*if (icon) {\n            const img = document.createElement('img');\n            img.className = 'image-content';\n            img.src = icon;\n            img.alt = '';\n            img.style.float = 'left';\n            elt.appendChild(img);\n        }\n\n        if (text) {\n            elt.appendChild(document.createTextNode(text));\n        }*/\n    }\n};\n\n\nGantt.components.TreeTable.impl = GanttDataTable;\n\n\n\n// WEBPACK FOOTER //\n// ./src/jquery/datatables.js","'use strict';\n\nlet DATATABLE_FILTER_INSTALLED = false;\nconst TREE_NODE_TYPE = 'tree-node';\n\nexport default class TreeTableController {\n    constructor() {\n        this.collapsedNodes = {};\n    }\n\n    getHierarchyColumn(columns) {\n        // Safe enough for now to consider the first column is the one controlling the table hierarchy\n        return columns && columns.length && columns[0] || null;\n    }\n\n    customizeOptions(options, hCol) {\n        if (hCol || (hCol = this.getHierarchyColumn(options.columns))) {\n            // Without this column, not hierarchy can be managed, this tree table controller remains inactive\n            if (!hCol.render) {\n                hCol.render = {};\n            }\n            const oldRender = hCol.render.display;\n            const oldData = hCol.data;\n            const self = this;\n            hCol.render.display = function (node, type, full, meta) {\n                var content = oldRender && oldRender.call(this, oldData && node[oldData] || node, type, full, meta) || node.name;\n                var parent = node.parent;\n                var prefix = '';\n                while (parent) {\n                    prefix += '<div class=\"tree-node-spacing\"></div>';\n                    parent = parent.parent;\n                }\n                prefix += '<div class=\"tree-node-handle\">'\n                    + (node.children && node.children.length? ('<i style=\"width: 16px;\" class=\"fa fa-caret-right fa-lg collapsed\"></i><i style=\"16px;\" class=\"fa fa-caret-down fa-lg expanded\"></i>') : '')\n                    + '</div>';\n                if (node.color) {\n                    prefix += '<div class=\"tree-node-color\" style=\"background-color=\"' + node.color + '\"></div>';\n                }\n                return prefix + content;\n            };\n            hCol.render.filter = function (node, type, full, meta) {\n                return node? node.name : '';\n            };\n            hCol.className = hCol.className && (hCol.className + ' hierarchy-control') || 'hierarchy-control';\n            hCol.type = TREE_NODE_TYPE;\n\n            const oldCreatedRow = options.createdRow;\n            options.createdRow = (row, node, index) => {\n                const parentRow = node.children && node.children.length;\n                let classname = parentRow ? (this.collapsedNodes[node.id] && 'parent-row collapsed' || 'parent-row') : 'leaf-row';\n                if (node.hidden) {\n                    classname = classname + ' hidden';\n                }\n                $(row).addClass(classname);\n                if (oldCreatedRow) {\n                    oldCreatedRow.call(this, row, node, index);\n                }\n            };\n        }\n    }\n\n    getData(id) {\n        const row = this.$dataTable.row(id);\n        let node;\n        return row && (node = row.data()) && node.getData() || null;\n    }\n\n    reset() {\n        this.collapsedNodes = {};\n    }\n\n    getRow(data) {\n        if (typeof data == 'string') {\n            // object ID\n            return this.$dataTable.row('#' + data);\n        }\n        return data;\n    }\n\n    isCollapsedNode(node) {\n        if (typeof node == 'string') {\n            return this.collapsedNodes[node];\n        }\n        const row = this.getRow(node);\n        node = row && row.data();\n        return node && node.children && this.collapsedNodes[node.id];\n    }\n\n    collapseNode(node, collapse) {\n        var row = this.getRow(node);\n        node = row && row.data();\n        if (node && node.children && node.children.length) {\n            var visible = !collapse;\n            if (!collapse) {\n                delete this.collapsedNodes[node.id];\n                $(row.node()).removeClass('collapsed');\n            }\n            else {\n                this.collapsedNodes[node.id] = true;\n                $(row.node()).addClass('collapsed');\n            }\n            var rowsModified = [];\n            for (var i = 0; i < node.children.length; i++) {\n                this.setRowVisible(node.children[i], visible, rowsModified);\n            }\n            this.rowsVisibilityChanged(!collapse, rowsModified, node.id);\n        }\n    }\n\n    rowsVisibilityChanged(visible, rows, rowRef) {\n\n    }\n\n    setRowVisible(row, visible, rowsModified) {\n        var tr = row.tr || this.$dataTable.row('#' + row.id).node();\n        if (tr) {\n            $(tr).toggleClass('hidden', !visible);\n            if (visible) {\n                delete row.hidden;\n            }\n            else {\n                row.hidden = true;\n            }\n            if (rowsModified) {\n                rowsModified.push(row.id);\n            }\n            if (row.children && !this.collapsedNodes[row.id]) {\n                for (let i = 0, count = row.children.length; i < count; ++i) {\n                    this.setRowVisible(row.children[i], visible, rowsModified);\n                }\n            }\n        }\n    }\n\n    expandParents(row) {\n        row = this.getRow(row); // row is Datatable row\n        let node = row && row.data(); // node is Gantt row.\n        if (node) {\n            let parent = node.parent, topCollapsed;\n            while(parent) {\n                if (this.collapsedNodes[parent.id]) {\n                    // Change the collapse state of all collapsed ancestor except for the top most collapsed ancestor\n                    // which will be processed with the call to collapseNode().\n                    if (topCollapsed) {\n                        delete this.collapsedNodes[topCollapsed.id];\n                    }\n                    topCollapsed = parent;\n                }\n                parent = parent.parent;\n            }\n            if (topCollapsed) {\n                // Expand the top most collapsed ancestor\n                this.collapseNode(topCollapsed.id, false);\n            }\n        }\n    }\n\n    install($dataTable, bodyElt) {\n        this.$dataTable = $dataTable;\n        $(bodyElt).on('click', 'td.hierarchy-control .tree-node-handle', (e) => {\n            const tr = $(e.target).closest('tr');\n            if (tr && tr.length) {\n                var row = $dataTable.row(tr);\n\n                this.collapseNode(row, !this.isCollapsedNode(row));\n            }\n        });\n\n        if (!DATATABLE_FILTER_INSTALLED) {\n            DATATABLE_FILTER_INSTALLED = true;\n            $.fn.dataTable.ext.search.push(\n                function (settings, aData, dataIndex, node) {\n                    var dataTable;\n                    if (dataTable = settings.ganttDataTable) {\n                        // Be sure this global search applies only to GanttDataTables\n                        if (!dataTable.filter.isEmpty()) {\n                            node.__filterMatched = dataTable.filter.accept(node, aData, dataIndex);\n                        }\n                    }\n                    return true;\n                }\n            );\n            $.fn.dataTable.ext.search.push(\n                function (settings, data, dataIndex, node) {\n                    if (settings.ganttDataTable) { // Be sure this global search applies only to GanttDataTables\n                        if (node.hidden) {\n                            return false;\n                        }\n                        if (!settings.ganttDataTable.filter.isEmpty()) {\n                            // If a search is in place, a collapsed or not matching node cam be made visible if at least one child matches the search\n                            const processVisibilityFromChildren = (vNode) => {\n                                if (vNode && vNode.children) {\n                                    for (var iChild = 0, count = vNode.children.length, child; iChild < count; iChild++) {\n                                        child = vNode.children[iChild];\n                                        if (child.__filterMatched || processVisibilityFromChildren(child)) {\n                                            vNode.__filterMatched = true;\n                                            return true;\n                                        }\n                                    }\n                                }\n                                return false;\n                            };\n\n                            return node.__filterMatched || processVisibilityFromChildren(node);\n                        }\n                        return true;\n                    }\n                    return true;\n                }\n            );\n\n            const makeComparisonFct = function(m) {\n                function comp(a, b, comparator) {\n                    a = a.getSortValue? a.getSortValue(a) : (comparator? a : a.name);\n                    b = b.getSortValue? b.getSortValue(b) : (comparator? b : b.name);\n                    return comparator? comparator(a, b) * m : (a < b? -m : a > b? m : 0);\n                }\n                return (a, b) => {\n                    const comparator = a.comparator; // If comparator specified in user config, we are sure it is provided with a or b. But a.parent or b.parent won't have it has they are not constructed from the sort render callback\n                    if (a.parent === b.parent) {\n                        return comp(a, b, comparator);\n                    }\n                    // Look for common ancestor\n                    let aParent = a.parent, lastParent = a, bParent;\n                    while(aParent) {\n                        // Has b aParent has an ancestor?\n                        bParent = b;\n                        while(bParent) {\n                            if (bParent.parent === aParent) {\n                                return comp(lastParent, bParent, comparator);\n                            }\n                            bParent = bParent.parent;\n                        }\n                        lastParent = aParent;\n                        aParent = aParent.parent;\n                    }\n                    // Compare top ancestor for both nodes\n                    for(bParent = b; bParent.parent;) {\n                        bParent = bParent.parent;\n                    }\n                    return comp(lastParent, bParent, comparator);\n                }\n            };\n\n            $.fn.dataTable.ext.type.order[TREE_NODE_TYPE + '-asc'] = makeComparisonFct(1);\n            $.fn.dataTable.ext.type.order[TREE_NODE_TYPE + '-desc'] = makeComparisonFct(-1);\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/jquery/treetablecontroller.js","module.exports = __WEBPACK_EXTERNAL_MODULE_69__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"datatables.net\"\n// module id = 69\n// module chunks = 0"],"sourceRoot":""}